;
; +-------------------------------------------------------------------------+
; |   This file has been generated by The Interactive Disassembler (IDA)    |
; |        Copyright (c) 2009 by Hex-Rays, <support@hex-rays.com>           |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	F39FD5A146426CF261F207D7FC878675

; File Name   :	th01/REIIDEN.EXE
; Format      :	MS-DOS executable (EXE)
; Base Address:	0h Range: 0h-3B660h Loaded length: 36C14h
; Entry	Point :	0:0
; OS type	  :  MS	DOS
; Application type:  Executable	16bit

		.286 ; Force the .model directive to create 16-bit default segments...
		.model large
		__LARGE__ equ 1
		.386 ; ... then switch to what we actually need.
		; And yes, we can't move this to an include file for some reason.

include ReC98.inc
include th01/th01.inc
include libs/BorlandC/regs.inc

	option emulator

	extern @$bdla$qnv:proc
	extern @$bnew$qui:proc
	extern @$bnwa$qui:proc
	extern @_vector_new_$qnvuiuluie:proc
	extern @set_new_handler$qnqv$v:proc
	extern FTOL@:proc
	extern LDIV@:proc
	extern LXMUL@:proc
	extern SCOPY@:proc
	extern __control87:proc
	extern __fgetc:proc
	extern __lrotl:proc
	extern __lrotr:proc
	extern __mbcjmstojis:proc
	extern __mbctype:byte
	extern __turboFloat
	extern _close:proc
	extern _coreleft:proc
	extern _delay:proc
	extern _execl:proc
	extern _exit:proc
	extern _farcalloc:proc
	extern _farfree:proc
	extern _farheapcheck:proc
	extern _farheapchecknode:proc
	extern _farmalloc:proc
	extern _fclose:proc
	extern _filelength:proc
	extern _fopen:proc
	extern _getvect:proc
	extern _int86:proc
	extern _intdosx:proc
	extern _kbhit:proc
	extern _memcmp:proc
	extern _memcpy:proc
	extern _memset:proc
	extern _open:proc
	extern _printf:proc
	extern _puts:proc
	extern _scanf:proc
	extern _segread:proc
	extern _setvect:proc
	extern _strcmp:proc
	extern _strcpy:proc
	extern _toupper:proc
	extern _vsprintf:proc
	extern _write:proc

; ===========================================================================

; Segment type:	Pure code
_TEXT		segment	word public 'CODE' use16
		assume cs:_TEXT
		assume es:nothing, ds:_DATA, fs:nothing, gs:nothing

include libs/piloadc/piloadc.asm
include libs/master.lib/text_clear.asm
include libs/master.lib/text_fillca.asm
include libs/master.lib/graph_400line.asm
include libs/master.lib/graph_clear.asm
include libs/master.lib/graph_show.asm
include libs/master.lib/graph_start.asm
include libs/master.lib/palette_show.asm
include libs/master.lib/palette_init.asm
include libs/master.lib/respal_exist.asm
include libs/master.lib/respal_free.asm
include libs/master.lib/resdata.asm
include libs/master.lib/file_read.asm
include libs/master.lib/file_close.asm
include libs/master.lib/file_exist.asm
include libs/master.lib/file_ropen.asm
include libs/master.lib/file_write.asm
include libs/master.lib/file_create.asm
include libs/master.lib/file_seek.asm
include libs/master.lib/dos_free.asm
include libs/master.lib/dos_axdx.asm
include libs/master.lib/keystart.asm
include libs/master.lib/key_sense.asm
include libs/master.lib/dos_ropen.asm
include libs/master.lib/grcg_setcolor.asm
include libs/master.lib/grcg_pset.asm
include libs/master.lib/egc.asm
include libs/master.lib/iatan2.asm
include libs/master.lib/isqrt.asm
include libs/master.lib/random.asm
_TEXT		ends

; ===========================================================================

; Segment type:	Pure code
main_01_TEXT	segment	byte public 'CODE' use16
		assume cs:main_01_TEXT
		;org 2
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_B502	proc far

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	8, 0
		cmp	[bp+arg_0], 1
		jnz	short loc_B559
		mov	byte_386FC, 0
		mov	byte_386FD, 0
		mov	byte_386FE, 0
		mov	byte_386FF, 0
		mov	byte_38704, 0
		mov	byte_38705, 0
		mov	byte_38706, 0
		mov	byte_38707, 0
		mov	byte_38700, 0
		mov	byte_38701, 0
		mov	byte_38702, 0
		mov	byte_38703, 0
		mov	byte_38708, 0
		mov	byte_38709, 0
		mov	byte_34A50, 0
		leave
		retf
; ---------------------------------------------------------------------------

loc_B559:
		push	7
		call	key_sense
		mov	[bp+var_2], ax
		push	5
		call	key_sense
		mov	[bp+var_4], ax
		push	8
		call	key_sense
		mov	[bp+var_6], ax
		push	9
		call	key_sense
		mov	[bp+var_8], ax
		push	7
		call	key_sense
		or	[bp+var_2], ax
		push	5
		call	key_sense
		or	[bp+var_4], ax
		push	8
		call	key_sense
		or	[bp+var_6], ax
		push	9
		call	key_sense
		or	[bp+var_8], ax
		mov	al, byte_386FC
		mov	ah, 0
		mov	dx, [bp+var_2]
		and	dx, 4
		cmp	ax, dx
		jnz	short loc_B5C7
		mov	al, byte_38704
		mov	ah, 0
		mov	dx, [bp+var_6]
		and	dx, 8
		cmp	ax, dx
		jz	short loc_B5DF

loc_B5C7:
		test	byte ptr [bp+var_2], 4
		jnz	short loc_B5D3
		test	byte ptr [bp+var_6], 8
		jz	short loc_B5DA

loc_B5D3:
		mov	byte_34A54, 1
		jmp	short loc_B5DF
; ---------------------------------------------------------------------------

loc_B5DA:
		mov	byte_34A54, 0

loc_B5DF:
		mov	al, byte ptr [bp+var_2]
		and	al, 4
		mov	byte_386FC, al
		mov	al, byte ptr [bp+var_6]
		and	al, 8
		mov	byte_38704, al
		mov	al, byte_386FD
		mov	ah, 0
		mov	dx, [bp+var_2]
		and	dx, 20h
		cmp	ax, dx
		jnz	short loc_B60D
		mov	al, byte_38705
		mov	ah, 0
		mov	dx, [bp+var_8]
		and	dx, 8
		cmp	ax, dx
		jz	short loc_B625

loc_B60D:
		test	byte ptr [bp+var_2], 20h
		jnz	short loc_B619
		test	byte ptr [bp+var_8], 8
		jz	short loc_B620

loc_B619:
		mov	byte_34A55, 1
		jmp	short loc_B625
; ---------------------------------------------------------------------------

loc_B620:
		mov	byte_34A55, 0

loc_B625:
		mov	al, byte ptr [bp+var_2]
		and	al, 20h
		mov	byte_386FD, al
		mov	al, byte ptr [bp+var_8]
		and	al, 8
		mov	byte_38705, al
		mov	al, byte_386FE
		mov	ah, 0
		mov	dx, [bp+var_2]
		and	dx, 8
		cmp	ax, dx
		jnz	short loc_B653
		mov	al, byte_38706
		mov	ah, 0
		mov	dx, [bp+var_6]
		and	dx, 40h
		cmp	ax, dx
		jz	short loc_B66B

loc_B653:
		test	byte ptr [bp+var_2], 8
		jnz	short loc_B65F
		test	byte ptr [bp+var_6], 40h
		jz	short loc_B666

loc_B65F:
		or	byte_34A4B, 2
		jmp	short loc_B66B
; ---------------------------------------------------------------------------

loc_B666:
		and	byte_34A4B, 0FDh

loc_B66B:
		mov	al, byte ptr [bp+var_2]
		and	al, 8
		mov	byte_386FE, al
		mov	al, byte ptr [bp+var_6]
		and	al, 40h
		mov	byte_38706, al
		mov	al, byte_386FF
		mov	ah, 0
		mov	dx, [bp+var_2]
		and	dx, 10h
		cmp	ax, dx
		jnz	short loc_B699
		mov	al, byte_38707
		mov	ah, 0
		mov	dx, [bp+var_8]
		and	dx, 1
		cmp	ax, dx
		jz	short loc_B6B1

loc_B699:
		test	byte ptr [bp+var_2], 10h
		jnz	short loc_B6A5
		test	byte ptr [bp+var_8], 1
		jz	short loc_B6AC

loc_B6A5:
		or	byte_34A4B, 1
		jmp	short loc_B6B1
; ---------------------------------------------------------------------------

loc_B6AC:
		and	byte_34A4B, 0FEh

loc_B6B1:
		mov	al, byte ptr [bp+var_2]
		and	al, 10h
		mov	byte_386FF, al
		mov	al, byte ptr [bp+var_8]
		and	al, 1
		mov	byte_38707, al
		mov	al, byte_38700
		mov	ah, 0
		mov	dx, [bp+var_4]
		and	dx, 2
		cmp	ax, dx
		jz	short loc_B6FF
		test	byte ptr [bp+var_4], 2
		jz	short loc_B6FA
		mov	byte_34A4E, 1
		cmp	word_34A6E, 14h
		jge	short loc_B6E8
		inc	byte_38708
		jmp	short loc_B6FF
; ---------------------------------------------------------------------------

loc_B6E8:
		mov	word_34A6E, 0
		mov	byte_38708, 1
		mov	byte_38709, 0
		jmp	short loc_B6FF
; ---------------------------------------------------------------------------

loc_B6FA:
		mov	byte_34A4E, 0

loc_B6FF:
		mov	al, byte ptr [bp+var_4]
		and	al, 2
		mov	byte_38700, al
		mov	al, byte_38701
		mov	ah, 0
		mov	dx, [bp+var_4]
		and	dx, 4
		cmp	ax, dx
		jz	short loc_B745
		test	byte ptr [bp+var_4], 4
		jz	short loc_B740
		mov	byte_34A53, 1
		cmp	word_34A6E, 14h
		jge	short loc_B72E
		inc	byte_38709
		jmp	short loc_B745
; ---------------------------------------------------------------------------

loc_B72E:
		mov	word_34A6E, 0
		mov	byte_38709, 1
		mov	byte_38708, 0
		jmp	short loc_B745
; ---------------------------------------------------------------------------

loc_B740:
		mov	byte_34A53, 0

loc_B745:
		mov	al, byte ptr [bp+var_4]
		and	al, 4
		mov	byte_38701, al
		push	0
		call	key_sense
		mov	[bp+var_2], ax
		push	3
		call	key_sense
		mov	[bp+var_4], ax
		push	0
		call	key_sense
		or	[bp+var_2], ax
		push	3
		call	key_sense
		or	[bp+var_4], ax
		mov	al, byte_38702
		mov	ah, 0
		mov	dx, [bp+var_2]
		and	dx, 1
		cmp	ax, dx
		jz	short loc_B793
		test	byte ptr [bp+var_2], 1
		jz	short loc_B793
		mov	al, 1
		sub	al, byte_34A51
		mov	byte_34A51, al

loc_B793:
		mov	al, byte ptr [bp+var_2]
		and	al, 1
		mov	byte_38702, al
		mov	al, byte_38703
		mov	ah, 0
		mov	dx, [bp+var_4]
		and	dx, 10h
		cmp	ax, dx
		jz	short loc_B7CF
		test	byte ptr [bp+var_4], 10h
		jz	short loc_B7CA
		cmp	byte_34A51, 1
		jnz	short loc_B7C3
		cmp	byte_34A4E, 1
		jnz	short loc_B7C3
		mov	_player_is_hit, 1

loc_B7C3:
		mov	byte_34A52, 1
		jmp	short loc_B7CF
; ---------------------------------------------------------------------------

loc_B7CA:
		mov	byte_34A52, 0

loc_B7CF:
		mov	al, byte ptr [bp+var_4]
		and	al, 10h
		mov	byte_38703, al
		cmp	byte_38709, 2
		jb	short loc_B7E5
		cmp	byte_38708, 2
		jnb	short loc_B7F3

loc_B7E5:
		cmp	byte_34A4B, 3
		jnz	short loc_B802
		cmp	byte_34A4E, 0
		jz	short loc_B802

loc_B7F3:
		mov	byte_34A50, 1
		mov	byte_38709, 0
		mov	byte_38708, 0

loc_B802:
		cmp	_mode_test, 1
		jnz	short locret_B87A
		push	6
		call	key_sense
		mov	[bp+var_2], ax
		push	6
		call	key_sense
		or	[bp+var_2], ax
		mov	al, byte_3870A
		mov	ah, 0
		mov	dx, [bp+var_2]
		and	dx, 40h
		cmp	ax, dx
		jz	short loc_B843
		test	byte ptr [bp+var_2], 40h
		jz	short loc_B83E
		mov	byte_34A4C, 1
		nopcall	sub_D10B
		jmp	short loc_B843
; ---------------------------------------------------------------------------

loc_B83E:
		mov	byte_34A4C, 0

loc_B843:
		mov	al, byte ptr [bp+var_2]
		and	al, 40h
		mov	byte_3870A, al
		mov	al, byte_3870B
		mov	ah, 0
		mov	dx, [bp+var_2]
		and	dx, 80h
		cmp	ax, dx
		jz	short loc_B872
		test	byte ptr [bp+var_2], 80h
		jz	short loc_B86D
		mov	byte_34A4D, 1
		nopcall	sub_D323
		jmp	short loc_B872
; ---------------------------------------------------------------------------

loc_B86D:
		mov	byte_34A4D, 0

loc_B872:
		mov	al, byte ptr [bp+var_2]
		and	al, 80h
		mov	byte_3870B, al

locret_B87A:
		leave
		retf
sub_B502	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_B87C	proc far
		push	bp
		mov	bp, sp
		mov	byte_34A4B, 0
		mov	byte_34A54, 0
		mov	byte_34A55, 0
		mov	byte_34A52, 0
		mov	byte_34A51, 0
		mov	byte_34A4E, 0
		mov	byte_34A53, 0
		mov	byte_34A4C, 0
		mov	byte_34A4D, 0
		push	1
		call	sub_B502
		pop	cx
		pop	bp
		retf
sub_B87C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_B8B5	proc far

var_C		= word ptr -0Ch
var_9		= byte ptr -9
var_8		= word ptr -8
var_5		= byte ptr -5
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= byte ptr  0Ch

		enter	0Ch, 0
		push	si
		push	di
		mov	cx, [bp+arg_4]
		mov	[bp+var_2], cx
		les	bx, [bp+arg_0]
		mov	si, es:[bx]
		mov	ax, 0A000h
		mov	dx, [bp+var_2]
		mov	es, ax
		assume es:nothing
		mov	es:[si], dx
		mov	[bp+var_4], cx
		mov	es, word ptr [bp+arg_0+2]
		assume es:nothing
		mov	ax, es:[bx]
		add	ax, 2
		mov	di, ax
		mov	ax, 0A000h
		mov	dx, [bp+var_4]
		mov	es, ax
		assume es:nothing
		mov	es:[di], dx
		mov	al, [bp+arg_6]
		mov	[bp+var_5], al
		mov	es, word ptr [bp+arg_0+2]
		assume es:nothing
		mov	ax, es:[bx]
		mov	[bp+var_8], ax
		mov	ax, 0A200h
		mov	bx, [bp+var_8]
		mov	dl, [bp+var_5]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		mov	al, [bp+arg_6]
		mov	[bp+var_9], al
		les	bx, [bp+arg_0]
		assume es:nothing
		mov	ax, es:[bx]
		add	ax, 2
		mov	[bp+var_C], ax
		mov	ax, 0A200h
		mov	bx, [bp+var_C]
		mov	dl, [bp+var_9]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		les	bx, [bp+arg_0]
		assume es:nothing
		add	word ptr es:[bx], 4
		pop	di
		pop	si
		leave
		retf
sub_B8B5	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_B933	proc far

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	si, si
		jmp	short loc_B958
; ---------------------------------------------------------------------------

loc_B93C:
		xor	di, di
		jmp	short loc_B952
; ---------------------------------------------------------------------------

loc_B940:
		push	[bp+arg_6]
		push	[bp+arg_4]
		pushd	[bp+arg_0]
		call	sub_B8B5
		add	sp, 8
		inc	di

loc_B952:
		cmp	di, 28h	; '('
		jl	short loc_B940
		inc	si

loc_B958:
		cmp	si, 5
		jl	short loc_B93C
		pop	di
		pop	si
		pop	bp
		retf
sub_B933	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_B961	proc far

var_48		= byte ptr -48h
outregs		= REGS ptr -26h
inregs		= REGS ptr -16h
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	48h, 0
		push	si
		push	di
		mov	word ptr [bp+inregs+2],	ss
		lea	ax, [bp+var_48]
		mov	word ptr [bp+inregs+4],	ax
		mov	ax, [bp+arg_0]
		mov	word ptr [bp+inregs+6],	ax
		mov	byte ptr [bp+inregs+1],	14h
		push	ss
		lea	ax, [bp+outregs]
		push	ax		; outregs
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		push	18h		; intno
		call	_int86
		mov	[bp+var_2], 0
		push	50020h
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		call	sub_B933
		add	sp, 12h
		mov	di, 1
		jmp	loc_BA34
; ---------------------------------------------------------------------------

loc_B9A8:
		mov	bx, di
		add	bx, bx
		lea	ax, [bp+var_48]
		add	bx, ax
		mov	al, ss:[bx]
		mov	ah, 0
		shl	ax, 8
		mov	bx, di
		add	bx, bx
		inc	bx
		lea	dx, [bp+var_48]
		add	bx, dx
		mov	dl, ss:[bx]
		mov	dh, 0
		add	ax, dx
		mov	[bp+var_4], ax
		mov	[bp+var_6], 8000h
		xor	si, si
		jmp	short loc_B9E9
; ---------------------------------------------------------------------------

loc_B9D6:
		push	50020h
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		call	sub_B8B5
		add	sp, 8
		inc	si

loc_B9E9:
		cmp	si, 0Ch
		jb	short loc_B9D6
		xor	si, si
		jmp	short loc_BA12
; ---------------------------------------------------------------------------

loc_B9F2:
		mov	ax, [bp+var_6]
		test	[bp+var_4], ax
		jnz	short loc_B9FE
		push	5
		jmp	short loc_BA00
; ---------------------------------------------------------------------------

loc_B9FE:
		push	1

loc_BA00:
		push	20h ; ' '
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		call	sub_B8B5
		add	sp, 8
		shr	[bp+var_6], 1
		inc	si

loc_BA12:
		cmp	si, 10h
		jb	short loc_B9F2
		xor	si, si
		jmp	short loc_BA2E
; ---------------------------------------------------------------------------

loc_BA1B:
		push	50020h
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		call	sub_B8B5
		add	sp, 8
		inc	si

loc_BA2E:
		cmp	si, 0Ch
		jb	short loc_BA1B
		inc	di

loc_BA34:
		cmp	di, 10h
		jbe	loc_B9A8
		push	50020h
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		call	sub_B933
		add	sp, 8
		pop	di
		pop	si
		leave
		retf	2
sub_B961	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far sub_BA53(union REGS	*inregs, int, int, int)
sub_BA53	proc far

outregs		= REGS ptr -10h
inregs		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	10h, 0
		les	bx, [bp+inregs]
		mov	ax, [bp+arg_6]
		mov	es:[bx+2], ax
		mov	ax, [bp+arg_4]
		mov	es:[bx+4], ax
		mov	ax, [bp+arg_8]
		mov	es:[bx+6], ax
		mov	byte ptr es:[bx+1], 14h
		push	ss
		lea	ax, [bp+outregs]
		push	ax		; outregs
		push	word ptr [bp+inregs+2]
		push	bx		; inregs
		push	18h		; intno
		call	_int86
		add	sp, 0Ah
		leave
		retf
sub_BA53	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __fastcall __far sub_BA89(int, int, int, int)
sub_BA89	proc far

var_96		= word ptr -96h
var_84		= word ptr -84h
var_72		= word ptr -72h
var_60		= word ptr -60h
var_4E		= word ptr -4Eh
var_3C		= word ptr -3Ch
var_2A		= word ptr -2Ah
inregs		= REGS ptr -18h
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= word ptr  6

		enter	96h, 0
		push	si
		push	di
		mov	ax, [bp+arg_0]
		mov	[bp+var_6], ax
		push	8053h		; int
		push	ss		; int
		lea	ax, [bp+var_96]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8054h		; int
		push	ss		; int
		lea	ax, [bp+var_84]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8041h		; int
		push	ss		; int
		lea	ax, [bp+var_72]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8047h		; int
		push	ss		; int
		lea	ax, [bp+var_60]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8045h		; int
		push	ss		; int
		lea	ax, [bp+var_4E]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		add	sp, 32h
		mov	ax, [bp+var_6]
		mov	bx, 0Ah
		xor	dx, dx
		div	bx
		add	ax, 8030h
		push	ax		; int
		push	ss		; int
		lea	ax, [bp+var_3C]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		mov	ax, [bp+var_6]
		mov	bx, 0Ah
		xor	dx, dx
		div	bx
		add	dx, 8030h
		push	dx		; int
		push	ss		; int
		lea	ax, [bp+var_2A]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		mov	[bp+var_4], 0
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B933
		add	sp, 1Ch
		mov	di, 2
		jmp	short loc_BB96
; ---------------------------------------------------------------------------

loc_BB44:
		mov	[bp+var_8], 0
		jmp	short loc_BB8F
; ---------------------------------------------------------------------------

loc_BB4B:
		mov	bx, [bp+var_8]
		imul	bx, 12h
		add	bx, di
		lea	ax, [bp+var_96]
		add	bx, ax
		mov	al, ss:[bx]
		mov	[bp+var_1], al
		mov	[bp+var_2], 80h
		xor	si, si
		jmp	short loc_BB87
; ---------------------------------------------------------------------------

loc_BB67:
		mov	al, [bp+var_2]
		test	[bp+var_1], al
		jnz	short loc_BB73
		push	1
		jmp	short loc_BB75
; ---------------------------------------------------------------------------

loc_BB73:
		push	45h ; 'E'

loc_BB75:
		push	20h ; ' '
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B8B5
		add	sp, 8
		shr	[bp+var_2], 1
		inc	si

loc_BB87:
		cmp	si, 8
		jb	short loc_BB67
		inc	[bp+var_8]

loc_BB8F:
		cmp	[bp+var_8], 5
		jb	short loc_BB4B
		inc	di

loc_BB96:
		cmp	di, 11h
		jbe	short loc_BB44
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B933
		push	23h ; '#'
		call	_frame_delay
		mov	[bp+var_4], 0
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B933
		add	sp, 12h
		mov	di, 2
		jmp	loc_BC58
; ---------------------------------------------------------------------------

loc_BBCE:
		xor	si, si
		jmp	short loc_BBE5
; ---------------------------------------------------------------------------

loc_BBD2:
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B8B5
		add	sp, 8
		inc	si

loc_BBE5:
		cmp	si, 0Ch
		jb	short loc_BBD2
		mov	[bp+var_8], 5
		jmp	short loc_BC35
; ---------------------------------------------------------------------------

loc_BBF1:
		mov	bx, [bp+var_8]
		imul	bx, 12h
		add	bx, di
		lea	ax, [bp+var_96]
		add	bx, ax
		mov	al, ss:[bx]
		mov	[bp+var_1], al
		mov	[bp+var_2], 80h
		xor	si, si
		jmp	short loc_BC2D
; ---------------------------------------------------------------------------

loc_BC0D:
		mov	al, [bp+var_2]
		test	[bp+var_1], al
		jnz	short loc_BC19
		push	1
		jmp	short loc_BC1B
; ---------------------------------------------------------------------------

loc_BC19:
		push	45h ; 'E'

loc_BC1B:
		push	20h ; ' '
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B8B5
		add	sp, 8
		shr	[bp+var_2], 1
		inc	si

loc_BC2D:
		cmp	si, 8
		jb	short loc_BC0D
		inc	[bp+var_8]

loc_BC35:
		cmp	[bp+var_8], 7
		jb	short loc_BBF1
		xor	si, si
		jmp	short loc_BC52
; ---------------------------------------------------------------------------

loc_BC3F:
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B8B5
		add	sp, 8
		inc	si

loc_BC52:
		cmp	si, 0Ch
		jb	short loc_BC3F
		inc	di

loc_BC58:
		cmp	di, 11h
		jbe	loc_BBCE
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B933
		push	23h ; '#'
		call	_frame_delay
		push	ds
		push	offset format	; "\x1B*"
		call	_printf
		add	sp, 0Eh
		pop	di
		pop	si
		leave
		retf	2
sub_BA89	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_BC87	proc far

var_2		= word ptr -2

		enter	2, 0
		push	si
		call	sub_14BD2
		push	ds
		push	offset aMask_grf ; "mask.grf"
		call	sub_18C8C
		push	ds
		push	offset aMiko_ac_bos ; "miko_ac.bos"
		push	ds
		push	offset unk_37129
		call	sub_14BF0
		push	ds
		push	offset aMiko_ac2_bos ; "miko_ac2.bos"
		push	ds
		push	offset unk_373AF
		call	sub_14BF0
		push	ds
		push	offset aStg_ptn	; "stg.ptn"
		push	0
		call	sub_10888
		push	ds
		push	offset aMiko_ptn ; "miko.ptn"
		push	1
		call	sub_10888
		push	1A0005h
		call	sub_10814
		add	sp, 24h
		nopcall	sub_BEB1
		xor	si, si
		jmp	short loc_BCF1
; ---------------------------------------------------------------------------

loc_BCE1:
		mov	[bp+var_2], si
		mov	bx, si
		imul	bx, 45h
		mov	al, byte ptr [bp+var_2]
		mov	[bx+4843h], al
		inc	si

loc_BCF1:
		cmp	si, 0Ah
		jl	short loc_BCE1
		mov	byte_34AA4, 0
		pop	si
		leave
		retf
sub_BC87	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far sub_BCFE(int, char *s1, int)
sub_BCFE	proc far

var_2		= word ptr -2
arg_0		= word ptr  6
s1		= dword	ptr  8
arg_6		= word ptr  0Ch

		enter	2, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		cmp	byte_34A49, 1
		jnz	short loc_BD88
		push	ds
		push	offset a1640m	; "\x1B[16;40m"
		call	_printf
		push	ds
		push	offset a00h	; "\x1B[0;0H"
		call	_printf
		add	sp, 8
		mov	[bp+var_2], 0
		jmp	short loc_BD43
; ---------------------------------------------------------------------------

loc_BD2A:
		xor	di, di
		jmp	short loc_BD3B
; ---------------------------------------------------------------------------

loc_BD2E:
		push	ds
		push	offset asc_34B3F ; " "
		call	_printf
		add	sp, 4
		inc	di

loc_BD3B:
		cmp	di, 50h	; 'P'
		jl	short loc_BD2E
		inc	[bp+var_2]

loc_BD43:
		cmp	[bp+var_2], 19h
		jl	short loc_BD2A
		push	ds
		push	offset a0m	; "\x1B[0m"
		call	_printf
		add	sp, 4
		push	ds
		push	offset s2	; "empty.grf"
		pushd	[bp+s1]	; s1
		call	_strcmp
		add	sp, 8
		or	ax, ax
		jz	short loc_BD75
		pushd	[bp+s1]
		call	sub_10BAE
		add	sp, 4

loc_BD75:
		push	ds
		push	offset _z_Palettes
		nopcall	sub_C433
		add	sp, 4
		call	sub_EC80
		jmp	short loc_BDAD
; ---------------------------------------------------------------------------

loc_BD88:
		push	1
		call	_graph_accesspage_func
		call	sub_EC80
		push	0
		call	_graph_accesspage_func
		push	400170h
		push	x_36C26
		call	sub_197E1
		add	sp, 0Ah

loc_BDAD:
		push	si
		call	sub_2091E
		pop	cx
		cmp	byte_34A49, 1
		jnz	short loc_BDC2
		call	sub_EC80
		jmp	short loc_BE00
; ---------------------------------------------------------------------------

loc_BDC2:
		cmp	byte_34A49, 0
		jnz	short loc_BE00
		push	si
		call	sub_20868
		push	0
		call	_graph_accesspage_func
		push	1
		call	_graph_accesspage_func
		push	0
		call	_graph_accesspage_func
		push	400170h
		push	x_36C26
		call	sub_197E1
		add	sp, 0Eh
		call	sub_17E1E
		call	sub_183A3

loc_BE00:
		cmp	[bp+arg_6], 0
		jz	short loc_BE0B
		call	sub_EC0D

loc_BE0B:
		mov	ax, si
		mov	bx, 5
		cwd
		idiv	bx
		or	dx, dx
		jz	short loc_BE23
		mov	ax, si
		cwd			; int
		idiv	bx
		cmp	dx, 4
		jnz	loc_BEA4

loc_BE23:
		call	_mdrv2_se_play pascal, 14
		call	sub_B961 pascal, 456Ch	; 東 (JIS CODE)
		call	_frame_delay pascal, 8
		call	_mdrv2_se_play pascal, 14
		call	sub_B961 pascal, 4A7Dh	; 方 (JIS CODE)
		call	_frame_delay pascal, 8
		call	_mdrv2_se_play pascal, 14
		call	sub_B961 pascal, 217Ah	; ★ (JIS CODE)
		call	_frame_delay pascal, 8
		call	_mdrv2_se_play pascal, 14
		call	sub_B961 pascal, 704Dh	; 靈 (JIS CODE)
		call	_frame_delay pascal, 8
		call	_mdrv2_se_play pascal, 14
		call	sub_B961 pascal, 305Bh	; 異 (JIS CODE)
		call	_frame_delay pascal, 8
		call	_mdrv2_se_play pascal, 14
		call	sub_B961 pascal, 4541h	; 伝 (JIS CODE)
		call	_frame_delay pascal, 8
		add	sp, 18h	; (only sub_B961 actually uses Pascal calling convention!)

loc_BEA4:
		mov	al, byte_34A34
		cbw			; int
		push	ax		; int
		call	sub_BA89
		pop	di
		pop	si
		leave
		retf
sub_BCFE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_BEB1	proc far
		push	bp
		mov	bp, sp
		push	ds
		push	offset aKuzi1_grc ; "kuzi1.grc"
		push	6
		call	sub_1744B
		push	ds
		push	offset aKuzi2_grc ; "kuzi2.grc"
		push	7
		call	sub_1744B
		add	sp, 0Ch
		pop	bp
		retf
sub_BEB1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_BECF	proc far

var_32		= byte ptr -32h
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	32h, 0
		push	si
		lea	ax, [bp+var_32]
		push	ss
		push	ax
		push	ds
		push	offset unk_34AA5
		mov	cx, 30h	; '0'
		call	SCOPY@
		mov	word_34A78, 1
		cmp	[bp+arg_0], 0
		jnz	loc_BF82
		push	ds
		push	offset unk_37635
		call	sub_30E54
		add	sp, 4
		push	430170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		xor	si, si
		jmp	short loc_BF75
; ---------------------------------------------------------------------------

loc_BF15:
		mov	[bp+var_2], 0
		jmp	short loc_BF6E
; ---------------------------------------------------------------------------

loc_BF1C:
		mov	bx, si
		imul	bx, 3
		add	bx, [bp+var_2]
		mov	al, _z_Palettes[bx]
		mov	bx, si
		imul	bx, 3
		add	bx, [bp+var_2]
		mov	[bx+3D6Ch], al
		mov	bx, si
		imul	bx, 3
		add	bx, [bp+var_2]
		cbw
		cmp	ax, 0Ah
		jle	short loc_BF50
		cmp	[bp+var_2], 2
		jnz	short loc_BF4C
		mov	al, 0Fh
		jmp	short loc_BF4E
; ---------------------------------------------------------------------------

loc_BF4C:
		mov	al, 0Dh

loc_BF4E:
		jmp	short loc_BF5F
; ---------------------------------------------------------------------------

loc_BF50:
		mov	bx, si
		imul	bx, 3
		add	bx, [bp+var_2]
		mov	al, _z_Palettes[bx]
		add	al, byte ptr [bp+var_2]

loc_BF5F:
		mov	bx, si
		imul	bx, 3
		add	bx, [bp+var_2]
		mov	[bx+3D9Ch], al
		inc	[bp+var_2]

loc_BF6E:
		cmp	[bp+var_2], 3
		jl	short loc_BF1C
		inc	si

loc_BF75:
		cmp	si, 10h
		jl	short loc_BF15
		mov	byte_3876C, 0FFh
		jmp	loc_C42E
; ---------------------------------------------------------------------------

loc_BF82:
		cmp	[bp+arg_0], 32h	; '2'
		jge	loc_C146
		mov	ax, [bp+arg_0]
		mov	bx, 2
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_BFC0
		mov	al, byte_38723
		cbw
		push	ax
		mov	al, byte_38722
		cbw
		push	ax
		mov	al, byte_3876C
		cbw
		pop	dx
		add	dx, ax
		push	dx
		mov	al, byte_38721
		cbw
		push	ax
		mov	al, byte_3876C
		cbw
		pop	dx
		add	dx, ax
		push	dx
		push	7
		call	_z_palette_set_show
		add	sp, 8

loc_BFC0:
		mov	ax, [bp+arg_0]
		mov	bx, 4
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_BFF1
		mov	ax, [bp+arg_0]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		mov	bx, 28h	; '('
		mov	ax, dx
		cwd
		idiv	bx
		or	ax, ax
		jnz	short loc_BFE9
		mov	al, byte_3876C
		dec	al
		jmp	short loc_BFEE
; ---------------------------------------------------------------------------

loc_BFE9:
		mov	al, byte_3876C
		inc	al

loc_BFEE:
		mov	byte_3876C, al

loc_BFF1:
		mov	ax, [bp+arg_0]
		mov	bx, 2
		cwd
		idiv	bx
		or	dx, dx
		jnz	loc_C113
		mov	al, byte ptr [bp+arg_0]
		mov	byte_387D9, al
		mov	[bp+var_2], 0
		jmp	loc_C10B
; ---------------------------------------------------------------------------

loc_C00E:
		mov	si, [bp+var_2]
		jmp	loc_C0F3
; ---------------------------------------------------------------------------

loc_C014:
		push	200030h
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E03h]
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3DCDh]
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		mov	ax, [bp+var_2]
		imul	ax, 0Ah
		mov	dx, 1F4h
		sub	dx, ax
		mov	ax, [bp+arg_0]
		add	ax, 3Ch	; '<'
		shl	ax, 2
		sub	dx, ax
		movsx	eax, dx
		mov	dl, byte_387D9
		mov	dh, 0
		and	dx, 0FFh
		add	dx, dx
		mov	bx, dx
		movsx	edx, _CosTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, 130h
		mov	bx, si
		add	bx, bx
		mov	[bx+3DCDh], ax
		mov	ax, [bp+var_2]
		imul	ax, 0Ah
		mov	dx, 1F4h
		sub	dx, ax
		mov	ax, [bp+arg_0]
		add	ax, 3Ch	; '<'
		shl	ax, 2
		sub	dx, ax
		movsx	eax, dx
		mov	dl, byte_387D9
		mov	dh, 0
		and	dx, 0FFh
		add	dx, dx
		mov	bx, dx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, 0B8h ; 'ｸ'
		mov	bx, si
		add	bx, bx
		mov	[bx+3E03h], ax
		mov	ax, [bp+var_2]
		add	ax, 8
		cmp	ax, si
		jz	short loc_C0CA
		push	7
		mov	ax, si
		sub	ax, [bp+var_2]
		push	ax
		push	6
		jmp	short loc_C0D2
; ---------------------------------------------------------------------------

loc_C0CA:
		push	70000h
		push	7

loc_C0D2:
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E03h]
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3DCDh]
		call	sub_1754D
		add	sp, 0Ah
		inc	si
		mov	al, byte_387D9
		add	al, 1Ch
		mov	byte_387D9, al

loc_C0F3:
		mov	ax, [bp+var_2]
		add	ax, 9
		cmp	ax, si
		jg	loc_C014
		mov	al, byte ptr [bp+arg_0]
		neg	al
		mov	byte_387D9, al
		add	[bp+var_2], 9

loc_C10B:
		cmp	[bp+var_2], 9
		jle	loc_C00E

loc_C113:
		mov	ax, [bp+arg_0]
		mov	bx, 1Eh
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_C128
		push	8
		call	_mdrv2_se_play
		pop	cx

loc_C128:
		mov	ax, [bp+arg_0]
		mov	bx, 0Ah
		cwd
		idiv	bx
		or	dx, dx
		jnz	loc_C42E
		push	ds
		push	offset unk_37635
		call	sub_30E54
		add	sp, 4
		jmp	loc_C42E
; ---------------------------------------------------------------------------

loc_C146:
		cmp	[bp+arg_0], 32h	; '2'
		jnz	short loc_C17C
		xor	si, si
		jmp	short loc_C16F
; ---------------------------------------------------------------------------

loc_C150:
		push	200030h
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E03h]
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3DCDh]
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		inc	si

loc_C16F:
		cmp	si, 12h
		jl	short loc_C150
		mov	byte_34A58, 1
		jmp	loc_C42E
; ---------------------------------------------------------------------------

loc_C17C:
		cmp	[bp+arg_0], 32h	; '2'
		jle	loc_C3EE
		cmp	[bp+arg_0], 8Ch
		jge	loc_C3EE
		mov	ax, [bp+arg_0]
		mov	bx, 0Ah
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_C1A2
		push	9
		call	_mdrv2_se_play
		pop	cx

loc_C1A2:
		mov	ax, [bp+arg_0]
		mov	bx, 4
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_C1B6
		push	ss
		lea	ax, [bp+var_32]
		push	ax
		jmp	short loc_C1C8
; ---------------------------------------------------------------------------

loc_C1B6:
		mov	ax, [bp+arg_0]
		mov	bx, 4
		cwd
		idiv	bx
		cmp	dx, 2
		jnz	short loc_C1D0
		push	ds
		push	offset unk_3873C

loc_C1C8:
		call	sub_EB10
		add	sp, 4

loc_C1D0:
		mov	ax, [bp+arg_0]
		mov	bx, 10h
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_C1E2
		push	188h
		jmp	short loc_C214
; ---------------------------------------------------------------------------

loc_C1E2:
		mov	ax, [bp+arg_0]
		mov	bx, 10h
		cwd
		idiv	bx
		cmp	dx, 4
		jz	short loc_C211
		mov	ax, [bp+arg_0]
		mov	bx, 10h
		cwd
		idiv	bx
		cmp	dx, 8
		jnz	short loc_C203
		push	180h
		jmp	short loc_C214
; ---------------------------------------------------------------------------

loc_C203:
		mov	ax, [bp+arg_0]
		mov	bx, 10h
		cwd
		idiv	bx
		cmp	dx, 0Ch
		jnz	short loc_C21C

loc_C211:
		push	190h

loc_C214:
		call	sub_11738
		pop	cx
		jmp	short loc_C235
; ---------------------------------------------------------------------------

loc_C21C:
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_C235
		push	ds
		push	offset unk_37635
		call	sub_30E54
		add	sp, 4

loc_C235:
		xor	si, si
		mov	byte_387D9, 0
		jmp	loc_C38C
; ---------------------------------------------------------------------------

loc_C23F:				; ...
		mov	ax, [bp+arg_0]
		add	ax, 0FFCEh
		imul	ax, 6
		cwde
		mov	dl, byte_387D9
		mov	dh, 0
		and	dx, 0FFh
		add	dx, dx
		mov	bx, dx
		movsx	edx, _CosTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, 130h
		mov	word_3876D, ax
		mov	ax, [bp+arg_0]
		add	ax, 0FFCEh
		imul	ax, 6
		cwde
		mov	dl, byte_387D9
		mov	dh, 0
		and	dx, 0FFh
		add	dx, dx
		mov	bx, dx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, 0B8h ; 'ｸ'
		mov	word_387A3, ax
		pushd	[_VRAM_PLANE_B]
		push	ax
		push	word_3876D
		call	sub_1156E
		add	sp, 8
		mov	ax, [bp+arg_0]
		add	ax, 0FFCEh
		imul	ax, 7
		cwde
		mov	dl, byte_387D9
		mov	dh, 0
		and	dx, 0FFh
		add	dx, dx
		mov	bx, dx
		movsx	edx, _CosTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, 130h
		mov	word_3876D, ax
		mov	ax, [bp+arg_0]
		add	ax, 0FFCEh
		imul	ax, 7
		cwde
		mov	dl, byte_387D9
		mov	dh, 0
		and	dx, 0FFh
		add	dx, dx
		mov	bx, dx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, 0B8h ; 'ｸ'
		mov	word_387A3, ax
		pushd	[_VRAM_PLANE_B]
		push	ax
		push	word_3876D
		call	sub_1156E
		add	sp, 8
		mov	ax, [bp+arg_0]
		add	ax, 0FFCEh
		shl	ax, 3
		cwde
		mov	dl, byte_387D9
		mov	dh, 0
		and	dx, 0FFh
		add	dx, dx
		mov	bx, dx
		movsx	edx, _CosTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, 130h
		mov	word_3876D, ax
		mov	ax, [bp+arg_0]
		add	ax, 0FFCEh
		shl	ax, 3
		cwde
		mov	dl, byte_387D9
		mov	dh, 0
		and	dx, 0FFh
		add	dx, dx
		mov	bx, dx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, 0B8h ; 'ｸ'
		mov	word_387A3, ax
		pushd	[_VRAM_PLANE_B]
		push	ax
		push	word_3876D
		call	sub_1156E
		add	sp, 8
		inc	si
		mov	al, byte_387D9
		add	al, 10h
		mov	byte_387D9, al

loc_C38C:
		cmp	si, 10h
		jl	loc_C23F
		mov	ax, [bp+arg_0]
		mov	bx, 14h
		cwd
		idiv	bx
		or	dx, dx
		jnz	loc_C42E
		xor	si, si
		jmp	short loc_C3E7
; ---------------------------------------------------------------------------

loc_C3A6:
		mov	[bp+var_2], 0
		jmp	short loc_C3E0
; ---------------------------------------------------------------------------

loc_C3AD:
		mov	bx, si
		imul	bx, 3
		add	bx, [bp+var_2]
		mov	al, [bx+3D9Ch]
		push	ax
		mov	bx, si
		imul	bx, 3
		add	bx, [bp+var_2]
		cbw
		cmp	ax, 0Fh
		jge	short loc_C3CC
		mov	al, 1
		jmp	short loc_C3CE
; ---------------------------------------------------------------------------

loc_C3CC:
		mov	al, 0

loc_C3CE:
		pop	dx
		add	dl, al
		mov	bx, si
		imul	bx, 3
		add	bx, [bp+var_2]
		mov	[bx+3D9Ch], dl
		inc	[bp+var_2]

loc_C3E0:
		cmp	[bp+var_2], 3
		jl	short loc_C3AD
		inc	si

loc_C3E7:
		cmp	si, 10h
		jl	short loc_C3A6
		jmp	short loc_C42E
; ---------------------------------------------------------------------------

loc_C3EE:
		cmp	[bp+arg_0], 8Ch
		jnz	short loc_C42E
		push	0
		call	sub_11738
		pop	cx
		push	1
		call	_graph_accesspage_func
		pop	cx
		call	sub_EC80
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	ds
		push	offset unk_39B8C
		call	sub_EB10
		add	sp, 4
		mov	_player_invincibility_time, BOMB_INVINCIBILITY_FRAMES_AFTER
		mov	byte_34A58, 0
		mov	ax, 1
		jmp	short loc_C430
; ---------------------------------------------------------------------------

loc_C42E:
		xor	ax, ax

loc_C430:
		pop	si
		leave
		retf
sub_BECF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_C433	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		xor	dx, dx
		jmp	short loc_C45F
; ---------------------------------------------------------------------------

loc_C43A:
		xor	cx, cx
		jmp	short loc_C459
; ---------------------------------------------------------------------------

loc_C43E:
		mov	ax, dx
		imul	ax, 3
		les	bx, [bp+arg_0]
		add	bx, ax
		add	bx, cx
		mov	al, es:[bx]
		mov	bx, dx
		imul	bx, 3
		add	bx, cx
		mov	[bx+51ECh], al
		inc	cx

loc_C459:
		cmp	cx, 3
		jl	short loc_C43E
		inc	dx

loc_C45F:
		cmp	dx, 10h
		jl	short loc_C43A
		pop	bp
		retf
sub_C433	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_C466	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		cmp	[bp+arg_0], 0
		jnz	short loc_C4AB
		cmp	word_387DA, 0FFh
		jz	loc_C5B1
		xor	si, si
		jmp	short loc_C49D
; ---------------------------------------------------------------------------

loc_C47E:
		push	80010h
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E5Ah]
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E4Ah]
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		inc	si

loc_C49D:
		cmp	si, 8
		jl	short loc_C47E
		mov	word_387DA, 0FFh
		jmp	loc_C5B1
; ---------------------------------------------------------------------------

loc_C4AB:
		cmp	word_387DA, 0FFh
		jnz	short loc_C4C7
		xor	si, si
		jmp	short loc_C4C2
; ---------------------------------------------------------------------------

loc_C4B7:
		mov	bx, si
		add	bx, bx
		mov	word ptr [bx+3E3Ah], 0
		inc	si

loc_C4C2:
		cmp	si, 8
		jl	short loc_C4B7

loc_C4C7:
		xor	si, si
		jmp	loc_C5AA
; ---------------------------------------------------------------------------

loc_C4CC:
		mov	bx, si
		add	bx, bx
		cmp	word ptr [bx+3E3Ah], 9
		jz	short loc_C4E2
		mov	bx, si
		add	bx, bx
		cmp	word ptr [bx+3E3Ah], 0
		jnz	short loc_C550

loc_C4E2:
		mov	bx, si
		add	bx, bx
		cmp	word ptr [bx+3E3Ah], 9
		jnz	short loc_C50B
		push	80010h
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E5Ah]
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E4Ah]
		call	_egc_copy_rect_1_to_0
		add	sp, 8

loc_C50B:
		call	IRand
		mov	bx, 30h	; '0'
		cwd
		idiv	bx
		add	dx, x_36C26
		add	dx, -8
		mov	bx, si
		add	bx, bx
		mov	[bx+3E4Ah], dx
		call	IRand
		mov	bx, 30h	; '0'
		cwd
		idiv	bx
		add	dx, 160h
		mov	bx, si
		add	bx, bx
		mov	[bx+3E5Ah], dx
		call	IRand
		mov	bx, 7
		cwd
		idiv	bx
		inc	dx
		mov	bx, si
		add	bx, bx
		mov	[bx+3E3Ah], dx

loc_C550:
		mov	bx, si
		add	bx, bx
		cmp	word ptr [bx+3E5Ah], 0
		jl	short loc_C5A1
		mov	bx, si
		add	bx, bx
		cmp	word ptr [bx+3E5Ah], 278h
		jge	short loc_C5A1
		mov	bx, si
		add	bx, bx
		cmp	word ptr [bx+3E3Ah], 4
		jg	short loc_C57D
		mov	bx, si
		add	bx, bx
		mov	ax, [bx+3E3Ah]
		dec	ax
		jmp	short loc_C588
; ---------------------------------------------------------------------------

loc_C57D:
		mov	bx, si
		add	bx, bx
		mov	ax, 8
		sub	ax, [bx+3E3Ah]

loc_C588:
		push	ax
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E5Ah]
		mov	bx, si
		add	bx, bx
		push	word ptr [bx+3E4Ah]
		call	sub_179F8
		add	sp, 6

loc_C5A1:
		mov	bx, si
		add	bx, bx
		inc	word ptr [bx+3E3Ah]
		inc	si

loc_C5AA:
		cmp	si, 8
		jl	loc_C4CC

loc_C5B1:
		pop	si
		pop	bp
		retf
sub_C466	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_C5B4	proc far

var_2		= word ptr -2

		enter	2, 0
		mov	ax, word_36C2C
		mov	bx, 5
		cwd
		idiv	bx
		mov	[bp+var_2], ax
		fild	[bp+var_2]
		fadd	dbl_34A9C
		fstp	dbl_34A94
		fld	dbl_34A94
		fcomp	flt_34B64
		fstsw	[bp+var_2]
		fwait
		mov	ax, [bp+var_2]
		sahf
		jbe	short loc_C5EF
		fld	flt_34B64
		jmp	short loc_C60A
; ---------------------------------------------------------------------------

loc_C5EF:
		fld	dbl_34A94
		fcomp	dbl_34B68
		fstsw	[bp+var_2]
		fwait
		mov	ax, [bp+var_2]
		sahf
		jnb	short loc_C611
		fld	dbl_34B68

loc_C60A:
		fstp	dbl_34A94
		fwait

loc_C611:
		mov	ax, word_36C2C
		mov	bx, 5
		cwd
		idiv	bx
		mov	[bp+var_2], ax
		fild	[bp+var_2]
		fadd	dbl_34A9C
		call	ftol@
		leave
		retf
sub_C5B4	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl __far sub_C62D(double, int)
sub_C62D	proc far

var_2		= word ptr -2
arg_0		= qword	ptr  6
arg_8		= word ptr  0Eh

		enter	2, 0
		push	si
		mov	si, [bp+arg_8]
		or	si, si
		jnz	short loc_C68D
		fld	dbl_34A94
		fchs
		fmul	dbl_34B70
		fstp	dbl_34A9C
		fwait
		cmp	word_34A7C, 0
		jnz	short loc_C68D
		cmp	word_36C2C, 11h
		jge	short loc_C670
		call	IRand
		mov	bx, 32h	; '2'
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_C670
		mov	word_34A7C, 1

loc_C670:
		cmp	word_36C2C, 11h
		jge	short loc_C68D
		call	IRand
		mov	bx, 32h	; '2'
		cwd
		idiv	bx
		cmp	dx, 1
		jnz	short loc_C68D
		mov	word_34A7C, 2

loc_C68D:
		cmp	si, 1
		jnz	short loc_C6B4
		mov	ax, word_36C2C
		mov	bx, 4
		cwd
		idiv	bx
		mov	[bp+var_2], ax
		fild	[bp+var_2]
		fld	dbl_34A94
		fchs
		fsubrp	st(1), st
		fstp	dbl_34A9C
		fwait

loc_C6B4:
		cmp	si, 2
		jnz	short loc_C6CF
		fld	dbl_34A94
		fdiv	flt_34B78
		fadd	dbl_34B7C
		fstp	dbl_34A9C
		fwait

loc_C6CF:
		cmp	si, 3
		jnz	short loc_C6DF
		fld	[bp+arg_0]
		fstp	dbl_34A9C
		fwait

loc_C6DF:
		mov	word_36C2C, 0
		pop	si
		leave
		retf
sub_C62D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_C6E8	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		mov	bx, [bp+arg_0]
		dec	bx
		cmp	bx, 3
		ja	short loc_C715
		add	bx, bx
		jmp	cs:off_C75E[bx]

loc_C6FB:
		sub	word_36C28, 4
		jmp	short loc_C715
; ---------------------------------------------------------------------------

loc_C702:
		add	word_36C28, 4
		jmp	short loc_C715
; ---------------------------------------------------------------------------

loc_C709:
		sub	word_36C28, 8
		jmp	short loc_C715
; ---------------------------------------------------------------------------

loc_C710:
		add	word_36C28, 8

loc_C715:
		cmp	word_36C28, 0
		jg	short loc_C738
		cmp	word_34A7C, 1
		jnz	short loc_C72B
		mov	word_34A7C, 2
		jmp	short loc_C738
; ---------------------------------------------------------------------------

loc_C72B:
		cmp	word_34A7C, 3
		jnz	short loc_C738
		mov	word_34A7C, 4

loc_C738:
		cmp	word_36C28, 260h
		jl	short loc_C75C
		cmp	word_34A7C, 2
		jnz	short loc_C74F
		mov	word_34A7C, 1
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_C74F:
		cmp	word_34A7C, 4
		jnz	short loc_C75C
		mov	word_34A7C, 3

loc_C75C:
		pop	bp
		retf
sub_C6E8	endp

; ---------------------------------------------------------------------------
off_C75E	dw offset loc_C6FB
		dw offset loc_C702
		dw offset loc_C709
		dw offset loc_C710

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_C766	proc far

var_C		= qword	ptr -0Ch
arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		cmp	word_34A86, 0
		jnz	loc_C816
		push	word_34A7C
		call	sub_C6E8
		pop	cx
		call	sub_C5B4
		add	word_36C2A, ax
		inc	word_34A92
		cmp	word_34A7C, 1
		jz	short loc_C799
		cmp	word_34A7C, 3
		jnz	short loc_C79D

loc_C799:
		inc	word_34A7E

loc_C79D:
		cmp	word_34A7C, 2
		jz	short loc_C7AB
		cmp	word_34A7C, 4
		jnz	short loc_C7AF

loc_C7AB:
		dec	word_34A7E

loc_C7AF:
		cmp	word_34A7E, 0Ah
		jl	short loc_C7BC
		mov	word_34A7E, 0

loc_C7BC:
		cmp	word_34A7E, 0
		jge	short loc_C7C9
		mov	word_34A7E, 9

loc_C7C9:
		cmp	word_36C2A, 170h
		jle	short loc_C7F4
		push	0		; int
		fld	dbl_34B70
		sub	sp, 8
		fstp	[bp+var_C]
		fwait
		call	sub_C62D
		add	sp, 0Ah
		mov	word_36C2A, 170h
		mov	word_34A84, 0

loc_C7F4:
		cmp	word_36C2A, 40h
		jge	short loc_C816
		push	1		; int
		fldz
		sub	sp, 8
		fstp	[bp+var_C]
		fwait
		call	sub_C62D
		add	sp, 0Ah
		mov	word_36C2A, 40h

loc_C816:
		push	1
		call	_frame_delay
		pop	cx
		push	ds
		push	offset unk_37635
		call	sub_30B1F
		add	sp, 4
		mov	ax, si
		mov	bx, 5
		cwd
		idiv	bx
		cmp	dx, 4
		jz	short loc_C846
		push	si
		call	sub_1FDD3
		pop	cx
		push	0
		call	sub_20E4C
		pop	cx

loc_C846:
		cmp	word_34A86, 0
		jnz	short loc_C855
		push	0
		call	sub_1AC6E
		pop	cx

loc_C855:
		cmp	word_34A86, 0
		jnz	short loc_C879
		mov	ax, word_34A7E
		mov	bx, 3
		cwd
		idiv	bx
		add	ax, 3
		push	ax
		push	word_34A90
		push	word_34A8E
		call	sub_196A7
		add	sp, 6

loc_C879:
		mov	ax, si
		mov	bx, 5
		cwd
		idiv	bx
		cmp	dx, 4
		jz	short loc_C88B
		call	sub_201BE

loc_C88B:
		cmp	word_34A86, 0
		jnz	short loc_C8B6
		cmp	_player_is_hit, 0
		jnz	short loc_C8B6
		mov	ax, word_34A7E
		mov	bx, 3
		cwd
		idiv	bx
		add	ax, 3
		push	ax
		push	word_36C2A
		push	word_36C28
		call	sub_197E1
		add	sp, 6

loc_C8B6:
		mov	ax, word_36C28
		mov	word_34A8E, ax
		mov	ax, word_36C2A
		mov	word_34A90, ax
		pop	si
		pop	bp
		retf	2
sub_C766	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_C8C7	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	si, si
		jmp	short loc_C92D
; ---------------------------------------------------------------------------

loc_C8D0:
		cmp	si, 7
		jz	short loc_C92C
		xor	di, di
		jmp	short loc_C927
; ---------------------------------------------------------------------------

loc_C8D9:
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		cbw
		imul	[bp+arg_0]
		mov	bx, 64h	; 'd'
		cwd
		idiv	bx
		mov	bx, si
		imul	bx, 3
		mov	_z_Palettes[bx+di], al
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		cbw
		or	ax, ax
		jge	short loc_C90D
		mov	bx, si
		imul	bx, 3
		mov	byte ptr _z_Palettes[bx+di], 0

loc_C90D:
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		cbw
		cmp	ax, 0Fh
		jle	short loc_C926
		mov	bx, si
		imul	bx, 3
		mov	byte ptr _z_Palettes[bx+di], 0Fh

loc_C926:
		inc	di

loc_C927:
		cmp	di, 3
		jl	short loc_C8D9

loc_C92C:
		inc	si

loc_C92D:
		cmp	si, 10h
		jl	short loc_C8D0
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		add	sp, 4
		pop	di
		pop	si
		pop	bp
		retf
sub_C8C7	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_C942	proc far

var_1		= byte ptr -1

		enter	2, 0
		mov	[bp+var_1], 0
		call	graph_putsa_fx c, 272, large (37h shl 16) or 128, offset aVovVtvrvd, ds ; "ＰＡＵＳＥ"
		call	graph_putsa_fx c, 256, large (37h shl 16) or 144, offset aB@nKjb@b@pic, ds ; "　再開　　終了"
		call	graph_putsa_fx c, 256, large ( 7h shl 16) or 144, offset aBB@b@b@b@b@b@, ds ;	"●　　　　　　"
		push	28h ; '('
		call	sub_C8C7
		pop	cx
		mov	byte_34A4B, 0
		mov	byte_34A4E, 0
		mov	byte_34A52, 0
		jmp	loc_CA30
; ---------------------------------------------------------------------------

loc_C9A2:
		push	0
		call	sub_B502
		pop	cx
		cmp	_player_is_hit, 1
		jz	loc_CB91
		cmp	byte_34A4B, 2
		jnz	short loc_C9E6
		push	100010h
		push	900140h
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		call	graph_putsa_fx c, 256, large ( 7h shl 16) or 144, offset aB, ds	; "●"
		mov	[bp+var_1], 0

loc_C9E6:
		cmp	byte_34A4B, 1
		jnz	short loc_CA1A
		push	100010h
		push	900100h
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		call	graph_putsa_fx c, 320, large ( 7h shl 16) or 144, offset aB, ds	; "●"
		mov	[bp+var_1], 1

loc_CA1A:
		cmp	byte_34A4E, 0
		jnz	short loc_CA39
		cmp	byte_34A52, 0
		jnz	short loc_CA39
		push	1
		call	_frame_delay
		pop	cx

loc_CA30:
		cmp	byte_34A51, 0
		jnz	loc_C9A2

loc_CA39:
		push	100050h
		push	800114h
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		push	100070h
		push	900100h
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		push	14h
		call	_frame_delay
		pop	cx
		mov	byte_34A4B, 0
		mov	byte_34A4E, 0
		mov	byte_34A52, 0
		cmp	[bp+var_1], 0
		jz	loc_CB96
		cmp	byte_34A51, 0
		jz	loc_CB96
		call	graph_putsa_fx c, 224, large (37h shl 16) or 128, offset aCUcvPicVVVsvdv, ds ; "本当に終了しちゃうの？"
		call	graph_putsa_fx c, 224, large (37h shl 16) or 144, offset aB@vdvVVVgb@b@v, ds ; "　うそですぅ　　はいっ"
		call	graph_putsa_fx c, 224, large ( 7h shl 16) or 144, offset aB, ds	; "●"
		mov	[bp+var_1], 0
		jmp	loc_CB5D
; ---------------------------------------------------------------------------

loc_CACF:
		push	0
		call	sub_B502
		pop	cx
		cmp	_player_is_hit, 1
		jz	loc_CB91
		cmp	byte_34A4B, 2
		jnz	short loc_CB13
		push	100010h
		push	900150h
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		call	graph_putsa_fx c, 224, large ( 7h shl 16) or 144, offset aB, ds	; "●"
		mov	[bp+var_1], 0

loc_CB13:
		cmp	byte_34A4B, 1
		jnz	short loc_CB47
		push	100010h
		push	9000E0h
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		call	graph_putsa_fx c, 336, large ( 7h shl 16) or 144, offset aB, ds	; "●"
		mov	[bp+var_1], 1

loc_CB47:
		cmp	byte_34A4E, 0
		jnz	short loc_CB66
		cmp	byte_34A52, 0
		jnz	short loc_CB66
		push	1
		call	_frame_delay
		pop	cx

loc_CB5D:
		cmp	byte_34A51, 0
		jnz	loc_CACF

loc_CB66:
		cmp	[bp+var_1], 0
		jz	short loc_CB96
		les	bx, _resident
		inc	es:[bx+reiidenconfig_t.continues_total]
		inc	_continues_total
		mov	ax, es:[bx+reiidenconfig_t.stage]
		mov	bx, 5
		xor	dx, dx
		div	bx
		add	ax, ax
		mov	bx, word ptr _resident
		add	bx, ax
		inc	es:[bx+reiidenconfig_t.continues_per_scene]

loc_CB91:
		mov	ax, 1
		leave
		retf
; ---------------------------------------------------------------------------

loc_CB96:
		push	ds
		push	offset unk_39B8C
		call	sub_EB10
		add	sp, 4
		call	sub_B87C
		push	2000B0h
		push	8000E8h
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		xor	ax, ax
		leave
		retf
sub_C942	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_CBBE	proc far

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		mov	dx, [bp+arg_0]
		les	bx, _resident
		cmp	es:[bx+reiidenconfig_t.bullet_speed], dx
		jle	short loc_CBD4
		mov	es:[bx+reiidenconfig_t.bullet_speed], dx
		jmp	short loc_CBDF
; ---------------------------------------------------------------------------

loc_CBD4:
		les	bx, _resident
		mov	ax, [bp+arg_2]
		add	es:[bx+reiidenconfig_t.bullet_speed], ax

loc_CBDF:
		les	bx, _resident
		cmp	es:[bx+reiidenconfig_t.bullet_speed], -15
		jge	short loc_CBF0
		mov	es:[bx+reiidenconfig_t.bullet_speed], -15

loc_CBF0:
		pop	bp
		retf
sub_CBBE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_CBF2	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		les	bx, _resident
		mov	ax, [bp+arg_0]
		add	es:[bx+reiidenconfig_t.bullet_speed], ax
		cmp	es:[bx+reiidenconfig_t.bullet_speed], 20
		jle	short loc_CC0D
		mov	es:[bx+reiidenconfig_t.bullet_speed], 20

loc_CC0D:
		pop	bp
		retf
sub_CBF2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_CC0F	proc far
		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	di, di
		push	1
		call	_graph_accesspage_func
		pop	cx
		call	sub_EC80
		call	graph_putsa_fx c, 0, (227h shl 16) or 0, offset aVgvpvovfvivovx, ds ; "ｃｏｎｔｉｎｕｅ？　　　  "
		call	graph_putsa_fx c, 0, (227h shl 16) or 16, offset aVxvevub@b@B@, ds ; "Ｙｅｓ　　  　"
		call	graph_putsa_fx c, 0, (227h shl 16) or 32, offset aVmvpb@b@B@, ds ; "Ｎｏ　　	　 "
		call	graph_putsa_fx c, 0, (221h shl 16) or 48, offset aVxvevub@b@c@, ds ; "Ｙｅｓ　　　  "
		call	graph_putsa_fx c, 0, (221h shl 16) or 64, offset aVmvpb@b@c@, ds ; "Ｎｏ　　　   "
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	100090h
		pushd	0
		push	4000A0h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch
		push	100030h
		push	100000h
		push	0C80120h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch
		push	100030h
		push	400000h
		push	0E80120h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch
		mov	si, 1
		mov	byte_34A52, 0
		mov	byte_34A51, 0
		mov	byte_34A4E, 0
		call	sub_B87C
		les	bx, _resident
		inc	es:[bx+reiidenconfig_t.continues_total]
		inc	_continues_total
		mov	ax, es:[bx+reiidenconfig_t.stage]
		mov	bx, 5
		xor	dx, dx
		div	bx
		add	ax, ax
		mov	bx, word ptr _resident
		add	bx, ax
		inc	es:[bx+reiidenconfig_t.continues_per_scene]
		mov	bx, word ptr _resident
		mov	eax, es:[bx+reiidenconfig_t.score_highest]
		cmp	eax, _score
		jnb	short loc_CD2E
		mov	eax, _score
		mov	es:[bx+reiidenconfig_t.score_highest], eax

loc_CD2E:
		les	bx, _resident
		mov	es:[bx+reiidenconfig_t.score], 0
		mov	al, es:[bx+reiidenconfig_t.start_lives_extra]
		add	al, 2
		mov	es:[bx+reiidenconfig_t.rem_lives], al
		push	0FFFBFFFEh
		call	sub_CBBE
		add	sp, 4

loc_CD52:
		push	0
		call	sub_B502
		pop	cx
		inc	di
		push	1
		call	_frame_delay
		pop	cx
		cmp	byte_34A52, 1
		jz	short loc_CD70
		cmp	byte_34A4E, 1
		jnz	short loc_CDBC

loc_CD70:
		cmp	si, 1
		jnz	short loc_CDA2
		les	bx, _resident
		mov	es:[bx+reiidenconfig_t.snd_need_init], 0
		call	game_switch_binary
		les	bx, _resident
		mov	es:[bx+reiidenconfig_t.p_value], 0
		pushd	0
		push	ds
		push	offset path	; "REIIDEN"
		push	ds
		push	offset path	; "REIIDEN"
		call	_execl
		add	sp, 0Ch
		jmp	short loc_CDBC
; ---------------------------------------------------------------------------

loc_CDA2:
		mov	_player_is_hit, 0
		mov	byte_34A51, 0
		mov	_continues_total, 0
		call	_mdrv2_bgm_stop
		jmp	short loc_CDD3
; ---------------------------------------------------------------------------

loc_CDBC:
		cmp	di, 0BB8h
		ja	short loc_CDA2
		cmp	byte_34A51, 1
		jnz	short loc_CDD8
		mov	_player_is_hit, 0
		mov	byte_34A51, 0

loc_CDD3:
		xor	ax, ax
		jmp	loc_CE58
; ---------------------------------------------------------------------------

loc_CDD8:
		cmp	byte_34A54, 1
		jnz	short loc_CE16
		mov	si, 1
		push	100030h
		push	100000h
		push	0C80120h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch
		push	100030h
		push	400000h
		push	0E80120h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch

loc_CE16:
		cmp	byte_34A55, 1
		jnz	loc_CD52
		xor	si, si
		push	100030h
		push	300000h
		push	0C80120h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch
		push	100030h
		push	200000h
		push	0E80120h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch
		jmp	loc_CD52
; ---------------------------------------------------------------------------

loc_CE58:
		pop	di
		pop	si
		pop	bp
		retf
sub_CC0F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_CE5C	proc far

var_1E		= byte ptr -1Eh
var_14		= byte ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_4		= word ptr -4
var_2		= word ptr -2

		enter	1Eh, 0
		push	si
		push	di
		lea	ax, [bp+var_1E]
		push	ss
		push	ax
		push	ds
		push	(offset	word_34AD4+1)
		mov	cx, 0Ah
		call	SCOPY@
		call	sub_17EB8
		call	sub_1843D
		push	3
		push	word_36C2A
		push	word_36C28
		call	sub_197E1
		add	sp, 6
		call	IRand
		mov	bx, 8
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_CEA3
		mov	ax, 1
		jmp	short loc_CEA5
; ---------------------------------------------------------------------------

loc_CEA3:
		xor	ax, ax

loc_CEA5:
		add	ax, 56h	; 'V'
		push	ax
		push	170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		xor	di, di
		jmp	short loc_CEDA
; ---------------------------------------------------------------------------

loc_CEBC:
		mov	bx, di
		add	bx, bx
		lea	ax, [bp+var_A]
		add	bx, ax
		mov	ax, x_36C26
		mov	ss:[bx], ax
		mov	bx, di
		add	bx, bx
		lea	ax, [bp+var_14]
		add	bx, ax
		mov	word ptr ss:[bx], 170h
		inc	di

loc_CEDA:
		cmp	di, 5
		jl	short loc_CEBC
		call	sub_EC80
		xor	di, di
		jmp	loc_D00D
; ---------------------------------------------------------------------------

loc_CEE9:
		mov	ax, di
		mov	bx, 2
		cwd
		idiv	bx
		shl	dx, 3
		mov	ax, 190h
		sub	ax, dx
		push	ax
		call	sub_11738
		pop	cx
		xor	si, si
		jmp	short loc_CF31
; ---------------------------------------------------------------------------

loc_CF04:
		mov	bx, di
		add	bx, bx
		lea	ax, [bp+var_1E]
		add	bx, ax
		cmp	word ptr ss:[bx], 0
		jnz	short loc_CF30
		push	200020h
		push	170h
		mov	bx, si
		add	bx, bx
		lea	ax, [bp+var_A]
		add	bx, ax
		push	word ptr ss:[bx]
		call	_egc_copy_rect_1_to_0
		add	sp, 8

loc_CF30:
		inc	si

loc_CF31:
		cmp	si, 5
		jl	short loc_CF04
		sub	[bp+var_A], 8
		pushd	2
		call	isqrt
		push	ax
		mov	ax, 8
		cwd
		pop	bx
		idiv	bx
		sub	[bp+var_8], ax
		pushd	2
		call	isqrt
		push	ax
		mov	ax, 8
		cwd
		pop	bx
		idiv	bx
		add	[bp+var_4], ax
		add	[bp+var_2], 8
		pushd	2
		call	isqrt
		push	ax
		mov	ax, 8
		cwd
		pop	bx
		idiv	bx
		sub	[bp+var_12], ax
		pushd	2
		call	isqrt
		push	ax
		mov	ax, 8
		cwd
		pop	bx
		idiv	bx
		sub	[bp+var_E], ax
		sub	[bp+var_10], 8
		xor	si, si
		jmp	short loc_CFF8
; ---------------------------------------------------------------------------

loc_CF92:
		mov	bx, si
		add	bx, bx
		lea	ax, [bp+var_A]
		add	bx, ax
		cmp	word ptr ss:[bx], 260h
		jge	short loc_CFAE
		mov	bx, si
		add	bx, bx
		add	bx, ax
		cmp	word ptr ss:[bx], 0
		jge	short loc_CFBC

loc_CFAE:
		mov	bx, si
		add	bx, bx
		lea	ax, [bp+var_1E]
		add	bx, ax
		mov	word ptr ss:[bx], 1

loc_CFBC:
		mov	bx, si
		add	bx, bx
		lea	ax, [bp+var_1E]
		add	bx, ax
		cmp	word ptr ss:[bx], 0
		jnz	short loc_CFF7
		mov	ax, di
		mov	bx, 2
		cwd
		idiv	bx
		add	dx, 54h	; 'T'
		push	dx
		mov	bx, si
		add	bx, bx
		lea	ax, [bp+var_14]
		add	bx, ax
		push	word ptr ss:[bx]
		mov	bx, si
		add	bx, bx
		lea	ax, [bp+var_A]
		add	bx, ax
		push	word ptr ss:[bx]
		call	sub_197E1
		add	sp, 6

loc_CFF7:
		inc	si

loc_CFF8:
		cmp	si, 5
		jl	short loc_CF92
		mov	ax, di
		mov	bx, 6
		cwd
		idiv	bx
		push	ax
		call	_frame_delay
		pop	cx
		inc	di

loc_D00D:
		cmp	di, 10h
		jl	loc_CEE9
		push	0
		call	sub_11738
		pop	cx
		mov	al, byte_36C14
		mov	_bombs, al
		les	bx, _resident
		mov	es:[bx+reiidenconfig_t.bombs], 1
		pop	di
		pop	si
		leave
		retf
sub_CE5C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D02F	proc far
		push	bp
		mov	bp, sp
		movsx	eax, word_34A8A
		imul	eax, 61A80h
		cmp	eax, _score
		ja	short loc_D07A
		cmp	_rem_lives, 6
		jge	short loc_D076
		inc	_rem_lives
		les	bx, _resident
		mov	al, byte ptr _rem_lives
		mov	es:[bx+reiidenconfig_t.rem_lives], al
		mov	ax, _rem_lives
		dec	ax
		push	ax
		call	sub_18E15
		pop	cx
		push	0Fh
		call	_mdrv2_se_play
		pop	cx
		push	1
		call	sub_CBF2
		pop	cx

loc_D076:
		inc	word_34A8A

loc_D07A:
		pop	bp
		retf
sub_D02F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

sub_D07C	proc near
		push	bp
		mov	bp, sp
		push	ds
		push	offset aVvvtbV	; "いやーん、ヒープがたんないわ"
		call	_puts
		add	sp, 4
		push	1		; status
		call	_exit
sub_D07C	endp

; ---------------------------------------------------------------------------
		pop	cx
		pop	bp
		retf

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __stdcall	__far sub_D095(void far	*node, __int32)
sub_D095	proc far

_node		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		push	bp
		mov	bp, sp
		pushd	[bp+arg_4]
		push	ds
		push	offset aS	; "%s"
		call	_printf
		add	sp, 8
		pushd	[bp+_node]
		push	ds
		push	offset aFp	; " : [%Fp] -> "
		call	_printf
		add	sp, 8
		pushd	[bp+_node]	; node
		call	_farheapchecknode
		add	sp, 4
		sub	ax, 0FFFEh
		mov	bx, ax
		cmp	bx, 6
		ja	short loc_D0F9
		add	bx, bx
		jmp	cs:off_D0FD[bx]

loc_D0D5:
		push	ds
		push	offset aGqbGvvkvVViv ; "ヒープがみつかんないよぅ"
		jmp	short loc_D0F1
; ---------------------------------------------------------------------------

loc_D0DB:
		push	ds
		push	offset aGqbGvvkfji ; "ヒープが破壊されてるわぁ"
		jmp	short loc_D0F1
; ---------------------------------------------------------------------------

loc_D0E1:
		push	ds
		push	offset aGmbGhvkvVViv ; "ノードがみつかんないの"
		jmp	short loc_D0F1
; ---------------------------------------------------------------------------

loc_D0E7:
		push	ds
		push	offset aVVVL	; "ここは空きブロックですわ"
		jmp	short loc_D0F1
; ---------------------------------------------------------------------------

loc_D0ED:
		push	ds
		push	offset s	; "現在使用中のブロックよ"

loc_D0F1:
		call	_puts
		add	sp, 4

loc_D0F9:
		pop	bp
		retf	8
sub_D095	endp

; ---------------------------------------------------------------------------
off_D0FD	dw offset loc_D0E1
		dw offset loc_D0DB
		dw offset loc_D0F9
		dw offset loc_D0D5
		dw offset loc_D0F9
		dw offset loc_D0E7
		dw offset loc_D0ED

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D10B	proc far

var_4		= dword	ptr -4

		enter	4, 0
		push	si
		mov	[bp+var_4], 0

loc_D118:
		mov	[bp+var_4], 0
		cmp	_mode_test, 1
		jnz	loc_D317
		call	sub_EA17
		push	ds
		push	offset format	; "\x1B*"
		call	_printf
		add	sp, 4
		push	ds
		push	offset aB@b@b@vVVriCVi ; "　　　これも運命か...\n"
		call	_puts
		add	sp, 4
		pushd	[dword_36C1A]
		push	ds
		push	offset aOldCoreleft7lu ; "old coreleft %7lu bytes free\n"
		call	_printf
		add	sp, 8
		call	_coreleft
		push	dx
		push	ax
		push	ds
		push	offset aCoreleft7luByt ; "    coreleft %7lu bytes free\n"
		call	_printf
		add	sp, 8
		push	word_39EAA
		push	ds
		push	offset aKabe_nD	; "    kabe_n =	%d\n"
		call	_printf
		add	sp, 6
		push	word_39E90
		push	ds
		push	offset aPnl_nD	; "    pnl_n  =	%d\n"
		call	_printf
		add	sp, 6
		movsx	eax, word_39E90
		imul	eax, 281h
		push	eax
		push	ds
		push	offset aPnl_nBuf7lu ; "	pnl_n buf = %7lu\n"
		call	_printf
		add	sp, 8
		xor	si, si
		jmp	short loc_D1E3
; ---------------------------------------------------------------------------

loc_D1A9:
		mov	al, [si+735h]
		cbw
		cwde
		imul	eax, 281h
		push	eax
		push	si
		push	ds
		push	offset aB@b@ptnD7lu ; "　　ptn %d  = %7lu\n"
		call	_printf
		add	sp, 0Ah
		cmp	si, 2
		jl	short loc_D1E2
		cmp	si, 5
		jz	short loc_D1E2
		mov	al, [si+735h]
		cbw
		cwde
		imul	eax, 281h
		add	[bp+var_4], eax

loc_D1E2:
		inc	si

loc_D1E3:
		cmp	si, 8
		jl	short loc_D1A9
		push	ds
		push	(offset	aB@b@b@vVVriCVi+15h) ; s
		call	_puts
		add	sp, 4
		pushd	[bp+var_4]
		push	ds
		push	offset aAllPtn7lu ; "all   ptn	 = %7lu\n"
		call	_printf
		add	sp, 8
		pushd	[dword_39E80]
		push	ds
		push	offset aKabeMem7lu ; "kabe  mem	  = %7lu\n"
		call	_printf
		add	sp, 8
		push	word_39DA2
		push	ds
		push	offset aMaskMem7u ; "mask  mem	 = %7u\n"
		call	_printf
		add	sp, 6
		mov	eax, dword_36C1A
		sub	eax, [bp+var_4]
		push	eax
		push	ds
		push	offset aOldPtn7lu ; "old - ptn	 = %7lu\n"
		call	_printf
		add	sp, 8
		call	_coreleft
		push	dx
		push	ax
		pop	eax
		mov	edx, dword_36C1A
		sub	edx, eax
		sub	edx, dword_39E80
		push	edx
		push	ds
		push	offset aEtcMem7ld ; "etc   mem	 = %7ld\n\n"
		call	_printf
		add	sp, 8
		push	ds
		push	offset aZPtnFreeXBossF ; "Z = PTN FREE,	X = BOSS FREE, UP = TAMA "...
		call	_puts
		add	sp, 4
		jmp	loc_D317
; ---------------------------------------------------------------------------

loc_D26E:
		push	3
		call	_frame_delay
		pop	cx
		push	0
		call	sub_B502
		pop	cx
		cmp	byte_34A4E, 0
		jz	short loc_D28B
		nopcall	sub_D47D
		jmp	short loc_D2B8
; ---------------------------------------------------------------------------

loc_D28B:
		cmp	byte_34A53, 0
		jz	short loc_D2A5
		xor	si, si
		jmp	short loc_D29E
; ---------------------------------------------------------------------------

loc_D296:
		push	si
		call	sub_169CB
		pop	cx
		inc	si

loc_D29E:
		cmp	si, 4
		jl	short loc_D296
		jmp	short loc_D2B8
; ---------------------------------------------------------------------------

loc_D2A5:
		cmp	byte_34A54, 0
		jz	short loc_D2C7
		push	ds
		push	offset unk_37635
		call	sub_30DEE
		add	sp, 4

loc_D2B8:
		push	ds
		push	offset format	; "\x1B*"
		call	_printf
		add	sp, 4
		jmp	loc_D118
; ---------------------------------------------------------------------------

loc_D2C7:
		cmp	byte_34A55, 0
		jnz	short loc_D2B8
		cmp	byte_34A52, 0
		jz	short loc_D317
		push	ds
		push	offset format	; "\x1B*"
		call	_printf
		add	sp, 4
		xor	si, si
		jmp	short loc_D2F8
; ---------------------------------------------------------------------------

loc_D2E5:
		push	ds
		push	offset aPtn	; "PTN "
		mov	bx, si
		shl	bx, 2
		pushd	dword ptr [bx+4018h] ; node
		call	sub_D095
		inc	si

loc_D2F8:
		cmp	si, 8
		jl	short loc_D2E5
		push	ds
		push	offset aMask	; "MASK"
		pushd	[node]	; node
		call	sub_D095
		push	ds
		push	offset aKabe	; "KABE"
		pushd	[off_39E7C] ; node
		call	sub_D095

loc_D317:
		cmp	byte_34A4D, 0
		jz	loc_D26E
		pop	si
		leave
		retf
sub_D10B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D323	proc far
		push	bp
		mov	bp, sp
		cmp	_mode_test, 1
		jnz	short loc_D33E
		call	sub_E9FC
		push	ds
		push	offset format	; "\x1B*"
		call	_printf
		add	sp, 4

loc_D33E:
		pop	bp
		retf
sub_D323	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D340	proc far
		push	bp
		mov	bp, sp
		inc	dword_3880A
		mov	eax, dword_3880A
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		cmp	edx, 64h ; 'd'
		jnz	short loc_D37C
		push	ds
		push	offset a30h	; "\x1B[3;0H"
		call	_printf
		add	sp, 4
		call	_coreleft
		push	dx
		push	ax
		push	ds
		push	offset aCoreleft7luByt ; "    coreleft %7lu bytes free\n"
		call	_printf
		add	sp, 8

loc_D37C:
		push	ds
		push	offset a360h	; "\x1B[3;60H"
		call	_printf
		add	sp, 4
		push	ds
		push	offset aHeapCheak ; "HEAP Cheak	 "
		call	_printf
		add	sp, 4
		call	_farheapcheck
		cmp	ax, 0FFFFh
		jz	short loc_D3BE
		cmp	ax, 1
		jz	short loc_D3AA
		cmp	ax, 2
		jz	short loc_D3B0
		jmp	short loc_D3E1
; ---------------------------------------------------------------------------

loc_D3AA:
		push	ds
		push	offset aEmpty	; "EMPTY   "
		jmp	short loc_D3B4
; ---------------------------------------------------------------------------

loc_D3B0:
		push	ds
		push	offset aOk	; "OK	   "

loc_D3B4:
		call	_printf
		add	sp, 4
		jmp	short loc_D3E1
; ---------------------------------------------------------------------------

loc_D3BE:
		push	ds
		push	offset aCorrupt	; "CORRUPT "
		call	_printf
		add	sp, 4
		push	5
		call	_mdrv2_se_play
		jmp	short loc_D3D9
; ---------------------------------------------------------------------------

loc_D3D3:
		push	0
		call	sub_B502

loc_D3D9:
		pop	cx
		cmp	byte_34A52, 0
		jz	short loc_D3D3

loc_D3E1:
		call	_farheapcheck
		mov	word_3880E, ax
		push	ds
		push	offset a20h	; "\x1B[2;0H"
		call	_printf
		add	sp, 4
		mov	ax, word_38810
		cmp	ax, x_36C26
		jz	short loc_D414
		push	x_36C26
		push	ds
		push	offset aGx3d	; "gx =	%3d"
		call	_printf
		add	sp, 6
		mov	ax, x_36C26
		mov	word_38810, ax

loc_D414:
		push	ds
		push	offset a40h	; "\x1B[4;0H"
		call	_printf
		add	sp, 4
		mov	al, _player_is_hit
		mov	ah, 0
		push	ax
		mov	al, byte_34A51
		mov	ah, 0
		push	ax
		mov	al, byte_34A53
		mov	ah, 0
		push	ax
		mov	al, byte_34A4E
		mov	ah, 0
		push	ax
		mov	al, byte_34A4B
		mov	ah, 0
		push	ax
		call	_kbhit
		push	ax
		push	ds
		push	offset aKbhitDDirDSpDS ; " kbhit:%d,dir:%d, sp:%d, sh:%d, exit:%d"...
		call	_printf
		add	sp, 10h
		push	ds
		push	offset a50h	; "\x1B[5;0H"
		call	_printf
		add	sp, 4
		pushd	[dword_36C20]
		push	word_34A6E
		pushd	[_rand]
		pushd	[dword_34A62]
		push	ds
		push	offset aMain7luRand7lu ; " main:%7lu, rand:%7lu, bomb:%d, timer:%"...
		call	_printf
		add	sp, 12h
		pop	bp
		retf
sub_D340	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D47D	proc far
		push	bp
		mov	bp, sp
		call	sub_20468
		pop	bp
		retf
sub_D47D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D487	proc far
		push	bp
		mov	bp, sp
		push	si
		call	sub_20468
		mov	si, 2
		jmp	short loc_D4A9
; ---------------------------------------------------------------------------

loc_D495:
		push	si
		call	sub_108AB
		pop	cx
		cmp	si, 4
		jge	short loc_D4A8
		push	si
		call	sub_169CB
		pop	cx

loc_D4A8:
		inc	si

loc_D4A9:
		cmp	si, 8
		jl	short loc_D495
		pop	si
		pop	bp
		retf
sub_D487	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D4B1	proc far
		push	bp
		mov	bp, sp
		push	ds
		push	offset aGogbgGtg@gcglv ; "バッチファイルから起動してよ"
		call	_printf
		add	sp, 4
		pop	bp
		retf
sub_D4B1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D4C2	proc far
		push	bp
		mov	bp, sp
		movzx	eax, word_360CD
		add	_score, eax
		call	sub_1889C
		mov	word_360CD, 0
		pop	bp
		retf
sub_D4C2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_D4DD	proc far
		push	bp
		mov	bp, sp
		mov	al, byte_34ADF
		cbw
		dec	ax
		mov	bx, ax
		cmp	bx, 6
		ja	short loc_D522
		add	bx, bx
		jmp	cs:off_D524[bx]

loc_D4F3:
		call	sub_227AB
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_D4FA:
		call	sub_1B579
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_D501:
		call	sub_1E81D
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_D508:
		call	sub_235E0
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_D50F:
		call	sub_250BC
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_D516:
		call	sub_28908
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_D51D:
		call	sub_2D241

loc_D522:
		pop	bp
		retf
sub_D4DD	endp

; ---------------------------------------------------------------------------
off_D524	dw offset loc_D4F3
		dw offset loc_D4FA
		dw offset loc_D501
		dw offset loc_D508
		dw offset loc_D50F
		dw offset loc_D516
		dw offset loc_D51D

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl main(int argc, const char	**argv,	const char **envp)
public _main
_main		proc far

_path		= byte ptr -1Eh
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
s1		= dword	ptr -0Ah
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
_argc		= word ptr  6
_argv		= dword	ptr  8
_envp		= dword	ptr  0Ch

		enter	1Eh, 0
		push	si
		push	di
		mov	[bp+var_2], 0
		xor	si, si
		mov	[bp+var_4], 0
		call	_mdrv2_resident
		or	ax, ax
		jnz	short loc_D54F
		jmp	short loc_D579
; ---------------------------------------------------------------------------

loc_D54F:
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	ds
		push	offset _continues_total
		push	ds
		push	offset _rand
		push	ds
		push	offset unk_34A33
		push	ds
		push	offset byte_36C14
		push	ds
		push	offset byte_34A31
		push	ds
		push	offset _rank
		call	_resident_stuff_get
		add	sp, 1Ch
		cmp	ax, 1
		jnz	short loc_D583

loc_D579:
		call	sub_D4B1
		mov	ax, 1
		jmp	loc_E2F7
; ---------------------------------------------------------------------------

loc_D583:
		mov	byte_36C14, 1
		les	bx, _resident
		mov	eax, es:[bx+reiidenconfig_t.score]
		mov	_score, eax
		mov	ebx, 61A80h
		cdq
		idiv	ebx
		inc	ax
		mov	word_34A8A, ax
		mov	eax, _rand
		mov	random_seed, eax
		call	game_init
		call	key_start
		push	3F003Fh
		call	__control87
		add	sp, 4
		les	bx, _resident
		mov	al, es:[bx+reiidenconfig_t.route]
		mov	_route, al
		cmp	es:[bx+reiidenconfig_t.mode], 0
		jz	loc_D68E
		cmp	es:[bx+reiidenconfig_t.stage], 0
		jnz	short loc_D649
		push	ds
		push	offset aCGzgmgngg ; "面セレクト\n"
		call	_puts
		add	sp, 4
		push	ds
		push	offset aCRf	; "面数"
		call	_puts
		add	sp, 4
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	ds
		push	offset aD	; "%d"
		call	_scanf
		add	sp, 8
		push	ds
		push	offset aSelect_flag ; "select_flag"
		call	_puts
		add	sp, 4
		push	ds
		push	offset _route
		push	ds
		push	offset aD	; "%d"
		call	_scanf
		add	sp, 8
		cmp	[bp+var_2], 5
		jge	short loc_D62C
		jmp	short loc_D644
; ---------------------------------------------------------------------------

loc_D62C:
		mov	al, _route
		cbw
		cmp	ax, 1
		jle	short loc_D63C
		mov	_route, 1
		jmp	short loc_D649
; ---------------------------------------------------------------------------

loc_D63C:
		mov	al, _route
		cbw
		or	ax, ax
		jge	short loc_D649

loc_D644:
		mov	_route, 0

loc_D649:
		les	bx, _resident
		mov	al, es:[bx+reiidenconfig_t.mode]
		cbw
		cmp	ax, 1
		jnz	short loc_D669
		push	ds
		push	offset aGegxgggvbGhbib ; "テストモード！！\n"
		call	_puts
		add	sp, 4
		mov	_mode_test, 1

loc_D669:
		les	bx, _resident
		mov	al, es:[bx+reiidenconfig_t.mode]
		cbw
		cmp	ax, 3
		jnz	short loc_D68E
		push	ds
		push	offset aGfgogbgogvbGhb ; "デバッグモード！！\n"
		call	_puts
		add	sp, 4
		mov	_mode_debug, 1
		mov	_mode_test, 1

loc_D68E:
		mov	al, byte_34A31
		cbw
		cmp	ax, 1
		jnz	short loc_D69C
		call	_mdrv2_check_board

loc_D69C:
		cmp	[bp+var_2], 5
		jge	short loc_D6A6
		xor	ax, ax
		jmp	short loc_D6EE
; ---------------------------------------------------------------------------

loc_D6A6:
		cmp	[bp+var_2], 0Ah
		jge	short loc_D6BD
		cmp	_route, 0
		jnz	short loc_D6B8
		mov	ax, 1
		jmp	short loc_D6EE
; ---------------------------------------------------------------------------

loc_D6B8:
		mov	ax, 2
		jmp	short loc_D6EE
; ---------------------------------------------------------------------------

loc_D6BD:
		cmp	[bp+var_2], 0Fh
		jge	short loc_D6D4
		cmp	_route, 0
		jnz	short loc_D6CF
		mov	ax, 3
		jmp	short loc_D6EE
; ---------------------------------------------------------------------------

loc_D6CF:
		mov	ax, 4
		jmp	short loc_D6EE
; ---------------------------------------------------------------------------

loc_D6D4:
		cmp	[bp+var_2], 14h
		jge	short loc_D6EB
		cmp	_route, 0
		jnz	short loc_D6E6
		mov	ax, 5
		jmp	short loc_D6E9
; ---------------------------------------------------------------------------

loc_D6E6:
		mov	ax, 6

loc_D6E9:
		jmp	short loc_D6EE
; ---------------------------------------------------------------------------

loc_D6EB:
		mov	ax, 7

loc_D6EE:
		mov	[bp+var_6], ax
		push	seg main_01_TEXT
		push	offset sub_D07C
		call	@set_new_handler$qnqv$v	; set_new_handler(void (*)(void))
		add	sp, 4
		mov	_arc_key, 76h
		push	ds
		push	offset aUmx	; "東方靈異.伝"
		call	@arc_open$qnxc
		call	vram_planes_set
		push	[bp+var_6]
		call	sub_20754
		pop	cx
		cmp	_mode_debug, 1
		jnz	short loc_D72E
		call	sub_D340
		push	28h ; '('
		call	_frame_delay
		pop	cx

loc_D72E:
		call	sub_D487
		les	bx, _resident
		mov	al, es:[bx+reiidenconfig_t.rem_lives]
		cbw
		mov	_rem_lives, ax
		mov	al, es:[bx+reiidenconfig_t.bombs]
		mov	_bombs, al
		mov	x_36C26, 304
		cmp	byte_34A31, 0
		jz	short loc_D776
		cmp	es:[bx+reiidenconfig_t.snd_need_init], 0
		jz	short loc_D776
		push	ds
		push	offset aInit_mdt ; "init.mdt"
		call	_mdrv2_bgm_load
		add	sp, 4
		call	_mdrv2_bgm_play
		push	ds
		push	offset aZigoku_mde ; "zigoku.mde"
		call	_mdrv2_se_load
		add	sp, 4

loc_D776:
		cmp	_mode_debug, 1
		jnz	short loc_D795
		push	ds
		push	offset a2	; "2 :"
		call	_puts
		add	sp, 4
		call	sub_D340
		push	28h ; '('
		call	_frame_delay
		pop	cx

loc_D795:
		call	_coreleft
		mov	word ptr dword_36C1A+2,	dx
		mov	word ptr dword_36C1A, ax
		call	sub_BC87
		call	sub_E92B
		push	0
		call	_graph_accesspage_func
		pop	cx
		call	sub_EC0D
		call	IRand
		mov	bx, 3Ch	; '<'
		cwd
		idiv	bx
		mov	byte_35BEE, dl
		mov	byte_34A49, 1
		mov	byte_36C1E, 1
		les	bx, _resident
		cmp	es:[bx+reiidenconfig_t.snd_need_init], 0
		jnz	short loc_D7E0
		mov	ax, 1
		jmp	short loc_D7E2
; ---------------------------------------------------------------------------

loc_D7E0:
		xor	ax, ax

loc_D7E2:
		mov	si, ax

loc_D7E4:
		les	bx, _resident
		mov	ax, [bp+var_2]
		mov	es:[bx+reiidenconfig_t.stage], ax
		mov	al, _route
		mov	es:[bx+reiidenconfig_t.route], al
		mov	eax, _score
		mov	es:[bx+reiidenconfig_t.score], eax
		mov	eax, _continues_total
		mov	es:[bx+reiidenconfig_t.continues_total], eax
		push	ds
		push	offset unk_37635
		call	sub_30DEE
		add	sp, 4
		push	ds
		push	offset unk_386B8
		call	sub_2FCAD
		add	sp, 4
		mov	word ptr [bp+s1+2], ds
		mov	word ptr [bp+s1], 1250h
		mov	byte_34ADF, 0
		mov	word_360CA, 0
		mov	word_34A78, 0
		mov	_player_invincibility_time, 0
		mov	ax, [bp+var_2]
		mov	[bp+var_E], ax
		mov	cx, 4		; switch 4 cases
		mov	bx, offset word_E309

loc_D84B:
		mov	ax, cs:[bx]
		cmp	ax, [bp+var_E]
		jz	short loc_D85B
		add	bx, 2
		loop	loc_D84B
		jmp	loc_D9B7	; default
; ---------------------------------------------------------------------------

loc_D85B:
		jmp	word ptr cs:[bx+8] ; switch jump

loc_D85F:
		mov	byte_34ADF, 1	; jumptable 0000D85B case 4
		mov	word_360CA, 1
		push	ds
		push	offset src	; "boss1.grp"
		pushd	[bp+s1]	; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset aPositive_mdt ; "positive.mdt"
		push	ss
		lea	ax, [bp+_path]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		xor	di, di
		call	sub_22694

loc_D892:
		mov	word_386B3, 7
		jmp	loc_D9CA
; ---------------------------------------------------------------------------

loc_D89B:
		mov	al, _route	; jumptable 0000D85B case 9
		add	al, 2
		mov	byte_34ADF, al
		mov	word_360CA, 1
		cmp	_route, 0
		jnz	short loc_D8D9
		push	ds
		push	offset aLegend_mdt ; "LEGEND.mdt"
		push	ss
		lea	ax, [bp+_path]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset aBoss2_grp ; "boss2.grp"
		pushd	[bp+s1]	; dest
		call	_strcpy
		add	sp, 8
		call	sub_1B03F
		jmp	loc_D96D
; ---------------------------------------------------------------------------

loc_D8D9:
		push	ds
		push	offset aLegend_mdt ; "LEGEND.mdt"
		push	ss
		lea	ax, [bp+_path]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset aBoss3_grp ; "boss3.grp"
		pushd	[bp+s1]	; dest
		call	_strcpy
		add	sp, 8
		call	sub_1E33A
		jmp	short loc_D96D
; ---------------------------------------------------------------------------

loc_D901:
		mov	al, 1		; jumptable 0000D85B case 14
		sub	al, _route
		add	al, 4
		mov	byte_34ADF, al
		mov	word_360CA, 1
		mov	al, _route
		cbw
		cmp	ax, 1
		jnz	short loc_D947
		push	ds
		push	offset aKami_mdt ; "kami.mdt"
		push	ss
		lea	ax, [bp+_path]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset aBoss4_grp ; "boss4.grp"
		pushd	[bp+s1]	; dest
		call	_strcpy
		add	sp, 8
		call	sub_23329

loc_D941:
		mov	di, 1
		jmp	loc_D892
; ---------------------------------------------------------------------------

loc_D947:
		push	ds
		push	offset aKami2_mdt ; "kami2.mdt"
		push	ss
		lea	ax, [bp+_path]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		push	ds
		push	offset aBoss5_grp ; "boss5.grp"
		pushd	[bp+s1]	; dest
		call	_strcpy
		add	sp, 8
		call	sub_24F41

loc_D96D:
		xor	di, di
		jmp	loc_D892
; ---------------------------------------------------------------------------

loc_D972:
		mov	al, _route	; jumptable 0000D85B case 19
		add	al, 6
		mov	byte_34ADF, al
		mov	word_360CA, 1
		cmp	_route, 0
		jnz	short loc_D99F
		push	ds
		push	offset aTensi_mdt ; "tensi.mdt"
		push	ss
		lea	ax, [bp+_path]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		call	sub_28754
		jmp	short loc_D941
; ---------------------------------------------------------------------------

loc_D99F:
		push	ds
		push	offset aAlice_mdt ; "alice.mdt"
		push	ss
		lea	ax, [bp+_path]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		call	sub_2D1FE
		jmp	short loc_D96D
; ---------------------------------------------------------------------------

loc_D9B7:
		push	ds		; default
		push	offset aSt_mdt	; "ST .MDT"
		push	ss
		lea	ax, [bp+_path]
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		xor	di, di

loc_D9CA:
		cmp	byte_34ADF, 0
		jz	short loc_DA06
		xor	si, si
		mov	byte_34A49, 1
		call	sub_17EB8
		call	sub_1843D
		cmp	byte_34AA4, 0
		jnz	short loc_DA2A
		push	0
		call	sub_108AB
		pop	cx
		push	ds
		push	offset aStg_b_ptn ; "stg_b.ptn"
		push	0
		call	sub_10888
		add	sp, 6
		mov	byte_34AA4, 1
		jmp	short loc_DA2A
; ---------------------------------------------------------------------------

loc_DA06:
		cmp	byte_34AA4, 0
		jz	short loc_DA2A
		push	0
		call	sub_108AB
		pop	cx
		push	ds
		push	offset aStg_ptn	; "stg.ptn"
		push	0
		call	sub_10888
		add	sp, 6
		mov	byte_34AA4, 0
		jmp	short $+2

loc_DA2A:
		cmp	_mode_debug, 1
		jnz	short loc_DA49
		push	ds
		push	offset a3	; "3 :"
		call	_puts
		add	sp, 4
		call	sub_D340
		push	28h ; '('
		call	_frame_delay
		pop	cx

loc_DA49:
		mov	al, byte ptr [bp+var_2]
		inc	al
		mov	byte_34A34, al
		mov	al, byte_34ADF
		cbw
		cmp	ax, 6
		jz	short loc_DA7B
		mov	al, byte_34ADF
		cbw
		cmp	ax, 7
		jz	short loc_DA7B
		push	di		; int
		pushd	[bp+s1]	; s1
		mov	ax, [bp+var_2]
		mov	bx, 5
		cwd
		idiv	bx
		push	dx		; int
		call	sub_BCFE
		add	sp, 8
		jmp	short loc_DA9E
; ---------------------------------------------------------------------------

loc_DA7B:
		mov	al, byte_34ADF
		cbw
		cmp	ax, 7
		jnz	short loc_DA8D
		push	0
		call	sub_2CEAD
		jmp	short loc_DA9D
; ---------------------------------------------------------------------------

loc_DA8D:
		mov	al, byte_34ADF
		cbw
		cmp	ax, 6
		jnz	short loc_DA9E
		push	0
		call	sub_2869E

loc_DA9D:
		pop	cx

loc_DA9E:
		mov	ax, word_34A8A
		mov	word_34A8C, ax
		call	sub_190D6
		mov	word_34A88, 0
		mov	word_34A86, 0
		mov	dword_34A62, 0
		mov	word_386B3, 7
		cmp	_mode_debug, 1
		jnz	short loc_DAD7
		call	sub_D340
		push	28h ; '('
		call	_frame_delay
		pop	cx

loc_DAD7:
		mov	dword_36C20, 0
		mov	word_36C28, 258h
		mov	word_36C2A, 118h
		mov	ax, [bp+var_2]
		mov	bx, 5
		cwd
		idiv	bx
		or	dx, dx
		jz	short loc_DB04
		mov	ax, [bp+var_2]
		cwd
		idiv	bx
		cmp	dx, 4
		jnz	short loc_DB0A

loc_DB04:
		mov	x_36C26, 304

loc_DB0A:
		fld	dbl_34FF5
		fstp	dbl_34A9C
		fwait
		mov	word_36C2C, 0
		mov	word_34A7C, 1
		mov	word_34A8E, 258h
		mov	word_34A90, 118h
		mov	byte_34A57, 0
		mov	byte_34A58, 0
		mov	word_34A84, 0

loc_DB3E:
		push	0
		call	sub_19E48
		pop	cx
		push	400170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		push	3
		push	word_36C2A
		push	word_36C28
		call	sub_197E1
		add	sp, 6
		mov	word_34A74, 0
		mov	byte_34A4B, 0
		mov	byte_34A4E, 0
		mov	byte_34A52, 0
		mov	byte_34A51, 0
		call	sub_1889C
		mov	word_34A6E, 3Ch	; '<'
		mov	word_34A70, 3Ch	; '<'
		push	1
		call	sub_20E4C
		pop	cx
		mov	al, byte_34ADF
		cbw
		cmp	ax, 6
		jz	short loc_DBCC
		mov	al, byte_34ADF
		cbw
		cmp	ax, 7
		jz	short loc_DBCC
		cmp	byte_34A35, 0
		jnz	short loc_DBCC
		or	si, si
		jnz	short loc_DBCC
		push	ss
		lea	ax, [bp+_path]
		push	ax		; path
		call	_mdrv2_bgm_load
		add	sp, 4
		call	_mdrv2_bgm_play

loc_DBCC:
		call	sub_B87C
		cmp	_player_invincibility_time, 1
		jle	short loc_DBDD
		mov	word_34A78, 1

loc_DBDD:
		cmp	byte_34ADF, 0
		jz	short loc_DC0E
		mov	al, byte_34ADF
		cbw
		cmp	ax, 1
		jz	short loc_DBF9
		cmp	ax, 3
		jz	short loc_DC00
		cmp	ax, 4
		jz	short loc_DC07
		jmp	short loc_DC3A
; ---------------------------------------------------------------------------

loc_DBF9:
		call	sub_22F4A
		jmp	short loc_DC3A
; ---------------------------------------------------------------------------

loc_DC00:
		call	sub_1FA7B
		jmp	short loc_DC3A
; ---------------------------------------------------------------------------

loc_DC07:
		mov	byte_34A53, 0
		jmp	short loc_DC3A
; ---------------------------------------------------------------------------

loc_DC0E:
		cmp	byte_36C1E, 1
		jnz	short loc_DC3A
		jmp	short loc_DC33
; ---------------------------------------------------------------------------

loc_DC17:
		push	0
		call	sub_B502
		pop	cx
		push	1
		call	sub_19E48
		pop	cx
		push	1
		call	_frame_delay
		pop	cx
		inc	dword_34A62

loc_DC33:
		cmp	byte_34A4E, 0
		jz	short loc_DC17

loc_DC3A:
		mov	byte_36C1E, 0
		mov	byte_34A4E, 0
		mov	byte_34A47, 1
		mov	eax, _rand
		mov	random_seed, eax
		mov	word_34A6E, 14h
		mov	byte_34A49, 0
		mov	[bp+var_C], 0BB8h
		jmp	loc_DE72
; ---------------------------------------------------------------------------

loc_DC64:
		inc	_rand
		mov	ax, _rem_lives
		imul	ax, 0C8h
		mov	dx, 708h
		sub	dx, ax
		mov	al, _bombs
		cbw
		imul	ax, 32h
		sub	dx, ax
		mov	[bp+var_C], dx
		movsx	ebx, [bp+var_C]
		mov	eax, _rand
		xor	edx, edx
		div	ebx
		cmp	edx, 0
		jnz	short loc_DC9D
		push	1
		call	sub_CBF2
		pop	cx

loc_DC9D:
		push	0
		call	sub_B502
		pop	cx
		cmp	_player_invincibility_time, 1
		jle	short loc_DCB7
		dec	_player_invincibility_time
		mov	word_34A78, 1
		jmp	short loc_DCCA
; ---------------------------------------------------------------------------

loc_DCB7:
		cmp	_player_invincibility_time, 1
		jnz	short loc_DCCA
		mov	word_34A78, 0
		mov	_player_invincibility_time, 0

loc_DCCA:
		push	1
		call	sub_19E48
		pop	cx
		call	sub_181AC
		call	sub_1851E
		inc	dword_36C20
		inc	word_36C2C
		inc	dword_34A62
		inc	word_34A6E
		test	byte ptr _rand, 3
		jnz	short loc_DCFA
		call	sub_1938A

loc_DCFA:
		cmp	_mode_test, 1
		jnz	short loc_DD20
		cmp	byte_34A52, 0
		jz	short loc_DD0E
		mov	word_34A72, 1

loc_DD0E:
		cmp	byte_34A55, 0
		jz	short loc_DD20
		mov	_player_is_hit, 1
		mov	_rem_lives, 0

loc_DD20:
		push	word_34A78
		call	sub_C466
		pop	cx
		mov	al, byte_34ADF
		cbw
		dec	ax
		mov	bx, ax
		cmp	bx, 6
		ja	short loc_DD6B
		add	bx, bx
		jmp	cs:off_E2FB[bx]

loc_DD3C:
		call	sub_22F4A
		jmp	short loc_DD6B
; ---------------------------------------------------------------------------

loc_DD43:
		call	sub_1BA32
		jmp	short loc_DD6B
; ---------------------------------------------------------------------------

loc_DD4A:
		call	sub_1FA7B
		jmp	short loc_DD6B
; ---------------------------------------------------------------------------

loc_DD51:
		call	sub_24722
		jmp	short loc_DD6B
; ---------------------------------------------------------------------------

loc_DD58:
		call	sub_27C39
		jmp	short loc_DD6B
; ---------------------------------------------------------------------------

loc_DD5F:
		call	sub_2C0CA
		jmp	short loc_DD6B
; ---------------------------------------------------------------------------

loc_DD66:
		call	sub_2EE7D

loc_DD6B:
		push	ds
		push	offset unk_391A0
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_391E5
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_3922A
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_3926F
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_392B4
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_392F9
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_3933E
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_39383
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_393C8
		call	sub_12347
		add	sp, 4
		push	ds
		push	offset unk_3940D
		call	sub_12347
		add	sp, 4
		push	[bp+var_2]
		call	sub_C766
		cmp	byte_34A51, 1
		jnz	short loc_DDF8
		call	sub_C942
		mov	[bp+var_4], ax

loc_DDF8:
		cmp	[bp+var_4], 1
		jz	loc_E2CB
		call	sub_D02F
		cmp	_mode_debug, 1
		jnz	short loc_DE0F
		call	sub_D340

loc_DE0F:
		mov	al, byte_35DAA
		cbw
		cmp	ax, 1
		jnz	short loc_DE67
		call	sub_D487
		les	bx, _resident
		mov	al, _route
		inc	al
		mov	es:[bx+reiidenconfig_t.end_flag], al
		mov	eax, _score
		mov	es:[bx+reiidenconfig_t.score], eax
		mov	eax, es:[bx+reiidenconfig_t.score_highest]
		cmp	eax, _score
		jnb	short loc_DE47
		mov	eax, _score
		mov	es:[bx+reiidenconfig_t.score_highest], eax

loc_DE47:
		push	78h ; 'x'
		call	_frame_delay
		pop	cx
		call	game_switch_binary
		pushd	0
		push	ds
		push	offset aFuuin	; "fuuin"
		push	ds
		push	offset aFuuin	; "fuuin"
		call	_execl
		add	sp, 0Ch

loc_DE67:
		cmp	word_360CD, 0
		jz	short loc_DE72
		call	sub_D4C2

loc_DE72:
		cmp	_player_is_hit, 0
		jz	loc_DC64
		mov	byte_34A47, 0
		push	0
		call	sub_11738
		pop	cx
		les	bx, _resident
		mov	eax, _rand
		mov	es:[bx+reiidenconfig_t.rand], eax
		mov	word_34A72, 0
		mov	dword_34A62, 0C8h ; 'ﾈ'
		cmp	_rem_lives, 0
		jle	short loc_DEDA
		cmp	word_34A82, 0
		jnz	short loc_DEDA
		push	5
		call	_mdrv2_se_play
		pop	cx
		les	bx, _resident
		dec	es:[bx+reiidenconfig_t.rem_lives]
		dec	_rem_lives
		call	sub_1AE0D
		mov	_player_is_hit, 0
		inc	si
		mov	_player_invincibility_time, MISS_INVINCIBILITY_FRAMES
		jmp	loc_DB3E
; ---------------------------------------------------------------------------

loc_DEDA:
		cmp	word_34A82, 1
		jnz	loc_E104
		mov	word_34A82, 0
		mov	_player_is_hit, 0
		cmp	byte_34ADF, 0
		jz	short loc_DF03
		call	sub_D4DD
		mov	byte_36C1E, 1
		mov	byte_34A49, 1

loc_DF03:
		inc	si
		inc	[bp+var_2]
		les	bx, _resident
		mov	ax, [bp+var_2]
		mov	es:[bx+reiidenconfig_t.stage], ax
		cmp	byte_34ADF, 0
		jz	short loc_DF23
		xor	si, si
		push	ax
		call	sub_13475
		jmp	short loc_DF2B
; ---------------------------------------------------------------------------

loc_DF23:
		push	[bp+var_2]
		call	sub_13101

loc_DF2B:
		pop	cx
		les	bx, _resident
		cmp	es:[bx+reiidenconfig_t.bullet_speed], 0
		jge	short loc_DF3D
		mov	es:[bx+reiidenconfig_t.bullet_speed], 0

loc_DF3D:
		mov	ax, [bp+var_2]
		mov	bx, 5
		cwd
		idiv	bx
		cmp	dx, 4
		jz	short loc_DF52
		cmp	byte_34ADF, 0
		jz	short loc_DF9A

loc_DF52:
		les	bx, _resident
		mov	eax, _score
		mov	es:[bx+reiidenconfig_t.score], eax
		mov	al, byte ptr _rem_lives
		mov	es:[bx+reiidenconfig_t.rem_lives], al
		mov	es:[bx+reiidenconfig_t.snd_need_init], 1
		mov	al, _route
		mov	es:[bx+reiidenconfig_t.route], al
		call	_mdrv2_bgm_fade_out_nonblock
		les	bx, _resident
		mov	al, _bombs
		mov	es:[bx+reiidenconfig_t.bombs], al
		call	game_switch_binary
		pushd	0
		push	ds
		push	offset aReiiden	; "reiiden"
		push	ds
		push	offset aReiiden	; "reiiden"
		call	_execl
		add	sp, 0Ch

loc_DF9A:
		mov	word_34A86, 0
		cmp	byte_34ADF, 0
		jnz	short loc_DFBC
		push	1
		call	_graph_accesspage_func
		pop	cx
		call	sub_203F9
		push	0
		call	_graph_accesspage_func
		pop	cx

loc_DFBC:
		call	sub_D47D
		cmp	font, 0
		jz	short loc_DFE0
		pushd	[font]	; font
		call	@$bdla$qnv
		add	sp, 4
		mov	font, 0
		jmp	short $+2

loc_DFE0:
		cmp	off_39E88, 0
		jz	short loc_E000
		pushd	[off_39E88] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E88, 0
		jmp	short $+2

loc_E000:
		cmp	off_39E8C, 0
		jz	short loc_E020
		pushd	[off_39E8C] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E8C, 0
		jmp	short $+2

loc_E020:
		cmp	off_39E92, 0
		jz	short loc_E040
		pushd	[off_39E92] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E92, 0
		jmp	short $+2

loc_E040:
		cmp	off_39E96, 0
		jz	short loc_E060
		pushd	[off_39E96] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E96, 0
		jmp	short $+2

loc_E060:
		cmp	off_39EAC, 0
		jz	short loc_E080
		pushd	[off_39EAC] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39EAC, 0
		jmp	short $+2

loc_E080:
		cmp	off_39E9A, 0
		jz	short loc_E0A0
		pushd	[off_39E9A] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E9A, 0
		jmp	short $+2

loc_E0A0:
		cmp	off_39E9E, 0
		jz	short loc_E0C0
		pushd	[off_39E9E] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E9E, 0
		jmp	short $+2

loc_E0C0:
		cmp	off_39EA2, 0
		jz	short loc_E0E0
		pushd	[off_39EA2] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39EA2, 0
		jmp	short $+2

loc_E0E0:
		cmp	off_39EA6, 0
		jz	short loc_E101
		pushd	[off_39EA6] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39EA6, 0
		jmp	loc_D7E4
; ---------------------------------------------------------------------------

loc_E101:
		jmp	loc_D7E4
; ---------------------------------------------------------------------------

loc_E104:
		cmp	font, 0
		jz	short loc_E124
		pushd	[font]	; font
		call	@$bdla$qnv
		add	sp, 4
		mov	font, 0
		jmp	short $+2

loc_E124:
		cmp	off_39E88, 0
		jz	short loc_E144
		pushd	[off_39E88] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E88, 0
		jmp	short $+2

loc_E144:
		cmp	off_39E8C, 0
		jz	short loc_E164
		pushd	[off_39E8C] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E8C, 0
		jmp	short $+2

loc_E164:
		cmp	off_39E92, 0
		jz	short loc_E184
		pushd	[off_39E92] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E92, 0
		jmp	short $+2

loc_E184:
		cmp	off_39E96, 0
		jz	short loc_E1A4
		pushd	[off_39E96] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E96, 0
		jmp	short $+2

loc_E1A4:
		cmp	off_39EAC, 0
		jz	short loc_E1C4
		pushd	[off_39EAC] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39EAC, 0
		jmp	short $+2

loc_E1C4:
		cmp	off_39E9A, 0
		jz	short loc_E1E4
		pushd	[off_39E9A] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E9A, 0
		jmp	short $+2

loc_E1E4:
		cmp	off_39E9E, 0
		jz	short loc_E204
		pushd	[off_39E9E] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39E9E, 0
		jmp	short $+2

loc_E204:
		cmp	off_39EA2, 0
		jz	short loc_E224
		pushd	[off_39EA2] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39EA2, 0
		jmp	short $+2

loc_E224:
		cmp	off_39EA6, 0
		jz	short loc_E244
		pushd	[off_39EA6] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	off_39EA6, 0
		jmp	short $+2

loc_E244:
		inc	si
		call	sub_CE5C
		push	ds
		push	offset unk_386B8
		call	sub_2FCAD
		add	sp, 4
		push	ds
		push	offset unk_37635
		call	sub_30DEE
		add	sp, 4
		call	sub_D47D
		mov	word_34A8A, 1
		cmp	byte_34ADF, 0
		jz	short loc_E27B
		call	sub_D4DD
		mov	byte_34A49, 1

loc_E27B:
		les	bx, _resident
		mov	eax, _score
		mov	es:[bx+reiidenconfig_t.score], eax
		cmp	[bp+var_2], 5
		jge	short loc_E295
		mov	dx, ds
		mov	ax, 66Bh
		jmp	short loc_E2A8
; ---------------------------------------------------------------------------

loc_E295:
		cmp	_route, 0
		jnz	short loc_E2A3
		mov	dx, ds
		mov	ax, 66Eh
		jmp	short loc_E2A8
; ---------------------------------------------------------------------------

loc_E2A3:
		mov	dx, ds
		mov	ax, 671h

loc_E2A8:
		push	dx
		push	ax
		mov	ax, [bp+var_2]
		inc	ax
		push	ax
		pushd	[_score]
		call	sub_148B3
		add	sp, 0Ah
		les	bx, _resident
		mov	ax, [bp+var_2]
		mov	es:[bx+reiidenconfig_t.stage], ax
		call	sub_CC0F

loc_E2CB:
		call	sub_D487
		call	sub_D4DD
		call	game_switch_binary
		call	key_end
		call	@arc_close$qv
		pushd	0
		push	ds
		push	offset aOp	; "op"
		push	ds
		push	offset aOp	; "op"
		call	_execl
		add	sp, 0Ch
		xor	ax, ax

loc_E2F7:
		pop	di
		pop	si
		leave
		retf
_main		endp

; ---------------------------------------------------------------------------
off_E2FB	dw offset loc_DD3C
		dw offset loc_DD43
		dw offset loc_DD4A
		dw offset loc_DD51
		dw offset loc_DD58
		dw offset loc_DD5F
		dw offset loc_DD66
word_E309	dw	4,     9,   0Eh,   13h
					; value	table for switch statement
		dw offset loc_D85F	; jump table for switch	statement
		dw offset loc_D89B
		dw offset loc_D901
		dw offset loc_D972

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_E319	proc far
		push	bp
		mov	bp, sp
		push	ds
		push	offset unk_37635
		call	sub_30047
		add	sp, 4
		mov	word_386D8, 50h	; 'P'
		mov	word_386DA, 60h
		mov	word_386DC, 70h	; 'p'
		mov	byte_386E8, 0
		mov	byte_386E9, 0
		mov	byte_386EA, 0
		mov	byte_386EB, 0
		mov	byte_386EC, 0
		mov	byte_386ED, 0
		mov	byte_386EE, 0
		mov	byte_386EF, 0
		pop	bp
		retf
sub_E319	endp

main_01_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_02_TEXT	segment	byte public 'CODE' use16
	extern _frame_delay:proc
main_02_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_03_TEXT	segment	byte public 'CODE' use16
	extern _vsync_init:proc
	extern _vsync_exit:proc
	extern _z_vsync_wait:proc
main_03_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_04_TEXT	segment	byte public 'CODE' use16
	extern _z_text_init:proc
	extern _z_text_25line:proc
	extern _z_text_setcursor:proc
	extern _z_text_clear:proc
	extern _z_text_show:proc
	extern _z_text_print:proc
main_04_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_05_TEXT	segment	byte public 'CODE' use16
		assume cs:main_05_TEXT
		;org 0Eh
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __interrupt _int06_nop()
_int06_nop	proc far
		push	eax
		push	ebx
		push	ecx
		push	edx
		push	es
		push	ds
		push	esi
		push	edi
		push	bp
		mov	bp, seg	_DATA
		mov	ds, bp
		mov	bp, sp
		pop	bp
		pop	edi
		pop	esi
		pop	ds
		pop	es
		pop	edx
		pop	ecx
		pop	ebx
		pop	eax
		iret
_int06_nop	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame
public GAME_INIT
game_init	proc far
		push	bp
		mov	bp, sp
		cmp	_game_initialized, 0
		jnz	short loc_E835
		mov	_game_initialized, 1
		push	6		; interruptno
		call	_getvect
		pop	cx
		mov	word ptr _int06_old+2, dx
		mov	word ptr _int06_old, ax
		push	seg _int06_game_exit
		push	offset _int06_game_exit	; isr
		push	6		; interruptno
		call	_setvect
		add	sp, 6
		call	_vsync_init
		call	_z_text_init
		call	egc_start
		call	graph_start
		call	respal_create
		call	_z_respal_set
		call	vram_planes_set

loc_E835:
		pop	bp
		retf
game_init	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame
public GAME_EXIT
game_exit	proc far
		push	bp
		mov	bp, sp
		cmp	_game_initialized, 1
		jnz	short @@ret
		mov	_game_initialized, 0
		nopcall	game_exit_inner
		call	respal_free

@@ret:
		pop	bp
		retf
game_exit	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame
public GAME_SWITCH_BINARY
game_switch_binary	proc far
		push	bp
		mov	bp, sp
		cmp	_game_initialized, 1
		jnz	short @@ret
		nopcall	game_exit_inner
		call	_z_text_25line
		push	0
		call	_z_text_setcursor
		pop	cx
		call	_z_text_clear
		call	_z_text_show
		mov	_game_initialized, 0

@@ret:
		pop	bp
		retf
game_switch_binary	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

game_exit_inner	proc far
		push	bp
		mov	bp, sp
		mov	_game_initialized, 0
		push	seg _int06_nop
		push	offset _int06_nop	; isr
		push	6		; interruptno
		call	_setvect
		call	_vsync_exit
		call	_z_text_clear
		call	sub_EE35
		call	sub_E9CB
		call	egc_start
		pushd	[_int06_old] ; isr
		push	6		; interruptno
		call	_setvect
		add	sp, 0Ch
		pop	bp
		retf
game_exit_inner	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

; void __interrupt _int06_game_exit()
_int06_game_exit	proc far
		push	eax
		push	ebx
		push	ecx
		push	edx
		push	es
		push	ds
		push	esi
		push	edi
		push	bp
		mov	bp, seg	_DATA
		mov	ds, bp
		mov	bp, sp
		call	game_exit
		push	0		; status
		call	_exit
; ---------------------------------------------------------------------------
		pop	cx
		pop	bp
		pop	edi
		pop	esi
		pop	ds
		pop	es
		pop	edx
		pop	ecx
		pop	ebx
		pop	eax
		iret
_int06_game_exit	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn bp-based	frame

game_exit_print_error	proc near

@@buffer		= byte ptr -104h
var_4		= word ptr -4
var_2		= word ptr -2
_format		= dword	ptr  6
arglist		= byte ptr  0Ah

		enter	104h, 0
		lea	ax, [bp+arglist]
		mov	[bp+var_2], ss
		mov	[bp+var_4], ax
		push	[bp+var_2]
		push	ax		; arglist
		pushd	[bp+_format] ; format
		push	ss
		lea	ax, [bp+@@buffer]
		push	ax		; buffer
		call	_vsprintf
		call	game_exit
		push	ss
		lea	ax, [bp+@@buffer]
		push	ax
		call	_z_text_print
		push	1	; status
		call	_exit
game_exit_print_error	endp

main_05_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_06_TEXT	segment	byte public 'CODE' use16
		assume cs:main_06_TEXT
		;org 6
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================


sub_E926	proc far
		add	sp, 12h
		leave
		retf
sub_E926	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_E92B	proc far

inregs		= REGS ptr -10h

		enter	10h, 0
		nopcall	sub_EA17
		mov	byte ptr [bp+inregs+1],	42h ; 'B'
		mov	byte ptr [bp+inregs+5],	0C0h ; 'ﾀ'
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; outregs
		push	ss
		push	ax		; inregs
		push	18h		; intno
		call	_int86
		mov	dx, 6Ah	; 'j'
		mov	al, 1
		out	dx, al		; PC-98	GDC (6a):
					;
		push	ds
		push	offset _z_Palettes
		nopcall	sub_EB10
		push	0
		nopcall	_graph_accesspage_func
		push	0
		nopcall	_graph_showpage_func
		add	sp, 12h
		nopcall	sub_EC37
		mov	dx, 68h	; 'h'
		mov	al, 0Ah
		out	dx, al
		GRCG_OFF_CLOBBERING dx
		nopcall	sub_E9FC
		leave
		retf
sub_E92B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_E982	proc far

inregs		= REGS ptr -10h

		enter	10h, 0
		nopcall	sub_EA17
		mov	byte ptr [bp+inregs+1],	42h ; 'B'
		mov	byte ptr [bp+inregs+5],	0C0h ; 'ﾀ'
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; outregs
		push	ss
		push	ax		; inregs
		push	18h		; intno
		call	_int86
		mov	dx, 6Ah	; 'j'
		mov	al, 1
		out	dx, al		; PC-98	GDC (6a):
					;
		push	0
		nopcall	_graph_accesspage_func
		push	0
		nopcall	_graph_showpage_func
		add	sp, 0Eh
		mov	dx, 68h	; 'h'
		mov	al, 0Ah
		out	dx, al
		GRCG_OFF_CLOBBERING dx
		nopcall	sub_E9FC
		leave
		retf
sub_E982	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_E9CB	proc far
		push	bp
		mov	bp, sp
		nopcall	_z_palette_black
		nopcall	sub_EC37
		push	0
		nopcall	_graph_accesspage_func
		push	0
		nopcall	_graph_showpage_func
		add	sp, 4
		nopcall	sub_E9FC
		mov	dx, 68h	; 'h'
		mov	al, 0Ah
		out	dx, al
		GRCG_OFF_CLOBBERING dx
		pop	bp
		retf
sub_E9CB	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_E9FC	proc far

inregs		= REGS ptr -10h

		enter	10h, 0
		mov	byte ptr [bp+inregs+1],	40h
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; outregs
		push	ss
		push	ax		; inregs
		push	18h		; intno
		call	_int86
		add	sp, 0Ah
		leave
		retf
sub_E9FC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EA17	proc far

inregs		= REGS ptr -10h

		enter	10h, 0
		mov	byte ptr [bp+inregs+1],	41h ; 'A'
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; outregs
		push	ss
		push	ax		; inregs
		push	18h		; intno
		call	_int86
		add	sp, 0Ah
		leave
		retf
sub_EA17	endp

include th01/hardware/graph_page.asm
include th01/hardware/color.asm

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EB10	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_EB51
; ---------------------------------------------------------------------------

loc_EB18:
		mov	ax, si
		imul	ax, 3
		les	bx, [bp+arg_0]
		add	bx, ax
		mov	al, es:[bx+2]
		cbw
		push	ax
		mov	ax, si
		imul	ax, 3
		mov	bx, word ptr [bp+arg_0]
		add	bx, ax
		mov	al, es:[bx+1]
		cbw
		push	ax
		mov	ax, si
		imul	ax, 3
		mov	bx, word ptr [bp+arg_0]
		add	bx, ax
		mov	al, es:[bx]
		cbw
		push	ax
		push	si
		nopcall	_z_palette_set_show
		add	sp, 8
		inc	si

loc_EB51:
		cmp	si, COLOR_COUNT
		jl	short loc_EB18
		pop	si
		pop	bp
		retf
sub_EB10	endp

include th01/hardware/palette_set_show.asm

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EC0D	proc far

_s		= dword	ptr -4

		enter	4, 0
		mov	[bp+_s],	0A8000000h
		push	0
		call	_grcg_setcolor_rmw
		push	7D0000FFh	; c
		pushd	[bp+_s]	; s
		call	_memset
		add	sp, 0Ah
		call	_grcg_off_func
		leave
		retf
sub_EC0D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EC37	proc far
		push	bp
		mov	bp, sp
		push	2
		call	_graph_accesspage_func
		call	sub_EC0D
		push	2
		call	_graph_accesspage_func
		add	sp, 4
		call	sub_EC0D
		pop	bp
		retf
sub_EC37	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EC53	proc far

_s		= dword	ptr -4
arg_0		= byte ptr  6

		enter	4, 0
		mov	[bp+_s],	0A8000000h
		mov	al, [bp+arg_0]
		cbw
		push	ax
		call	_grcg_setcolor_rmw
		push	7D0000FFh	; c
		pushd	[bp+_s]	; s
		call	_memset
		add	sp, 0Ah
		call	_grcg_off_func
		leave
		retf
sub_EC53	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EC80	proc far

var_152		= byte ptr -152h
var_102		= byte ptr -102h
var_B2		= byte ptr -0B2h
dest		= byte ptr -62h
@@page_other		= byte ptr -11h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
_src		= dword	ptr -4

		enter	152h, 0
		push	si
		mov	[bp+_src], 0A8000000h
		mov	[bp+var_8], 0B0000000h
		mov	[bp+var_C], 0B8000000h
		mov	[bp+var_10], 0E0000000h
		mov	al, _page_back
		xor	al, 1
		mov	[bp+@@page_other], al
		xor	si, si
		jmp	loc_ED5D
; ---------------------------------------------------------------------------

loc_ECB2:
		push	50h ; 'P'       ; n
		pushd	[bp+_src]	; src
		push	ss
		lea	ax, [bp+dest]
		push	ax		; dest
		call	_memcpy
		push	50h ; 'P'       ; n
		pushd	[bp+var_8] ; src
		push	ss
		lea	ax, [bp+var_B2]
		push	ax		; dest
		call	_memcpy
		push	50h ; 'P'       ; n
		pushd	[bp+var_C] ; src
		push	ss
		lea	ax, [bp+var_102]
		push	ax		; dest
		call	_memcpy
		push	50h ; 'P'       ; n
		pushd	[bp+var_10] ; src
		push	ss
		lea	ax, [bp+var_152]
		push	ax		; dest
		call	_memcpy
		graph_accesspage [bp+@@page_other]
		push	50h ; 'P'       ; n
		push	ss
		lea	ax, [bp+dest]
		push	ax		; src
		pushd	[bp+_src]	; dest
		call	_memcpy
		add	sp, 32h
		push	50h ; 'P'       ; n
		push	ss
		lea	ax, [bp+var_B2]
		push	ax		; src
		pushd	[bp+var_8] ; dest
		call	_memcpy
		push	50h ; 'P'       ; n
		push	ss
		lea	ax, [bp+var_102]
		push	ax		; src
		pushd	[bp+var_C] ; dest
		call	_memcpy
		push	50h ; 'P'       ; n
		push	ss
		lea	ax, [bp+var_152]
		push	ax		; src
		pushd	[bp+var_10] ; dest
		call	_memcpy
		add	sp, 1Eh
		graph_accesspage _page_back
		add	word ptr [bp+_src], 50h ; 'P'
		add	word ptr [bp+var_8], 50h ; 'P'
		add	word ptr [bp+var_C], 50h ; 'P'
		add	word ptr [bp+var_10], 50h ; 'P'
		inc	si

loc_ED5D:
		cmp	si, 190h
		jl	loc_ECB2
		pop	si
		leave
		retf
sub_EC80	endp

include th01/hardware/palette_black.asm

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_ED86	proc far

_s		= byte ptr -32h
var_31		= byte ptr -31h
var_30		= byte ptr -30h
var_2		= word ptr -2

		enter	32h, 0
		push	si
		push	di
		push	300000h	; c
		push	ss
		lea	ax, [bp+_s]
		push	ax		; s
		call	_memset
		add	sp, 8
		mov	[bp+var_2], 0
		jmp	loc_EE29
; ---------------------------------------------------------------------------

loc_EDA7:
		call	_z_vsync_wait
		xor	si, si
		jmp	short loc_EE19
; ---------------------------------------------------------------------------

loc_EDB0:
		xor	di, di
		jmp	short loc_EDDE
; ---------------------------------------------------------------------------

loc_EDB4:
		mov	bx, si
		imul	bx, 3
		add	bx, di
		lea	ax, [bp+_s]
		add	bx, ax
		mov	al, ss:[bx]
		mov	bx, si
		imul	bx, 3
		cmp	al, _z_Palettes[bx+di]
		jge	short loc_EDDD
		mov	bx, si
		imul	bx, 3
		add	bx, di
		lea	ax, [bp+_s]
		add	bx, ax
		inc	byte ptr ss:[bx]

loc_EDDD:
		inc	di

loc_EDDE:
		cmp	di, 3
		jl	short loc_EDB4
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+var_30]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+var_31]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+_s]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		push	si
		call	_z_palette_show_single
		add	sp, 8
		inc	si

loc_EE19:
		cmp	si, 10h
		jl	short loc_EDB0
		push	0Ah
		call	_delay
		pop	cx
		inc	[bp+var_2]

loc_EE29:
		cmp	[bp+var_2], 10h
		jl	loc_EDA7
		pop	di
		pop	si
		leave
		retf
sub_ED86	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EE35	proc far

dest		= byte ptr -32h
var_31		= byte ptr -31h
var_30		= byte ptr -30h
var_2		= word ptr -2

		enter	32h, 0
		push	si
		push	di
		push	30h ; '0'       ; n
		push	ds
		push	offset _z_Palettes ; src
		push	ss
		lea	ax, [bp+dest]
		push	ax		; dest
		call	_memcpy
		add	sp, 0Ah
		mov	[bp+var_2], 0
		jmp	short loc_EECC
; ---------------------------------------------------------------------------

loc_EE55:
		call	_z_vsync_wait
		xor	si, si
		jmp	short loc_EEBC
; ---------------------------------------------------------------------------

loc_EE5E:
		xor	di, di
		jmp	short loc_EE81
; ---------------------------------------------------------------------------

loc_EE62:
		mov	bx, si
		imul	bx, 3
		add	bx, di
		lea	ax, [bp+dest]
		add	bx, ax
		cmp	byte ptr ss:[bx], 0
		jle	short loc_EE80
		mov	bx, si
		imul	bx, 3
		add	bx, di
		add	bx, ax
		dec	byte ptr ss:[bx]

loc_EE80:
		inc	di

loc_EE81:
		cmp	di, 3
		jl	short loc_EE62
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+var_30]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+var_31]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+dest]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		push	si
		call	_z_palette_show_single
		add	sp, 8
		inc	si

loc_EEBC:
		cmp	si, 10h
		jl	short loc_EE5E
		push	0Ah
		call	_delay
		pop	cx
		inc	[bp+var_2]

loc_EECC:
		cmp	[bp+var_2], 10h
		jl	short loc_EE55
		pop	di
		pop	si
		leave
		retf
sub_EE35	endp

include th01/hardware/palette_white.asm

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EEF7	proc far

_s		= byte ptr -32h
var_31		= byte ptr -31h
var_30		= byte ptr -30h
var_2		= word ptr -2

		enter	32h, 0
		push	si
		push	di
		push	30000Fh	; c
		push	ss
		lea	ax, [bp+_s]
		push	ax		; s
		call	_memset
		add	sp, 8
		mov	[bp+var_2], 0
		jmp	loc_EF9A
; ---------------------------------------------------------------------------

loc_EF18:
		call	_z_vsync_wait
		xor	si, si
		jmp	short loc_EF8A
; ---------------------------------------------------------------------------

loc_EF21:
		xor	di, di
		jmp	short loc_EF4F
; ---------------------------------------------------------------------------

loc_EF25:
		mov	bx, si
		imul	bx, 3
		add	bx, di
		lea	ax, [bp+_s]
		add	bx, ax
		mov	al, ss:[bx]
		mov	bx, si
		imul	bx, 3
		cmp	al, _z_Palettes[bx+di]
		jle	short loc_EF4E
		mov	bx, si
		imul	bx, 3
		add	bx, di
		lea	ax, [bp+_s]
		add	bx, ax
		dec	byte ptr ss:[bx]

loc_EF4E:
		inc	di

loc_EF4F:
		cmp	di, 3
		jl	short loc_EF25
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+var_30]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+var_31]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+_s]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		push	si
		call	_z_palette_show_single
		add	sp, 8
		inc	si

loc_EF8A:
		cmp	si, 10h
		jl	short loc_EF21
		push	0Ah
		call	_delay
		pop	cx
		inc	[bp+var_2]

loc_EF9A:
		cmp	[bp+var_2], 10h
		jl	loc_EF18
		pop	di
		pop	si
		leave
		retf
sub_EEF7	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_EFA6	proc far

dest		= byte ptr -32h
var_31		= byte ptr -31h
var_30		= byte ptr -30h
var_2		= word ptr -2

		enter	32h, 0
		push	si
		push	di
		push	30h ; '0'       ; n
		push	ds
		push	offset _z_Palettes ; src
		push	ss
		lea	ax, [bp+dest]
		push	ax		; dest
		call	_memcpy
		add	sp, 0Ah
		mov	[bp+var_2], 0
		jmp	short loc_F03D
; ---------------------------------------------------------------------------

loc_EFC6:
		call	_z_vsync_wait
		xor	si, si
		jmp	short loc_F02D
; ---------------------------------------------------------------------------

loc_EFCF:
		xor	di, di
		jmp	short loc_EFF2
; ---------------------------------------------------------------------------

loc_EFD3:
		mov	bx, si
		imul	bx, 3
		add	bx, di
		lea	ax, [bp+dest]
		add	bx, ax
		cmp	byte ptr ss:[bx], 0Fh
		jge	short loc_EFF1
		mov	bx, si
		imul	bx, 3
		add	bx, di
		add	bx, ax
		inc	byte ptr ss:[bx]

loc_EFF1:
		inc	di

loc_EFF2:
		cmp	di, 3
		jl	short loc_EFD3
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+var_30]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+var_31]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		lea	ax, [bp+dest]
		add	bx, ax
		mov	al, ss:[bx]
		cbw
		push	ax
		push	si
		call	_z_palette_show_single
		add	sp, 8
		inc	si

loc_F02D:
		cmp	si, 10h
		jl	short loc_EFCF
		push	0Ah
		call	_delay
		pop	cx
		inc	[bp+var_2]

loc_F03D:
		cmp	[bp+var_2], 10h
		jl	short loc_EFC6
		pop	di
		pop	si
		leave
		retf
sub_EFA6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_F047	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_F079
; ---------------------------------------------------------------------------

loc_F04F:
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx].b
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx].g
		cbw
		push	ax
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx].r
		cbw
		push	ax
		push	si
		call	_z_palette_show_single
		add	sp, 8
		inc	si

loc_F079:
		cmp	si, 10h
		jl	short loc_F04F
		pop	si
		pop	bp
		retf
sub_F047	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_F081	proc far

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		push	bp
		mov	bp, sp
		push	[bp+arg_4]
		call	_grcg_setcolor_rmw
		pop	cx
		mov	bx, [bp+arg_2]
		imul	bx, 50h
		mov	ax, [bp+arg_0]
		sar	ax, 3
		add	bx, ax
		mov	ax, 0A800h
		mov	cl, byte ptr [bp+arg_0]
		and	cl, 7
		mov	dx, 80h
		sar	dx, cl
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		call	_grcg_off_func
		pop	bp
		retf
sub_F081	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_F0B3	proc far

var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	2, 0
		push	si
		push	di
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		mov	dx, [bp+arg_0]
		sar	dx, 3
		add	ax, dx
		mov	di, ax
		mov	cl, byte ptr [bp+arg_0]
		and	cl, 7
		mov	ax, 80h
		sar	ax, cl
		mov	[bp+var_2], ax
		xor	si, si
		mov	ax, 0A800h
		mov	es, ax
		mov	al, es:[di]
		cbw
		test	[bp+var_2], ax
		jz	short loc_F0EA
		or	si, 1

loc_F0EA:
		mov	ax, 0B000h
		mov	es, ax
		assume es:nothing
		mov	al, es:[di]
		cbw
		test	[bp+var_2], ax
		jz	short loc_F0FB
		or	si, 2

loc_F0FB:
		mov	ax, 0B800h
		mov	es, ax
		assume es:nothing
		mov	al, es:[di]
		cbw
		test	[bp+var_2], ax
		jz	short loc_F10C
		or	si, 4

loc_F10C:
		mov	ax, 0E000h
		mov	es, ax
		assume es:nothing
		mov	al, es:[di]
		cbw
		test	[bp+var_2], ax
		jz	short loc_F11D
		or	si, 8

loc_F11D:
		mov	ax, si
		pop	di
		pop	si
		leave
		retf
sub_F0B3	endp

include th01/hardware/graph_r.asm

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_F9D0	proc far

arg_0		= word ptr  6
arg_2		= dword	ptr  8

		push	bp
		mov	bp, sp
		push	si
		push	di
		xor	cx, cx
		mov	ax, [bp+arg_0]
		mov	bx, 40h
		cwd
		idiv	bx
		mov	bx, 8
		cwd
		idiv	bx
		mov	si, dx
		jmp	short loc_FA32
; ---------------------------------------------------------------------------

loc_F9EA:
		les	bx, [bp+arg_2]
		mov	al, es:[bx]
		mov	ah, 0
		mov	bx, ax
		test	__mbctype+1[bx], 4
		jz	short loc_FA2A
		mov	bx, word ptr [bp+arg_2]
		mov	al, es:[bx]
		cbw
		shl	ax, 8
		mov	dl, es:[bx]
		mov	dh, 0
		add	ax, dx
		mov	di, ax
		inc	word ptr [bp+arg_2]
		inc	word ptr [bp+arg_2]
		cmp	di, 8540h
		jb	short loc_FA20
		cmp	di, 869Eh
		jbe	short loc_FA25

loc_FA20:
		add	cx, 10h
		jmp	short loc_FA30
; ---------------------------------------------------------------------------

loc_FA25:
		add	cx, 8
		jmp	short loc_FA30
; ---------------------------------------------------------------------------

loc_FA2A:
		add	cx, 8
		inc	word ptr [bp+arg_2]

loc_FA30:
		add	cx, si

loc_FA32:
		les	bx, [bp+arg_2]
		cmp	byte ptr es:[bx], 0
		jnz	short loc_F9EA
		mov	ax, cx
		sub	ax, si
		pop	di
		pop	si
		pop	bp
		retf
sub_F9D0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

graph_putsa_fx	proc far

var_3A		= byte ptr -3Ah
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= dword	ptr  0Ch

		enter	3Ah, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	ax, [bp+arg_4]
		mov	bx, 10h
		cwd
		idiv	bx
		mov	bx, 4
		cwd
		idiv	bx
		mov	[bp+var_E], dx
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		cwd
		idiv	bx
		mov	bx, 8
		cwd
		idiv	bx
		mov	[bp+var_10], dx
		mov	ax, [bp+arg_4]
		and	ax, 200h
		mov	[bp+var_12], ax
		mov	ax, [bp+arg_4]
		and	ax, 400h
		mov	[bp+var_14], ax
		mov	ax, [bp+arg_4]
		and	ax, 800h
		mov	[bp+var_16], ax
		cmp	[bp+var_12], 0
		jz	short loc_FAE2
		pushd	[bp+arg_6]
		push	[bp+arg_4]
		call	sub_F9D0
		add	sp, 6
		mov	[bp+var_18], ax
		cmp	[bp+var_14], 0
		jz	short loc_FAC5
		push	0
		mov	ax, [bp+arg_2]
		add	ax, 11h
		push	ax
		mov	ax, si
		add	ax, [bp+var_18]
		dec	ax
		push	ax
		push	[bp+arg_2]
		push	si
		call	_z_grcg_boxfill
		add	sp, 0Ah
		jmp	short loc_FAF9
; ---------------------------------------------------------------------------

loc_FAC5:
		push	0
		mov	ax, [bp+arg_2]
		add	ax, 0Fh
		push	ax
		mov	ax, si
		add	ax, [bp+var_18]
		dec	ax
		push	ax
		push	[bp+arg_2]
		push	si
		call	_z_grcg_boxfill
		add	sp, 0Ah
		jmp	short loc_FB11
; ---------------------------------------------------------------------------

loc_FAE2:
		cmp	[bp+var_14], 0
		jz	short loc_FB11
		pushd	[bp+arg_6]
		push	[bp+arg_4]
		call	sub_F9D0
		add	sp, 6
		mov	[bp+var_18], ax

loc_FAF9:
		push	7
		mov	ax, [bp+arg_2]
		add	ax, 17
		push	ax
		mov	ax, si
		add	ax, [bp+var_18]
		dec	ax
		push	ax
		push	si
		call	_graph_r_hline
		add	sp, 8

loc_FB11:
		push	[bp+arg_4]
		call	_grcg_setcolor_rmw
		pop	cx
		mov	dx, 68h	; 'h'
		mov	al, 0Bh
		out	dx, al
		jmp	loc_FD49
; ---------------------------------------------------------------------------

loc_FB22:
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		push	ax
		mov	ax, si
		mov	bx, 8
		cwd
		idiv	bx
		pop	dx
		add	dx, ax
		mov	word ptr [bp+var_8+2], 0A800h
		mov	word ptr [bp+var_8], dx
		mov	ax, si
		cwd
		idiv	bx
		mov	[bp+var_C], dx
		les	bx, [bp+arg_6]
		mov	al, es:[bx]
		mov	ah, 0
		mov	bx, ax
		test	__mbctype+1[bx], 4
		jz	short loc_FB77
		mov	bx, word ptr [bp+arg_6]
		mov	al, es:[bx]
		cbw
		shl	ax, 8
		mov	dl, es:[bx+1]
		mov	dh, 0
		add	ax, dx
		push	ax
		call	__mbcjmstojis
		pop	cx
		mov	[bp+var_2], ax
		add	word ptr [bp+arg_6], 2
		jmp	short loc_FBBD
; ---------------------------------------------------------------------------

loc_FB77:
		les	bx, [bp+arg_6]
		mov	al, es:[bx]
		mov	ah, 0
		mov	bx, ax
		test	__mbctype+1[bx], 3
		jz	short loc_FB95
		mov	bx, word ptr [bp+arg_6]
		mov	al, es:[bx]
		mov	ah, 0
		add	ax, 2980h
		jmp	short loc_FBB0
; ---------------------------------------------------------------------------

loc_FB95:
		les	bx, [bp+arg_6]
		mov	al, es:[bx]
		cbw
		mov	bx, ax
		test	byte ptr [bx+1D17h], 5Eh
		jz	short loc_FBB5
		mov	bx, word ptr [bp+arg_6]
		mov	al, es:[bx]
		mov	ah, 0
		add	ax, 2900h

loc_FBB0:
		mov	[bp+var_2], ax
		jmp	short loc_FBBA
; ---------------------------------------------------------------------------

loc_FBB5:
		mov	[bp+var_2], 2B21h

loc_FBBA:
		inc	word ptr [bp+arg_6]

loc_FBBD:
		mov	al, byte ptr [bp+var_2]
		and	al, 0FFh
		mov	dx, 0A1h ; '｡'
		out	dx, al
		mov	ax, [bp+var_2]
		shr	ax, 8
		sub	al, 20h	; ' '
		mov	dx, 0A3h ; '｣'
		out	dx, al
		cmp	[bp+var_2], 2921h
		jb	short loc_FC1E
		cmp	[bp+var_2], 2B7Eh
		ja	short loc_FC1E
		cmp	si, 278h
		jg	loc_FD54
		mov	[bp+var_1A], 0
		jmp	short loc_FC11
; ---------------------------------------------------------------------------

loc_FBEF:
		mov	al, byte ptr [bp+var_1A]
		or	al, 20h
		mov	dx, 0A5h ; '･'
		out	dx, al
		mov	dx, 0A9h ; 'ｩ'
		in	al, dx
		mov	ah, 0
		shl	ax, 8
		mov	bx, [bp+var_1A]
		add	bx, bx
		lea	dx, [bp+var_3A]
		add	bx, dx
		mov	ss:[bx], ax
		inc	[bp+var_1A]

loc_FC11:
		cmp	[bp+var_1A], 10h
		jl	short loc_FBEF
		mov	[bp+var_A], 0
		jmp	short loc_FC74
; ---------------------------------------------------------------------------

loc_FC1E:
		cmp	si, 270h
		jg	loc_FD54
		mov	[bp+var_1A], 0
		jmp	short loc_FC69
; ---------------------------------------------------------------------------

loc_FC2D:
		mov	al, byte ptr [bp+var_1A]
		or	al, 20h
		mov	dx, 0A5h ; '･'
		out	dx, al
		mov	dx, 0A9h ; 'ｩ'
		in	al, dx
		mov	ah, 0
		shl	ax, 8
		mov	bx, [bp+var_1A]
		add	bx, bx
		lea	dx, [bp+var_3A]
		add	bx, dx
		mov	ss:[bx], ax
		mov	dx, 0A5h ; '･'
		mov	al, byte ptr [bp+var_1A]
		out	dx, al
		mov	dx, 0A9h ; 'ｩ'
		in	al, dx
		mov	ah, 0
		mov	bx, [bp+var_1A]
		add	bx, bx
		lea	dx, [bp+var_3A]
		add	bx, dx
		add	ss:[bx], ax
		inc	[bp+var_1A]

loc_FC69:
		cmp	[bp+var_1A], 10h
		jl	short loc_FC2D
		mov	[bp+var_A], 1

loc_FC74:
		mov	[bp+var_1A], 0
		jmp	loc_FD30
; ---------------------------------------------------------------------------

loc_FC7C:
		mov	bx, [bp+var_1A]
		add	bx, bx
		lea	ax, [bp+var_3A]
		add	bx, ax
		mov	ax, ss:[bx]
		mov	[bp+var_4], ax
		mov	ax, [bp+var_E]
		cmp	ax, 1
		jz	short loc_FCA0
		cmp	ax, 2
		jz	short loc_FCB6
		cmp	ax, 3
		jz	short loc_FCAC
		jmp	short loc_FCCC
; ---------------------------------------------------------------------------

loc_FCA0:
		mov	di, [bp+var_4]
		mov	ax, di
		add	ax, ax
		or	[bp+var_4], ax
		jmp	short loc_FCCC
; ---------------------------------------------------------------------------

loc_FCAC:
		mov	di, [bp+var_4]
		mov	ax, di
		add	ax, ax
		or	[bp+var_4], ax

loc_FCB6:
		mov	di, [bp+var_4]
		mov	ax, di
		add	ax, ax
		or	[bp+var_4], ax
		xor	di, [bp+var_4]
		mov	ax, di
		add	ax, ax
		not	ax
		and	[bp+var_4], ax

loc_FCCC:
		cmp	[bp+var_16], 0
		jz	short loc_FCE3
		cmp	[bp+var_A], 0
		jz	short loc_FCDE
		xor	[bp+var_4], 0FFFFh
		jmp	short loc_FCE3
; ---------------------------------------------------------------------------

loc_FCDE:
		xor	[bp+var_4], 0FF00h

loc_FCE3:
		cmp	[bp+var_C], 0
		jz	short loc_FD16
		mov	cl, byte ptr [bp+var_C]
		add	cl, 8
		mov	ax, [bp+var_4]
		shr	ax, cl
		les	bx, [bp+var_8]
		mov	es:[bx], al
		mov	ax, [bp+var_4]
		mov	cl, byte ptr [bp+var_C]
		shr	ax, cl
		mov	es:[bx+1], al
		mov	cl, 8
		sub	cl, byte ptr [bp+var_C]
		mov	al, byte ptr [bp+var_4]
		shl	al, cl
		mov	es:[bx+2], al
		jmp	short loc_FD29
; ---------------------------------------------------------------------------

loc_FD16:
		mov	ax, [bp+var_4]
		shr	ax, 8
		les	bx, [bp+var_8]
		mov	es:[bx], al
		mov	al, byte ptr [bp+var_4]
		mov	es:[bx+1], al

loc_FD29:
		add	word ptr [bp+var_8], 50h ; 'P'
		inc	[bp+var_1A]

loc_FD30:
		cmp	[bp+var_1A], 10h
		jl	loc_FC7C
		cmp	[bp+var_A], 0
		jz	short loc_FD41
		add	si, 8

loc_FD41:
		mov	ax, [bp+var_10]
		add	ax, 8
		add	si, ax

loc_FD49:
		les	bx, [bp+arg_6]
		cmp	byte ptr es:[bx], 0
		jnz	loc_FB22

loc_FD54:
		mov	dx, 68h	; 'h'
		mov	al, 0Ah
		out	dx, al
		call	_grcg_off_func
		pop	di
		pop	si
		leave
		retf
graph_putsa_fx	endp

	extern _graph_move_byterect_interpage:proc
	extern _z_respal_set:proc
main_06_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_07_TEXT	segment	byte public 'CODE' use16
		assume cs:main_07_TEXT
		;org 0Bh
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1031B	proc far

var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	10h, 0
		push	si
		push	di
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	si, ax
		xor	di, di
		jmp	loc_103C3
; ---------------------------------------------------------------------------

loc_1033E:
		push	0
		call	_graph_accesspage_func
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	eax, es:[bx]
		mov	[bp+var_10], eax
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	eax, es:[bx]
		mov	[bp+var_C], eax
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	eax, es:[bx]
		mov	[bp+var_8], eax
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	eax, es:[bx]
		mov	[bp+var_4], eax
		push	1
		call	_graph_accesspage_func
		add	sp, 4
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	eax, [bp+var_10]
		mov	es:[bx], eax
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	eax, [bp+var_C]
		mov	es:[bx], eax
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	eax, [bp+var_8]
		mov	es:[bx], eax
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	eax, [bp+var_4]
		mov	es:[bx], eax
		add	si, 50h	; 'P'
		inc	di

loc_103C3:
		cmp	di, 20h	; ' '
		jl	loc_1033E
		push	0
		call	_graph_accesspage_func
		pop	cx
		pop	di
		pop	si
		leave
		retf
sub_1031B	endp

include th01/hardware/vram_planes_set.asm
EGC_START_COPY_DEF 1, far

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame
public _egc_copy_rect_1_to_0
_egc_copy_rect_1_to_0	proc far

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		enter	0Ah, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	di, si
		add	si, [bp+arg_4]
		and	di, 0FFF0h
		mov	ax, di
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	[bp+var_6], ax
		call	egc_start_copy_1
		mov	[bp+var_2], 0
		jmp	short loc_104B1
; ---------------------------------------------------------------------------

loc_10467:
		mov	[bp+var_4], di
		mov	ax, [bp+var_6]
		mov	[bp+var_A], ax
		jmp	short loc_104A5
; ---------------------------------------------------------------------------

loc_10472:
		push	1
		call	_graph_accesspage_func
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_A]
		mov	ax, es:[bx]
		mov	[bp+var_8], ax
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_A]
		mov	ax, [bp+var_8]
		mov	es:[bx], ax
		add	[bp+var_A], 2
		add	[bp+var_4], 10h

loc_104A5:
		cmp	[bp+var_4], si
		jl	short loc_10472
		add	[bp+var_6], 50h	; 'P'
		inc	[bp+var_2]

loc_104B1:
		mov	ax, [bp+var_2]
		cmp	ax, [bp+arg_6]
		jl	short loc_10467
		call	egc_off
		pop	di
		pop	si
		leave
		retf
_egc_copy_rect_1_to_0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_104C2	proc far

var_4		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	4, 0
		push	si
		push	di
		mov	di, [bp+arg_4]
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		push	ax
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		pop	dx
		add	dx, ax
		mov	si, dx
		mov	ax, di
		mov	bx, 40h
		cwd
		idiv	bx
		shl	ax, 2
		mov	bx, ax
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, di
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		xor	cx, cx
		jmp	short loc_1057C
; ---------------------------------------------------------------------------

loc_10511:
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	eax, es:[bx]
		mov	dx, cx
		shl	dx, 2
		les	bx, [bp+var_4]
		add	bx, dx
		mov	es:[bx+1], eax
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	eax, es:[bx]
		mov	dx, cx
		shl	dx, 2
		les	bx, [bp+var_4]
		add	bx, dx
		mov	es:[bx+81h], eax
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	eax, es:[bx]
		mov	dx, cx
		shl	dx, 2
		les	bx, [bp+var_4]
		add	bx, dx
		mov	es:[bx+101h], eax
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	eax, es:[bx]
		mov	dx, cx
		shl	dx, 2
		les	bx, [bp+var_4]
		add	bx, dx
		mov	es:[bx+181h], eax
		add	si, 50h	; 'P'
		inc	cx

loc_1057C:
		cmp	cx, 20h	; ' '
		jl	short loc_10511
		pop	di
		pop	si
		leave
		retf
sub_104C2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10585	proc far

var_E		= dword	ptr -0Eh
var_A		= dword	ptr -0Ah
var_6		= dword	ptr -6
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= byte ptr  0Ch

		enter	0Eh, 0
		push	si
		push	di
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		push	ax
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		pop	dx
		add	dx, ax
		mov	di, dx
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		cwd
		idiv	bx
		shl	ax, 2
		mov	bx, ax
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_E+2], dx
		mov	word ptr [bp+var_E], ax
		test	[bp+arg_6], 2
		jz	short loc_105DA
		mov	ax, 10h
		jmp	short loc_105DC
; ---------------------------------------------------------------------------

loc_105DA:
		xor	ax, ax

loc_105DC:
		mov	[bp+var_2], ax
		test	[bp+arg_6], 1
		jz	short loc_105ED
		mov	eax, 0FFFFh
		jmp	short loc_105F3
; ---------------------------------------------------------------------------

loc_105ED:
		mov	eax, 0FFFF0000h

loc_105F3:
		mov	[bp+var_6], eax
		test	[bp+arg_6], 1
		jz	short loc_10602
		mov	ax, 10h
		jmp	short loc_10604
; ---------------------------------------------------------------------------

loc_10602:
		xor	ax, ax

loc_10604:
		cwde
		mov	[bp+var_A], eax
		mov	si, [bp+var_2]
		jmp	loc_106E3
; ---------------------------------------------------------------------------

loc_10610:
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_E]
		add	bx, ax
		mov	eax, [bp+var_6]
		and	es:[bx+1], eax
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	eax, es:[bx]
		mov	cl, byte ptr [bp+var_A]
		shl	eax, cl
		mov	edx, [bp+var_6]
		not	edx
		and	eax, edx
		mov	dx, si
		shl	dx, 2
		les	bx, [bp+var_E]
		add	bx, dx
		or	es:[bx+1], eax
		mov	eax, [bp+var_6]
		and	es:[bx+81h], eax
		les	bx, _VRAM_PLANE_R
		add	bx, di
		mov	eax, es:[bx]
		shl	eax, cl
		mov	edx, [bp+var_6]
		not	edx
		and	eax, edx
		mov	dx, si
		shl	dx, 2
		les	bx, [bp+var_E]
		add	bx, dx
		or	es:[bx+81h], eax
		mov	eax, [bp+var_6]
		and	es:[bx+101h], eax
		les	bx, _VRAM_PLANE_G
		add	bx, di
		mov	eax, es:[bx]
		shl	eax, cl
		mov	edx, [bp+var_6]
		not	edx
		and	eax, edx
		mov	dx, si
		shl	dx, 2
		les	bx, [bp+var_E]
		add	bx, dx
		or	es:[bx+101h], eax
		mov	eax, [bp+var_6]
		and	es:[bx+181h], eax
		les	bx, _VRAM_PLANE_E
		add	bx, di
		mov	eax, es:[bx]
		shl	eax, cl
		mov	edx, [bp+var_6]
		not	edx
		and	eax, edx
		mov	dx, si
		shl	dx, 2
		les	bx, [bp+var_E]
		add	bx, dx
		or	es:[bx+181h], eax
		add	di, 50h	; 'P'
		inc	si

loc_106E3:
		mov	ax, [bp+var_2]
		add	ax, 10h
		cmp	ax, si
		jg	loc_10610
		pop	di
		pop	si
		leave
		retf
sub_10585	endp

main_07_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_08_TEXT	segment	byte public 'CODE' use16
		assume cs:main_08_TEXT
		;org 3
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_106F3	proc far

var_38		= byte ptr -38h
var_33		= byte ptr -33h
var_8		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= dword	ptr  8

		enter	38h, 0
		push	si
		push	di
		mov	di, [bp+arg_0]
		pushd	[bp+arg_2]
		call	@arc_file_load$qnxc
		push	ss
		lea	ax, [bp+var_38]
		push	ax
		push	6
		call	@arc_file_get$qncui
		mov	al, [bp+var_33]
		cbw
		mov	[bp+var_4], ax
		mov	bx, di
		shl	bx, 2
		mov	ax, [bx+4018h]
		or	ax, [bx+401Ah]
		jz	short loc_10739
		mov	bx, di
		shl	bx, 2
		pushd	dword ptr [bx+4018h] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_10739:
		mov	ax, [bp+var_4]
		imul	ax, 281h
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		shl	bx, 2
		mov	[bx+401Ah], dx
		mov	[bx+4018h], ax
		mov	bx, di
		shl	bx, 2
		mov	ax, [bx+4018h]
		or	ax, [bx+401Ah]
		jnz	short loc_10769
		mov	ax, 0FFFDh
		jmp	loc_10810
; ---------------------------------------------------------------------------

loc_10769:
		push	ss
		lea	ax, [bp+var_38]
		push	ax
		push	30h ; '0'
		call	@arc_file_get$qncui
		cmp	word_350CE, 0
		jz	short loc_10789
		push	ss
		lea	ax, [bp+var_38]
		push	ax
		call	sub_EB10
		add	sp, 4

loc_10789:
		mov	al, byte ptr [bp+var_4]
		mov	[di+735h], al
		mov	bx, di
		shl	bx, 2
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		mov	word ptr [bp+var_8+2], ax
		mov	word ptr [bp+var_8], dx
		mov	[bp+var_2], 0
		jmp	short loc_10801
; ---------------------------------------------------------------------------

loc_107AA:
		pushd	[bp+var_8]
		push	1
		call	@arc_file_get$qncui
		mov	ax, word ptr [bp+var_8]
		inc	ax
		push	word ptr [bp+var_8+2]
		push	ax
		push	200h
		call	@arc_file_get$qncui
		xor	si, si
		jmp	short loc_107F4
; ---------------------------------------------------------------------------

loc_107C9:
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+1]
		and	eax, es:[bx+81h]
		and	eax, es:[bx+101h]
		and	eax, es:[bx+181h]
		not	eax
		mov	es:[bx+201h], eax
		inc	si

loc_107F4:
		cmp	si, 20h	; ' '
		jl	short loc_107C9
		inc	[bp+var_2]
		add	word ptr [bp+var_8], 281h

loc_10801:
		mov	ax, [bp+var_2]
		cmp	ax, [bp+var_4]
		jl	short loc_107AA
		call	@arc_file_free$qv
		xor	ax, ax

loc_10810:
		pop	di
		pop	si
		leave
		retf
sub_106F3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10814	proc far

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		cmp	[bp+arg_2], 0
		jle	short loc_10827
		cmp	[bp+arg_2], 40h
		jle	short loc_1082C

loc_10827:
		mov	ax, 0FFF7h
		jmp	short loc_10885
; ---------------------------------------------------------------------------

loc_1082C:
		mov	bx, si
		shl	bx, 2
		mov	ax, [bx+4018h]
		or	ax, [bx+401Ah]
		jz	short loc_1084D
		mov	bx, si
		shl	bx, 2
		pushd	dword ptr [bx+4018h] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_1084D:
		mov	al, byte ptr [bp+arg_2]
		mov	[si+735h], al
		mov	ax, [bp+arg_2]
		imul	ax, 281h
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, si
		shl	bx, 2
		mov	[bx+401Ah], dx
		mov	[bx+4018h], ax
		mov	bx, si
		shl	bx, 2
		mov	ax, [bx+4018h]
		or	ax, [bx+401Ah]
		jnz	short loc_10883
		mov	ax, 0FFFDh
		jmp	short loc_10885
; ---------------------------------------------------------------------------

loc_10883:
		xor	ax, ax

loc_10885:
		pop	si
		pop	bp
		retf
sub_10814	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10888	proc far

var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= dword	ptr  8

		enter	2, 0
		mov	word_350CE, 0
		pushd	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_106F3
		add	sp, 6
		mov	[bp+var_2], ax
		mov	word_350CE, 1
		leave
		retf
sub_10888	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_108AB	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	bx, si
		shl	bx, 2
		mov	ax, [bx+4018h]
		or	ax, [bx+401Ah]
		jz	short loc_108E9
		mov	bx, si
		shl	bx, 2
		pushd	dword ptr [bx+4018h] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	bx, si
		shl	bx, 2
		mov	word ptr [bx+401Ah], 0
		mov	word ptr [bx+4018h], 0
		mov	byte ptr [si+735h], 0

loc_108E9:
		pop	si
		pop	bp
		retf
sub_108AB	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_108EC	proc far

var_4		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	4, 0
		push	si
		push	di
		mov	di, [bp+arg_2]
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, di
		shl	dx, 6
		add	ax, dx
		mov	dx, di
		shl	dx, 4
		add	ax, dx
		mov	si, ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		cwd
		idiv	bx
		shl	ax, 2
		mov	bx, ax
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_4+2], dx
		mov	word ptr [bp+var_4], ax
		xor	cx, cx
		jmp	short loc_109A9
; ---------------------------------------------------------------------------

loc_1093E:
		mov	ax, cx
		shl	ax, 2
		les	bx, [bp+var_4]
		add	bx, ax
		mov	eax, es:[bx+1]
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	es:[bx], eax
		mov	ax, cx
		shl	ax, 2
		les	bx, [bp+var_4]
		add	bx, ax
		mov	eax, es:[bx+81h]
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	es:[bx], eax
		mov	ax, cx
		shl	ax, 2
		les	bx, [bp+var_4]
		add	bx, ax
		mov	eax, es:[bx+101h]
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	es:[bx], eax
		mov	ax, cx
		shl	ax, 2
		les	bx, [bp+var_4]
		add	bx, ax
		mov	eax, es:[bx+181h]
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	es:[bx], eax
		add	si, 50h	; 'P'
		inc	cx

loc_109A9:
		cmp	cx, 20h	; ' '
		jl	short loc_1093E
		pop	di
		pop	si
		leave
		retf
sub_108EC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_109B2	proc far

var_8		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= byte ptr  0Ch

		enter	8, 0
		push	si
		push	di
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		push	ax
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		pop	dx
		add	dx, ax
		mov	di, dx
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		cwd
		idiv	bx
		shl	ax, 2
		mov	bx, ax
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		test	[bp+arg_6], 2
		jz	short loc_10A07
		mov	ax, 10h
		jmp	short loc_10A09
; ---------------------------------------------------------------------------

loc_10A07:
		xor	ax, ax

loc_10A09:
		mov	[bp+var_2], ax
		test	[bp+arg_6], 1
		jz	short loc_10A17
		mov	ax, 10h
		jmp	short loc_10A19
; ---------------------------------------------------------------------------

loc_10A17:
		xor	ax, ax

loc_10A19:
		mov	[bp+var_4], ax
		mov	si, [bp+var_2]
		jmp	short loc_10A97
; ---------------------------------------------------------------------------

loc_10A21:
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+1]
		mov	cl, byte ptr [bp+var_4]
		shr	eax, cl
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx], ax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+81h]
		shr	eax, cl
		les	bx, _VRAM_PLANE_R
		add	bx, di
		mov	es:[bx], ax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+101h]
		shr	eax, cl
		les	bx, _VRAM_PLANE_G
		add	bx, di
		mov	es:[bx], ax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+181h]
		shr	eax, cl
		les	bx, _VRAM_PLANE_E
		add	bx, di
		mov	es:[bx], ax
		add	di, 50h	; 'P'
		inc	si

loc_10A97:
		mov	ax, [bp+var_2]
		add	ax, 10h
		cmp	ax, si
		jg	short loc_10A21
		pop	di
		pop	si
		leave
		retf
sub_109B2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10AA5	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		pushd	[bp+arg_0]
		call	file_ropen
		or	ax, ax
		jnz	short loc_10ABA
		mov	ax, 1
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_10ABA:
		pushd	12h
		push	0
		call	file_seek
		push	ds
		push	offset unk_38988
		push	30h ; '0'
		call	file_read
		push	ds
		push	offset unk_38988
		call	sub_EB10
		add	sp, 4
		call	file_close
		xor	ax, ax
		pop	bp
		retf
sub_10AA5	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10AE4	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		pushd	[bp+arg_0]
		call	file_ropen
		or	ax, ax
		jnz	short loc_10AF9
		mov	ax, 1
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_10AF9:
		pushd	12h
		push	0
		call	file_seek
		push	ds
		push	offset unk_38988
		push	30h ; '0'
		call	file_read
		call	file_close
		xor	ax, ax
		pop	bp
		retf
sub_10AE4	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10B17	proc far

stream		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		les	bx, [bp+stream]
		dec	word ptr es:[bx]
		jl	short loc_10B39
		mov	ax, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		mov	es, ax
		mov	al, es:[si]
		mov	ah, 0
		jmp	short loc_10B45
; ---------------------------------------------------------------------------

loc_10B39:
		pushd	[bp+stream] ; stream
		call	__fgetc
		add	sp, 4

loc_10B45:
		mov	di, ax
		les	bx, [bp+stream]
		dec	word ptr es:[bx]
		jl	short loc_10B64
		mov	ax, es:[bx+0Eh]
		mov	si, es:[bx+0Ch]
		inc	word ptr es:[bx+0Ch]
		mov	es, ax
		mov	al, es:[si]
		mov	ah, 0
		jmp	short loc_10B70
; ---------------------------------------------------------------------------

loc_10B64:
		pushd	[bp+stream] ; stream
		call	__fgetc
		add	sp, 4

loc_10B70:
		shl	ax, 8
		add	di, ax
		mov	ax, di
		pop	di
		pop	si
		pop	bp
		retf
sub_10B17	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10B7B	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		xor	dx, dx
		jmp	short loc_10BA7
; ---------------------------------------------------------------------------

loc_10B82:
		xor	cx, cx
		jmp	short loc_10BA1
; ---------------------------------------------------------------------------

loc_10B86:
		mov	ax, dx
		imul	ax, 3
		les	bx, [bp+arg_0]
		add	bx, ax
		add	bx, cx
		mov	al, es:[bx]
		mov	bx, dx
		imul	bx, 3
		add	bx, cx
		mov	[bx+3FE8h], al
		inc	cx

loc_10BA1:
		cmp	cx, 3
		jl	short loc_10B86
		inc	dx

loc_10BA7:
		cmp	dx, 10h
		jl	short loc_10B82
		pop	bp
		retf
sub_10B7B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10BAE	proc far

var_1		= byte ptr -1
arg_0		= dword	ptr  6

		enter	2, 0
		push	si
		xor	si, si
		push	4000h
		call	@$bnwa$qui
		pop	cx
		mov	word ptr off_38E28+2, dx
		mov	word ptr off_38E28, ax
		cmp	word_350CE, 1
		jnz	short loc_10BCF
		or	si, 2

loc_10BCF:
		cmp	byte_350DD, 1
		jnz	short loc_10BD9
		mov	si, 0F40h

loc_10BD9:
		cmp	word_350D0, 1
		jnz	short loc_10C01
		push	si
		push	640000h
		pushd	4000h
		pushd	[off_38E28]
		pushd	[bp+arg_0]
		call	_PiLoadL
		add	sp, 12h
		mov	[bp+var_1], al

loc_10C01:
		cmp	word_350CE, 1
		jnz	short loc_10C12
		pushd	[bp+arg_0]
		call	sub_10AA5
		jmp	short loc_10C1A
; ---------------------------------------------------------------------------

loc_10C12:
		pushd	[bp+arg_0]
		call	sub_10AE4

loc_10C1A:
		add	sp, 4
		pushd	[off_38E28] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	al, [bp+var_1]
		cbw
		pop	si
		leave
		retf
sub_10BAE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10C31	proc far

var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	2, 0
		mov	word_350CE, 0
		pushd	[bp+arg_0]
		call	sub_10BAE
		add	sp, 4
		mov	[bp+var_2], ax
		mov	word_350CE, 1
		leave
		retf
sub_10C31	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10C51	proc far

var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	2, 0
		mov	word_350D0, 0
		pushd	[bp+arg_0]
		call	sub_10BAE
		add	sp, 4
		mov	[bp+var_2], ax
		mov	word_350D0, 1
		leave
		retf
sub_10C51	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10C71	proc far

var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	2, 0
		mov	byte_350DD, 1
		mov	word_350CE, 0
		pushd	[bp+arg_0]
		call	sub_10BAE
		add	sp, 4
		mov	[bp+var_2], ax
		mov	word_350CE, 1
		mov	byte_350DD, 0
		leave
		retf
sub_10C71	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10C9B	proc far

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	al, [si+4478h]
		mov	ah, 0
		cmp	ax, [bp+arg_2]
		jle	short loc_10CBF
		mov	al, byte ptr [bp+arg_2]
		mov	byte_350DE, al
		push	si
		nopcall	sub_10CDD
		pop	cx
		mov	byte_350DE, 0

loc_10CBF:
		pop	si
		pop	bp
		retf
sub_10C9B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10CC2	proc far

arg_0		= word ptr  6
arg_2		= byte ptr  8

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_2]
		inc	al
		mov	byte_350DF, al
		push	[bp+arg_0]
		nopcall	sub_10CDD
		pop	cx
		mov	byte_350DF, 0
		pop	bp
		retf
sub_10CC2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10CDD	proc far

var_2E		= word ptr -2Eh
var_2C		= word ptr -2Ch
var_29		= byte ptr -29h
var_28		= word ptr -28h
var_25		= byte ptr -25h
var_24		= word ptr -24h
var_21		= byte ptr -21h
var_20		= word ptr -20h
var_1D		= byte ptr -1Dh
var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
var_17		= byte ptr -17h
var_16		= word ptr -16h
var_13		= byte ptr -13h
var_12		= word ptr -12h
var_F		= byte ptr -0Fh
var_E		= word ptr -0Eh
var_B		= byte ptr -0Bh
var_A		= dword	ptr -0Ah
var_6		= dword	ptr -6
var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= word ptr  6

		enter	2Eh, 0
		push	si
		push	di
		mov	di, [bp+arg_0]
		mov	bx, di
		shl	bx, 2
		mov	ax, [bx+403Ah]
		mov	dx, [bx+4038h]
		mov	word ptr [bp+var_6+2], ax
		mov	word ptr [bp+var_6], dx
		mov	bx, di
		shl	bx, 6
		mov	al, byte_350DE
		cbw
		shl	ax, 2
		add	bx, ax
		mov	ax, [bx+407Ah]
		mov	dx, [bx+4078h]
		mov	word ptr [bp+var_A+2], ax
		mov	word ptr [bp+var_A], dx
		cmp	byte_350DF, 0
		jz	short loc_10D28
		mov	al, byte_350DF
		cbw
		dec	ax
		push	ax
		call	_grcg_setcolor_rmw
		pop	cx

loc_10D28:
		xor	si, si
		jmp	loc_10E9E
; ---------------------------------------------------------------------------

loc_10D2D:
		les	bx, [bp+var_6]
		mov	al, es:[bx]
		mov	[bp+var_1], al
		inc	word ptr [bp+var_6]
		cmp	[bp+var_1], 1
		jnz	loc_10E09
		les	bx, [bp+var_6]
		mov	al, es:[bx]
		mov	[bp+var_2], al
		inc	word ptr [bp+var_6]
		cmp	[bp+var_2], 0
		jz	loc_10E09
		les	bx, [bp+var_6]
		mov	al, es:[bx]
		mov	[bp+var_1], al
		inc	word ptr [bp+var_6]
		jmp	loc_10DFD
; ---------------------------------------------------------------------------

loc_10D64:
		cmp	[bp+var_1], 0
		jnz	loc_10DFC
		cmp	byte_350DF, 0
		jnz	short loc_10DEA
		les	bx, [bp+var_A]
		mov	al, es:[bx]
		mov	[bp+var_B], al
		inc	word ptr [bp+var_A]
		mov	[bp+var_E], si
		mov	ax, 0A800h
		mov	bx, [bp+var_E]
		mov	dl, [bp+var_B]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		les	bx, [bp+var_A]
		assume es:nothing
		mov	al, es:[bx]
		mov	[bp+var_F], al
		inc	word ptr [bp+var_A]
		mov	[bp+var_12], si
		mov	ax, 0B000h
		mov	bx, [bp+var_12]
		mov	dl, [bp+var_F]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		les	bx, [bp+var_A]
		assume es:nothing
		mov	al, es:[bx]
		mov	[bp+var_13], al
		inc	word ptr [bp+var_A]
		mov	[bp+var_16], si
		mov	ax, 0B800h
		mov	bx, [bp+var_16]
		mov	dl, [bp+var_13]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		les	bx, [bp+var_A]
		assume es:nothing
		mov	al, es:[bx]
		mov	[bp+var_17], al
		inc	word ptr [bp+var_A]
		mov	[bp+var_1A], si
		inc	si
		mov	ax, 0E000h
		mov	bx, [bp+var_1A]
		mov	dl, [bp+var_17]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		jmp	short loc_10DFD
; ---------------------------------------------------------------------------

loc_10DEA:
		mov	[bp+var_1C], si
		inc	si
		mov	ax, 0A800h
		mov	bx, [bp+var_1C]
		mov	es, ax
		assume es:nothing
		mov	byte ptr es:[bx], 0FFh
		jmp	short loc_10DFD
; ---------------------------------------------------------------------------

loc_10DFC:
		inc	si

loc_10DFD:
		mov	al, [bp+var_2]
		dec	[bp+var_2]
		or	al, al
		jnz	loc_10D64

loc_10E09:
		cmp	[bp+var_1], 0
		jnz	loc_10E9D
		cmp	byte_350DF, 0
		jnz	short loc_10E8E
		les	bx, [bp+var_A]
		assume es:nothing
		mov	al, es:[bx]
		mov	[bp+var_1D], al
		inc	word ptr [bp+var_A]
		mov	[bp+var_20], si
		mov	ax, 0A800h
		mov	bx, [bp+var_20]
		mov	dl, [bp+var_1D]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		les	bx, [bp+var_A]
		assume es:nothing
		mov	al, es:[bx]
		mov	[bp+var_21], al
		inc	word ptr [bp+var_A]
		mov	[bp+var_24], si
		mov	ax, 0B000h
		mov	bx, [bp+var_24]
		mov	dl, [bp+var_21]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		les	bx, [bp+var_A]
		assume es:nothing
		mov	al, es:[bx]
		mov	[bp+var_25], al
		inc	word ptr [bp+var_A]
		mov	[bp+var_28], si
		mov	ax, 0B800h
		mov	bx, [bp+var_28]
		mov	dl, [bp+var_25]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		les	bx, [bp+var_A]
		assume es:nothing
		mov	al, es:[bx]
		mov	[bp+var_29], al
		inc	word ptr [bp+var_A]
		mov	[bp+var_2C], si
		mov	ax, 0E000h
		mov	bx, [bp+var_2C]
		mov	dl, [bp+var_29]
		mov	es, ax
		assume es:nothing
		mov	es:[bx], dl
		jmp	short loc_10E9D
; ---------------------------------------------------------------------------

loc_10E8E:
		mov	[bp+var_2E], si
		mov	ax, 0A800h
		mov	bx, [bp+var_2E]
		mov	es, ax
		assume es:nothing
		mov	byte ptr es:[bx], 0FFh

loc_10E9D:
		inc	si

loc_10E9E:
		cmp	si, 7D00h
		jb	loc_10D2D
		cmp	byte_350DF, 0
		jz	short loc_10EB2
		call	_grcg_off_func

loc_10EB2:
		pop	di
		pop	si
		leave
		retf
sub_10CDD	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_10EB6	proc far

var_A		= word ptr -0Ah
_font		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= dword	ptr  8

		enter	0Ah, 0
		push	si
		push	di
		mov	di, [bp+arg_0]
		pushd	[bp+arg_2]
		call	file_ropen
		or	ax, ax
		jz	loc_10FB1
		push	64h ; 'd'
		call	@$bnwa$qui
		pop	cx
		mov	word ptr [bp+_font+2], dx
		mov	word ptr [bp+_font], ax
		push	dx
		push	ax
		push	40h
		call	file_read
		push	4		; n
		push	ds
		push	offset aHgrx	; "HGRX"
		pushd	[bp+_font]	; s1
		call	_memcmp
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_10F03
		call	file_close
		jmp	loc_10FB1
; ---------------------------------------------------------------------------

loc_10F03:
		les	bx, [bp+_font]
		assume es:nothing
		cmp	byte ptr es:[bx+4], 1
		jnb	short loc_10F15
		call	file_close
		jmp	loc_10FB1
; ---------------------------------------------------------------------------

loc_10F15:
		les	bx, [bp+_font]
		mov	al, es:[bx+4]
		mov	[di+4478h], al
		mov	ax, es:[bx+8]
		mov	[bp+var_2], ax
		mov	ax, es:[bx+0Ah]
		mov	[bp+var_4], ax
		mov	bx, di
		shl	bx, 2
		mov	ax, [bx+4038h]
		or	ax, [bx+403Ah]
		jz	short loc_10F44
		push	di
		nopcall	sub_110ED
		pop	cx

loc_10F44:
		push	[bp+var_2]
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		shl	bx, 2
		mov	[bx+403Ah], dx
		mov	[bx+4038h], ax
		or	ax, dx
		jnz	short loc_10F65
		call	file_close
		jmp	short loc_10FB1
; ---------------------------------------------------------------------------

loc_10F65:
		mov	[bp+var_A], 0
		jmp	short loc_10FB9
; ---------------------------------------------------------------------------

loc_10F6C:
		mov	bx, di
		shl	bx, 6
		mov	ax, [bp+var_A]
		shl	ax, 2
		add	bx, ax
		mov	ax, [bx+4078h]
		or	ax, [bx+407Ah]
		jz	short loc_10F8A
		push	di
		nopcall	sub_110ED
		pop	cx

loc_10F8A:
		push	[bp+var_4]
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		shl	bx, 6
		mov	si, [bp+var_A]
		shl	si, 2
		add	bx, si
		mov	[bx+407Ah], dx
		mov	[bx+4078h], ax
		or	ax, dx
		jnz	short loc_10FB6
		call	file_close

loc_10FB1:
		mov	ax, 1
		jmp	short loc_1101E
; ---------------------------------------------------------------------------

loc_10FB6:
		inc	[bp+var_A]

loc_10FB9:
		les	bx, [bp+_font]
		mov	al, es:[bx+4]
		mov	ah, 0
		cmp	ax, [bp+var_A]
		jg	short loc_10F6C
		mov	bx, di
		shl	bx, 2
		pushd	dword ptr [bx+4038h]
		push	[bp+var_2]
		call	file_read
		mov	[bp+var_A], 0
		jmp	short loc_10FFD
; ---------------------------------------------------------------------------

loc_10FE0:
		mov	bx, di
		shl	bx, 6
		mov	ax, [bp+var_A]
		shl	ax, 2
		add	bx, ax
		pushd	dword ptr [bx+4078h]
		push	[bp+var_4]
		call	file_read
		inc	[bp+var_A]

loc_10FFD:
		les	bx, [bp+_font]
		mov	al, es:[bx+4]
		mov	ah, 0
		cmp	ax, [bp+var_A]
		jg	short loc_10FE0
		push	word ptr [bp+_font+2]
		push	bx		; font
		call	@$bdla$qnv
		add	sp, 4
		call	file_close
		xor	ax, ax

loc_1101E:
		pop	di
		pop	si
		leave
		retf
sub_10EB6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11022	proc far

_font		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= dword	ptr  8

		enter	4, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		pushd	[bp+arg_2]
		call	file_ropen
		or	ax, ax
		jz	loc_110C1
		push	64h ; 'd'
		call	@$bnwa$qui
		pop	cx
		mov	word ptr [bp+_font+2], dx
		mov	word ptr [bp+_font], ax
		push	dx
		push	ax
		push	40h
		call	file_read
		push	4		; n
		push	ds
		push	offset aHgrx	; "HGRX"
		pushd	[bp+_font]	; s1
		call	_memcmp
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_1106E
		call	file_close
		jmp	short loc_110C1
; ---------------------------------------------------------------------------

loc_1106E:
		les	bx, [bp+_font]
		cmp	byte ptr es:[bx+4], 1
		jnb	short loc_1107F
		call	file_close
		jmp	short loc_110C1
; ---------------------------------------------------------------------------

loc_1107F:
		les	bx, [bp+_font]
		mov	al, es:[bx+4]
		mov	[si+4478h], al
		mov	di, es:[bx+8]
		mov	bx, si
		shl	bx, 2
		mov	ax, [bx+4038h]
		or	ax, [bx+403Ah]
		jz	short loc_110A4
		push	si
		nopcall	sub_110ED
		pop	cx

loc_110A4:
		push	di
		call	@$bnwa$qui
		pop	cx
		mov	bx, si
		shl	bx, 2
		mov	[bx+403Ah], dx
		mov	[bx+4038h], ax
		or	ax, dx
		jnz	short loc_110C6
		call	file_close

loc_110C1:
		mov	ax, 1
		jmp	short loc_110E9
; ---------------------------------------------------------------------------

loc_110C6:
		mov	bx, si
		shl	bx, 2
		pushd	dword ptr [bx+4038h]
		push	di
		call	file_read
		pushd	[bp+_font]	; font
		call	@$bdla$qnv
		add	sp, 4
		call	file_close
		xor	ax, ax

loc_110E9:
		pop	di
		pop	si
		leave
		retf
sub_11022	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_110ED	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	bx, si
		shl	bx, 2
		mov	ax, [bx+4038h]
		or	ax, [bx+403Ah]
		jz	short loc_11127
		mov	bx, si
		shl	bx, 2
		pushd	dword ptr [bx+4038h] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	bx, si
		shl	bx, 2
		mov	word ptr [bx+403Ah], 0
		mov	word ptr [bx+4038h], 0

loc_11127:
		xor	di, di
		jmp	short loc_11173
; ---------------------------------------------------------------------------

loc_1112B:
		mov	bx, si
		shl	bx, 6
		mov	ax, di
		shl	ax, 2
		add	bx, ax
		mov	ax, [bx+4078h]
		or	ax, [bx+407Ah]
		jz	short loc_11172
		mov	bx, si
		shl	bx, 6
		mov	ax, di
		shl	ax, 2
		add	bx, ax
		pushd	dword ptr [bx+4078h] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	bx, si
		shl	bx, 6
		mov	ax, di
		shl	ax, 2
		add	bx, ax
		mov	word ptr [bx+407Ah], 0
		mov	word ptr [bx+4078h], 0

loc_11172:
		inc	di

loc_11173:
		cmp	di, 10h
		jl	short loc_1112B
		pop	di
		pop	si
		pop	bp
		retf
sub_110ED	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1117C	proc far

var_E		= dword	ptr -0Eh
var_9		= byte ptr -9
s1		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= dword	ptr  8
arg_6		= word ptr  0Ch

		enter	0Eh, 0
		push	si
		push	di
		pushd	[bp+arg_2]
		call	file_ropen
		or	ax, ax
		jz	loc_112D5
		push	64h ; 'd'
		call	@$bnwa$qui
		pop	cx
		mov	word ptr [bp+s1+2], dx
		mov	word ptr [bp+s1], ax
		push	dx
		push	ax
		push	60h
		call	file_read
		push	4		; n
		push	ds
		push	offset aHgrz	; "HGRZ"
		pushd	[bp+s1]	; s1
		call	_memcmp
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_111C6
		call	file_close
		jmp	loc_112D5
; ---------------------------------------------------------------------------

loc_111C6:
		les	bx, [bp+s1]
		mov	al, es:[bx+4]
		mov	[bp+var_9], al
		mov	ah, 0
		cmp	ax, [bp+arg_6]
		jle	loc_11327
		mov	ax, [bp+arg_6]
		shl	ax, 2
		add	ax, 8
		mov	di, ax
		add	bx, di
		mov	eax, es:[bx]
		mov	[bp+var_E], eax
		push	eax
		push	0
		call	file_seek
		pushd	[bp+s1]
		push	40h
		call	file_read
		push	4		; n
		push	ds
		push	offset aHgrx	; "HGRX"
		pushd	[bp+s1]	; s1
		call	_memcmp
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_11220
		call	file_close
		jmp	loc_112D5
; ---------------------------------------------------------------------------

loc_11220:
		les	bx, [bp+s1]
		cmp	byte ptr es:[bx+4], 1
		jnb	short loc_11232
		call	file_close
		jmp	loc_112D5
; ---------------------------------------------------------------------------

loc_11232:
		les	bx, [bp+s1]
		mov	al, es:[bx+4]
		mov	bx, [bp+arg_0]
		mov	[bx+4478h], al
		mov	bx, word ptr [bp+s1]
		mov	ax, es:[bx+8]
		mov	[bp+var_2], ax
		mov	ax, es:[bx+0Ah]
		mov	[bp+var_4], ax
		mov	bx, [bp+arg_0]
		shl	bx, 2
		mov	ax, [bx+4038h]
		or	ax, [bx+403Ah]
		jz	short loc_11269
		push	[bp+arg_0]
		call	sub_110ED
		pop	cx

loc_11269:
		push	[bp+var_2]
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_0]
		shl	bx, 2
		mov	[bx+403Ah], dx
		mov	[bx+4038h], ax
		or	ax, dx
		jnz	short loc_1128B
		call	file_close
		jmp	short loc_112D5
; ---------------------------------------------------------------------------

loc_1128B:
		xor	di, di
		jmp	short loc_112DB
; ---------------------------------------------------------------------------

loc_1128F:
		mov	bx, [bp+arg_0]
		shl	bx, 6
		mov	ax, di
		shl	ax, 2
		add	bx, ax
		mov	ax, [bx+4078h]
		or	ax, [bx+407Ah]
		jz	short loc_112AE
		push	[bp+arg_0]
		call	sub_110ED
		pop	cx

loc_112AE:
		push	[bp+var_4]
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_0]
		shl	bx, 6
		mov	si, di
		shl	si, 2
		add	bx, si
		mov	[bx+407Ah], dx
		mov	[bx+4078h], ax
		or	ax, dx
		jnz	short loc_112DA
		call	file_close

loc_112D5:
		mov	ax, 1
		jmp	short loc_1133A
; ---------------------------------------------------------------------------

loc_112DA:
		inc	di

loc_112DB:
		les	bx, [bp+s1]
		mov	al, es:[bx+4]
		mov	ah, 0
		cmp	ax, di
		jg	short loc_1128F
		mov	bx, [bp+arg_0]
		shl	bx, 2
		pushd	dword ptr [bx+4038h]
		push	[bp+var_2]
		call	file_read
		xor	di, di
		jmp	short loc_1131A
; ---------------------------------------------------------------------------

loc_112FF:
		mov	bx, [bp+arg_0]
		shl	bx, 6
		mov	ax, di
		shl	ax, 2
		add	bx, ax
		pushd	dword ptr [bx+4078h]
		push	[bp+var_4]
		call	file_read
		inc	di

loc_1131A:
		les	bx, [bp+s1]
		mov	al, es:[bx+4]
		mov	ah, 0
		cmp	ax, di
		jg	short loc_112FF

loc_11327:
		pushd	[bp+s1]	; font
		call	@$bdla$qnv

loc_11330:
		add	sp, 4

loc_11333:
		call	file_close
		xor	ax, ax

loc_1133A:
		pop	di
		pop	si
		leave
		retf
sub_1117C	endp

main_08_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_09_TEXT	segment	byte public 'CODE' use16
		assume cs:main_09_TEXT
		;org 0Eh
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1133E	proc far

arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	di, ax
		push	[bp+arg_4]
		call	_grcg_setcolor_rmw
		pop	cx
		xor	si, si
		jmp	short loc_11398
; ---------------------------------------------------------------------------

loc_11368:
		mov	bx, [bp+arg_6]
		shl	bx, 5
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr [bx+0BFEh], 0
		jz	short loc_11394
		mov	bx, [bp+arg_6]
		shl	bx, 5
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, [bx+0BFEh]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx], ax

loc_11394:
		inc	si
		add	di, 50h	; 'P'

loc_11398:
		cmp	si, 10h
		jl	short loc_11368
		call	_grcg_off_func
		pop	di
		pop	si
		pop	bp
		retf
sub_1133E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_113A6	proc far

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	8, 0
		push	si
		push	di
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	si, ax
		push	[bp+arg_4]
		push	0
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	sub_1133E
		add	sp, 8
		xor	di, di
		jmp	loc_114BE
; ---------------------------------------------------------------------------

loc_113DB:
		mov	bx, [bp+arg_4]
		shl	bx, 5
		mov	ax, di
		add	ax, ax
		add	bx, ax
		cmp	word ptr [bx+0BFEh], 0
		jnz	short loc_113F1
		jmp	loc_114BA
; ---------------------------------------------------------------------------

loc_113F1:
		push	1
		call	_graph_accesspage_func
		mov	bx, [bp+arg_4]
		shl	bx, 5
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, [bx+0BFEh]
		les	bx, _VRAM_PLANE_B
		add	bx, si
		and	ax, es:[bx]
		mov	[bp+var_8], ax
		mov	bx, [bp+arg_4]
		shl	bx, 5
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, [bx+0BFEh]
		les	bx, _VRAM_PLANE_R
		add	bx, si
		and	ax, es:[bx]
		mov	[bp+var_6], ax
		mov	bx, [bp+arg_4]
		shl	bx, 5
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, [bx+0BFEh]
		les	bx, _VRAM_PLANE_G
		add	bx, si
		and	ax, es:[bx]
		mov	[bp+var_4], ax
		mov	bx, [bp+arg_4]
		shl	bx, 5
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, [bx+0BFEh]
		les	bx, _VRAM_PLANE_E
		add	bx, si
		and	ax, es:[bx]
		mov	[bp+var_2], ax
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		cmp	[bp+var_8], 0
		jz	short loc_11484
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	ax, [bp+var_8]
		or	es:[bx], ax

loc_11484:
		cmp	[bp+var_6], 0
		jz	short loc_11496
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	ax, [bp+var_6]
		or	es:[bx], ax

loc_11496:
		cmp	[bp+var_4], 0
		jz	short loc_114A8
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	ax, [bp+var_4]
		or	es:[bx], ax

loc_114A8:
		cmp	[bp+var_2], 0
		jz	short loc_114BA
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	ax, [bp+var_2]
		or	es:[bx], ax

loc_114BA:
		inc	di
		add	si, 50h	; 'P'

loc_114BE:
		cmp	di, 10h
		jge	short loc_114C6

loc_114C3:
		jmp	loc_113DB
; ---------------------------------------------------------------------------

loc_114C6:
		pop	di
		pop	si
		leave
		retf
sub_113A6	endp

main_09_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_10_TEXT	segment	byte public 'CODE' use16
		assume cs:main_10_TEXT
		;org 0Ah
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_114CA	proc far

@@left		= word ptr  6
@@top		= word ptr  8
@@right		= word ptr  0Ah
@@bottom		= word ptr  0Ch

		push	bp
		mov	bp, sp
		call	_graph_r_line_from_1 c, [bp+@@left], [bp+@@top], [bp+@@right], [bp+@@bottom]
		pop	bp
		retf
sub_114CA	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_114E3	proc far

@@left		= word ptr  6
@@top		= word ptr  8
@@right		= word ptr  0Ah
@@bottom		= word ptr  0Ch
@@col		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	si, [bp+@@right]
		mov	di, [bp+@@bottom]
		call	_graph_r_line c, [bp+@@left], [bp+@@top], si, di, [bp+@@col]
		cmp	si, x_36C26
		jle	short loc_11523
		mov	ax, x_36C26
		add	ax, 32
		cmp	ax, si
		jle	short loc_11523
		cmp	di, 384
		jle	short loc_11523
		cmp	word_34A78, 0
		jnz	short loc_11523
		mov	_player_is_hit, 1

loc_11523:
		pop	di
		pop	si
		pop	bp
		retf
sub_114E3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11527	proc far

@@left		= word ptr  6
@@top		= word ptr  8
@@right		= word ptr  0Ah
@@bottom		= word ptr  0Ch
@@col		= word ptr  0Eh
@@pattern		= word ptr  10h

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	si, [bp+@@right]
		mov	di, [bp+@@bottom]
		call	_graph_r_line_patterned c, [bp+@@left], [bp+@@top], si, di, [bp+@@col], [bp+@@pattern]
		cmp	si, x_36C26
		jle	short loc_1156A
		mov	ax, x_36C26
		add	ax, 32
		cmp	ax, si
		jle	short loc_1156A
		cmp	di, 384
		jle	short loc_1156A

loc_1155E:
		cmp	word_34A78, 0

loc_11563:
		jnz	short loc_1156A
		mov	_player_is_hit, 1

loc_1156A:
		pop	di
		pop	si
		pop	bp
		retf
sub_11527	endp

main_10_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_11_TEXT	segment	byte public 'CODE' use16
		assume cs:main_11_TEXT
		;org 0Eh
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1156E	proc far

var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= dword	ptr  0Ah

		enter	2, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	cx, [bp+arg_2]
		mov	ax, si
		sar	ax, 3
		mov	dx, cx
		shl	dx, 6
		add	ax, dx
		mov	dx, cx
		shl	dx, 4
		add	ax, dx
		mov	di, ax
		or	si, si
		jl	short loc_115A3
		or	cx, cx
		jl	short loc_115A3
		cmp	si, 260h
		jge	short loc_115A3
		cmp	cx, 170h
		jl	short loc_115A8

loc_115A3:
		mov	ax, 1
		jmp	short loc_115CB
; ---------------------------------------------------------------------------

loc_115A8:
		mov	[bp+var_2], 0
		jmp	short loc_115C3
; ---------------------------------------------------------------------------

loc_115AF:
		les	bx, [bp+arg_4]
		add	bx, di
		xor	word ptr es:[bx], 0FFFFh
		xor	word ptr es:[bx+2], 0FFFFh
		inc	[bp+var_2]

loc_115C0:
		add	di, 50h	; 'P'

loc_115C3:
		cmp	[bp+var_2], 20h	; ' '
		jl	short loc_115AF
		xor	ax, ax

loc_115CB:
		pop	di
		pop	si
		leave
		retf
sub_1156E	endp

main_11_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_12_TEXT	segment	byte public 'CODE' use16
	extern _resident_stuff_get:proc
main_12_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_13_TEXT	segment	byte public 'CODE' use16
		assume cs:main_13_TEXT
		;org 8
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11738	proc far

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	6, 0
		push	si
		push	di
		mov	cx, [bp+arg_0]
		mov	bx, 190h
		mov	ax, cx
		cwd
		idiv	bx
		mov	cx, dx
		mov	ax, cx
		imul	ax, 28h
		mov	si, ax
		mov	ax, 190h
		sub	ax, cx
		shl	ax, 4
		mov	di, ax
		mov	[bp+var_2], 0
		mov	ax, cx
		shl	ax, 4
		mov	[bp+var_4], ax
		xor	ax, ax
		mov	es, ax
		test	byte ptr es:[054Dh], 4
		jnz	short loc_1177C
		mov	[bp+var_6], 0
		jmp	short loc_11781
; ---------------------------------------------------------------------------

loc_1177C:
		mov	[bp+var_6], 40h

loc_11781:
		mov	dx, 0A0h
		in	al, dx		; PIC 2	 same as 0020 for PIC 1
		test	al, 20h
		jnz	short loc_11781

loc_11789:
		mov	dx, 0A0h
		in	al, dx		; PIC 2	 same as 0020 for PIC 1
		test	al, 20h
		jz	short loc_11789

loc_11791:
		mov	dx, 0A0h
		in	al, dx		; PIC 2	 same as 0020 for PIC 1
		test	al, 4
		jz	short loc_11791
		mov	dx, 0A2h ; '｢'
		mov	ax, 70h	; 'p'
		out	dx, ax
		mov	ax, si
		mov	bx, 100h
		cwd
		idiv	bx
		push	dx
		mov	dx, 0A0h
		pop	ax
		out	dx, al		; PIC 2	 same as 0020 for PIC 1
		mov	ax, si
		mov	bx, 100h
		cwd
		idiv	bx
		mov	dx, 0A0h
		out	dx, al		; PIC 2	 same as 0020 for PIC 1
		mov	ax, di
		mov	bx, 100h
		cwd
		idiv	bx
		push	dx
		mov	dx, 0A0h
		pop	ax
		out	dx, al		; PIC 2	 same as 0020 for PIC 1
		mov	ax, di
		mov	bx, 100h
		cwd
		idiv	bx
		add	al, byte ptr [bp+var_6]
		mov	dx, 0A0h
		out	dx, al		; PIC 2	 same as 0020 for PIC 1
		mov	ax, [bp+var_2]
		mov	bx, 100h
		cwd
		idiv	bx
		push	dx
		mov	dx, 0A0h
		pop	ax
		out	dx, al		; PIC 2	 same as 0020 for PIC 1
		mov	ax, [bp+var_2]
		mov	bx, 100h
		cwd
		idiv	bx
		mov	dx, 0A0h
		out	dx, al		; PIC 2	 same as 0020 for PIC 1
		mov	ax, [bp+var_4]
		mov	bx, 100h
		cwd
		idiv	bx
		push	dx
		mov	dx, 0A0h
		pop	ax
		out	dx, al		; PIC 2	 same as 0020 for PIC 1
		mov	ax, [bp+var_4]
		mov	bx, 100h
		cwd
		idiv	bx
		add	al, byte ptr [bp+var_6]
		mov	dx, 0A0h
		out	dx, al		; PIC 2	 same as 0020 for PIC 1
		pop	di
		pop	si
		leave
		retf
sub_11738	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11816	proc far

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8

		enter	4, 0
		push	si
		push	di
		mov	ax, [bp+arg_0]
		imul	ax, 50h
		mov	si, ax
		call	egc_on
		EGC_SETUP_COPY
		xor	di, di
		jmp	short loc_11894
; ---------------------------------------------------------------------------

loc_11857:
		mov	[bp+var_2], 0
		jmp	short loc_1188D
; ---------------------------------------------------------------------------

loc_1185E:
		push	1
		call	_graph_accesspage_func
		les	bx, _VRAM_PLANE_B
		assume es:nothing
		add	bx, si
		mov	ax, es:[bx]
		mov	[bp+var_4], ax
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	ax, [bp+var_4]
		mov	es:[bx], ax
		inc	[bp+var_2]
		add	si, 2

loc_1188D:
		cmp	[bp+var_2], 28h	; '('
		jl	short loc_1185E
		inc	di

loc_11894:
		cmp	di, [bp+arg_2]
		jl	short loc_11857
		call	egc_off
		pop	di
		pop	si
		leave
		retf
sub_11816	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_118A2	proc far

var_52		= byte ptr -52h
var_2		= byte ptr -2
var_1		= byte ptr -1
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	52h, 0
		push	si
		push	di
		mov	di, [bp+arg_4]
		lea	ax, [bp+var_52]
		push	ss
		push	ax
		push	ds
		push	offset unk_355EC
		mov	cx, 50h	; 'P'
		call	SCOPY@
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_2]
		imul	dx, 50h
		add	ax, dx
		mov	si, ax
		mov	[bp+var_2], 0
		jmp	loc_11A6C
; ---------------------------------------------------------------------------

loc_118D6:
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	bx, di
		shl	bx, 3
		mov	al, [bp+var_2]
		cbw
		add	bx, ax
		lea	ax, [bp+var_52]
		add	bx, ax
		mov	al, ss:[bx]
		not	al
		les	bx, _VRAM_PLANE_B
		add	bx, si
		and	al, es:[bx]
		mov	[bp+var_1], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	bx, di
		shl	bx, 3
		mov	al, [bp+var_2]
		cbw
		add	bx, ax
		lea	ax, [bp+var_52]
		add	bx, ax
		mov	al, ss:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, si
		and	al, es:[bx]
		or	[bp+var_1], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	al, [bp+var_1]
		mov	es:[bx], al
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	bx, di
		shl	bx, 3
		mov	al, [bp+var_2]
		cbw
		add	bx, ax
		lea	ax, [bp+var_52]
		add	bx, ax
		mov	al, ss:[bx]
		not	al
		les	bx, _VRAM_PLANE_R
		add	bx, si
		and	al, es:[bx]
		mov	[bp+var_1], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	bx, di
		shl	bx, 3
		mov	al, [bp+var_2]
		cbw
		add	bx, ax
		lea	ax, [bp+var_52]
		add	bx, ax
		mov	al, ss:[bx]
		les	bx, _VRAM_PLANE_R
		add	bx, si
		and	al, es:[bx]
		or	[bp+var_1], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	al, [bp+var_1]
		mov	es:[bx], al
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	bx, di
		shl	bx, 3
		mov	al, [bp+var_2]
		cbw
		add	bx, ax
		lea	ax, [bp+var_52]
		add	bx, ax
		mov	al, ss:[bx]
		not	al
		les	bx, _VRAM_PLANE_G
		add	bx, si
		and	al, es:[bx]
		mov	[bp+var_1], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	bx, di
		shl	bx, 3
		mov	al, [bp+var_2]
		cbw
		add	bx, ax
		lea	ax, [bp+var_52]
		add	bx, ax
		mov	al, ss:[bx]
		les	bx, _VRAM_PLANE_G
		add	bx, si
		and	al, es:[bx]
		or	[bp+var_1], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	al, [bp+var_1]
		mov	es:[bx], al
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	bx, di
		shl	bx, 3
		mov	al, [bp+var_2]
		cbw
		add	bx, ax
		lea	ax, [bp+var_52]
		add	bx, ax
		mov	al, ss:[bx]
		not	al
		les	bx, _VRAM_PLANE_E
		add	bx, si
		and	al, es:[bx]
		mov	[bp+var_1], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	bx, di
		shl	bx, 3
		mov	al, [bp+var_2]
		cbw
		add	bx, ax
		lea	ax, [bp+var_52]
		add	bx, ax
		mov	al, ss:[bx]
		les	bx, _VRAM_PLANE_E
		add	bx, si
		and	al, es:[bx]
		or	[bp+var_1], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	al, [bp+var_1]
		mov	es:[bx], al
		add	si, 50h	; 'P'
		inc	[bp+var_2]

loc_11A6C:
		mov	al, [bp+var_2]
		cbw
		cmp	ax, 8
		jge	short loc_11A78
		jmp	loc_118D6
; ---------------------------------------------------------------------------

loc_11A78:
		pop	di
		pop	si
		leave
		retf
sub_118A2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11A7C	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	ds
		push	offset _z_Palettes
		push	ds
		push	offset _z_Palettes
		push	[bp+arg_0]
		nopcall	sub_11A94
		add	sp, 0Ah
		pop	bp
		retf
sub_11A7C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_11A94	proc far

var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= dword	ptr  8
arg_6		= dword	ptr  0Ch

		enter	0Eh, 0
		push	si
		push	di
		mov	[bp+var_2], 0
		mov	[bp+var_4], 0
		mov	[bp+var_6], 278h
		mov	[bp+var_8], 188h
		mov	[bp+var_E], 0
		jmp	loc_11BFE
; ---------------------------------------------------------------------------

loc_11AB6:
		mov	ax, [bp+var_2]
		mov	[bp+var_A], ax
		mov	ax, [bp+var_4]
		mov	[bp+var_C], ax
		jmp	short loc_11ADB
; ---------------------------------------------------------------------------

loc_11AC4:
		push	1
		push	[bp+var_4]
		push	[bp+var_2]
		call	sub_118A2
		add	sp, 6
		sub	[bp+var_2], 8
		add	[bp+var_4], 8

loc_11ADB:
		cmp	[bp+var_2], 0
		jl	short loc_11AE8
		cmp	[bp+var_4], 18Fh
		jle	short loc_11AC4

loc_11AE8:
		cmp	[bp+var_A], 278h
		jge	short loc_11AF7
		mov	ax, [bp+var_A]
		add	ax, 8
		jmp	short loc_11AFA
; ---------------------------------------------------------------------------

loc_11AF7:
		mov	ax, [bp+var_A]

loc_11AFA:
		mov	[bp+var_2], ax
		cmp	[bp+var_A], 278h
		jge	short loc_11B08
		xor	ax, ax
		jmp	short loc_11B0E
; ---------------------------------------------------------------------------

loc_11B08:
		mov	ax, [bp+var_C]
		add	ax, 8

loc_11B0E:
		mov	[bp+var_4], ax
		mov	ax, [bp+var_E]
		mov	bx, 8
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_11B98
		xor	di, di
		jmp	short loc_11B85
; ---------------------------------------------------------------------------

loc_11B22:
		xor	si, si
		jmp	short loc_11B7F
; ---------------------------------------------------------------------------

loc_11B26:
		mov	ax, di
		imul	ax, 3
		les	bx, [bp+arg_2]
		add	bx, ax
		mov	al, es:[bx+si]
		mov	dx, di
		imul	dx, 3
		les	bx, [bp+arg_6]
		add	bx, dx
		cmp	al, es:[bx+si]
		jz	short loc_11B7E
		mov	ax, di
		imul	ax, 3
		les	bx, [bp+arg_2]
		add	bx, ax
		mov	al, es:[bx+si]
		mov	dx, di
		imul	dx, 3
		les	bx, [bp+arg_6]
		add	bx, dx
		cmp	al, es:[bx+si]
		jle	short loc_11B62
		mov	al, 0FFh
		jmp	short loc_11B64
; ---------------------------------------------------------------------------

loc_11B62:
		mov	al, 1

loc_11B64:
		mov	dx, di
		imul	dx, 3
		les	bx, [bp+arg_2]
		add	bx, dx
		add	al, es:[bx+si]
		mov	dx, di
		imul	dx, 3
		les	bx, [bp+arg_2]
		add	bx, dx
		mov	es:[bx+si], al

loc_11B7E:
		inc	si

loc_11B7F:
		cmp	si, 3
		jl	short loc_11B26
		inc	di

loc_11B85:
		cmp	di, 10h
		jl	short loc_11B22
		push	word ptr [bp+arg_2+2]
		push	word ptr [bp+arg_2]
		call	sub_EB10
		add	sp, 4

loc_11B98:
		mov	ax, [bp+var_6]
		mov	[bp+var_A], ax
		mov	ax, [bp+var_8]
		mov	[bp+var_C], ax
		jmp	short loc_11BBD
; ---------------------------------------------------------------------------

loc_11BA6:
		push	2
		push	[bp+var_8]
		push	[bp+var_6]
		call	sub_118A2
		add	sp, 6
		sub	[bp+var_6], 8
		add	[bp+var_8], 8

loc_11BBD:
		cmp	[bp+var_6], 0
		jl	short loc_11BCA
		cmp	[bp+var_8], 18Fh
		jle	short loc_11BA6

loc_11BCA:
		cmp	[bp+var_C], 0
		jle	short loc_11BD5
		mov	ax, 278h
		jmp	short loc_11BDB
; ---------------------------------------------------------------------------

loc_11BD5:
		mov	ax, [bp+var_A]
		add	ax, 0FFF8h

loc_11BDB:
		mov	[bp+var_6], ax
		cmp	[bp+var_C], 0
		jle	short loc_11BEC
		mov	ax, [bp+var_C]
		add	ax, 0FFF8h
		jmp	short loc_11BEF
; ---------------------------------------------------------------------------

loc_11BEC:
		mov	ax, [bp+var_C]

loc_11BEF:
		mov	[bp+var_8], ax
		push	[bp+arg_0]
		call	_delay
		pop	cx
		inc	[bp+var_E]

loc_11BFE:
		cmp	[bp+var_E], 82h
		jge	short loc_11C08
		jmp	loc_11AB6
; ---------------------------------------------------------------------------

loc_11C08:
		pop	di
		pop	si
		leave
		retf
sub_11A94	endp

	extern _graph_slow_2xscale_rect_1_to_0:proc
	extern _graph_copy_hline_mask_1_to_0:proc
	extern _egc_copy_wave_1_to_0:proc
main_13_TEXT	ends

; ===========================================================================

main_14_TEXT	segment	byte public 'CODE' use16
	extern _vector_between:proc
	extern _vector:proc
main_14_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_15_TEXT	segment	byte public 'CODE' use16
		assume cs:main_15_TEXT
		;org 0Dh
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1209D	proc far

var_1		= byte ptr -1
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= byte ptr  14h
arg_10		= word ptr  16h
arg_12		= word ptr  18h

		enter	2, 0
		push	si
		push	di
		mov	di, [bp+arg_4]
		mov	si, [bp+arg_C]
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+3Ah], 0
		jnz	loc_121A8
		movsx	eax, di
		shl	eax, 8
		les	bx, [bp+arg_0]
		mov	es:[bx], eax
		movsx	eax, [bp+arg_6]
		shl	eax, 8
		mov	es:[bx+4], eax
		mov	eax, es:[bx]
		mov	es:[bx+8], eax
		mov	eax, es:[bx+4]
		mov	es:[bx+0Ch], eax
		mov	ax, [bp+arg_8]
		mov	es:[bx+1Ch], ax
		mov	ax, [bp+arg_A]
		mov	es:[bx+1Eh], ax
		mov	word ptr es:[bx+20h], 0FF00h
		sub	ax, [bp+arg_6]
		push	ax
		mov	ax, [bp+arg_8]
		sub	ax, di
		push	ax
		call	iatan2
		mov	[bp+var_1], al
		mov	ah, 0
		and	ax, 0FFh
		add	ax, ax
		mov	bx, ax
		movsx	eax, _CosTable8[bx]
		les	bx, [bp+arg_0]
		mov	es:[bx+32h], eax
		mov	al, [bp+var_1]
		mov	ah, 0
		and	ax, 0FFh
		add	ax, ax
		mov	bx, ax
		movsx	eax, _SinTable8[bx]
		mov	bx, word ptr [bp+arg_0]
		mov	es:[bx+2Ah], eax
		movsx	eax, si
		imul	eax, es:[bx+32h]
		sar	eax, 3
		mov	es:[bx+2Eh], eax
		movsx	eax, si
		imul	eax, es:[bx+2Ah]
		sar	eax, 3
		mov	es:[bx+26h], eax
		mov	ax, si
		mov	bx, 8
		cwd
		idiv	bx
		mov	bx, word ptr [bp+arg_0]
		mov	es:[bx+36h], ax
		dec	[bp+arg_12]
		mov	al, byte ptr [bp+arg_12]
		mov	es:[bx+41h], al
		mov	word ptr es:[bx+3Ah], 1
		mov	byte ptr es:[bx+42h], 1
		mov	ax, [bp+arg_10]
		mov	es:[bx+3Eh], ax
		mov	word ptr es:[bx+3Ch], 0
		mov	al, [bp+arg_E]
		mov	es:[bx+40h], al
		mov	ax, es:[bx+36h]
		mov	es:[bx+1Ah], ax
		mov	word ptr es:[bx+18h], 0

loc_121A8:
		pop	di
		pop	si
		leave
		retf
sub_1209D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_121AC	proc far

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	0Ah, 0
		push	si
		push	di
		les	bx, [bp+arg_0]
		mov	eax, es:[bx+10h]
		sar	eax, 8
		mov	si, ax
		mov	eax, es:[bx+14h]
		sar	eax, 8
		mov	di, ax
		mov	al, es:[bx+41h]
		mov	ah, 0
		shl	ax, 3
		mov	[bp+var_6], ax
		mov	[bp+var_8], 0
		cmp	byte ptr es:[bx+44h], 0
		jz	short loc_121F9
		mov	ax, es:[bx+18h]
		mov	[bp+var_A], ax
		mov	al, es:[bx+40h]
		mov	ah, 0
		push	ax
		call	_grcg_setcolor_rmw
		pop	cx
		jmp	short loc_12203
; ---------------------------------------------------------------------------

loc_121F9:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ah]
		mov	[bp+var_A], ax

loc_12203:
		mov	[bp+var_2], 0
		jmp	loc_1232A
; ---------------------------------------------------------------------------

loc_1220B:
		mov	ax, si
		sar	ax, 3
		cwde
		les	bx, [bp+arg_0]
		mov	edx, es:[bx+10h]
		sar	edx, 0Bh
		cmp	eax, edx
		jnz	short loc_12237
		movsx	eax, di
		mov	edx, es:[bx+14h]
		sar	edx, 8
		cmp	eax, edx
		jz	loc_122C7

loc_12237:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+44h], 0
		jz	short loc_12299
		mov	ax, si
		sar	ax, 3
		mov	dx, di
		shl	dx, 6
		add	ax, dx
		mov	dx, di
		shl	dx, 4
		add	ax, dx
		mov	[bp+var_4], ax
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_4]
		mov	ax, [bp+var_8]
		mov	es:[bx], ax
		mov	[bp+var_8], 0
		cmp	word_34A78, 0
		jnz	short loc_12299
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+42h], 0
		jz	short loc_12299
		cmp	di, 178h
		jle	short loc_12299
		mov	ax, x_36C26
		add	ax, 4
		cmp	ax, si
		jg	short loc_12299
		mov	ax, x_36C26
		add	ax, 24
		cmp	ax, si
		jle	short loc_12299
		mov	_player_is_hit, 1

loc_12299:
		les	bx, [bp+arg_0]
		mov	eax, es:[bx+10h]
		sar	eax, 8
		mov	si, ax
		mov	eax, es:[bx+14h]
		sar	eax, 8
		mov	di, ax
		cmp	si, 27Eh
		jg	short loc_12334
		or	si, si
		jl	short loc_12334
		cmp	di, 40h
		jl	short loc_12334
		cmp	di, 18Fh
		jg	short loc_12334

loc_122C7:
		les	bx, [bp+arg_0]
		mov	eax, es:[bx+10h]
		sar	eax, 8
		and	ax, 7
		add	ax, [bp+var_6]
		add	ax, ax
		mov	bx, ax
		mov	ax, [bx+0C9Eh]
		or	[bp+var_8], ax
		mov	bx, word ptr [bp+arg_0]
		cmp	byte ptr es:[bx+44h], 0
		jnz	short loc_12310
		push	10010h
		mov	eax, es:[bx+14h]
		sar	eax, 8
		push	ax
		mov	eax, es:[bx+10h]
		sar	eax, 8
		push	ax
		call	_egc_copy_rect_1_to_0
		add	sp, 8

loc_12310:
		les	bx, [bp+arg_0]
		mov	eax, es:[bx+32h]
		add	es:[bx+10h], eax
		mov	eax, es:[bx+2Ah]
		add	es:[bx+14h], eax
		inc	[bp+var_2]

loc_1232A:
		mov	ax, [bp+var_2]
		cmp	ax, [bp+var_A]
		jb	loc_1220B

loc_12334:
		les	bx, [bp+arg_0]
		cmp	byte ptr es:[bx+44h], 0
		jz	short loc_12343
		call	_grcg_off_func

loc_12343:
		pop	di
		pop	si
		leave
		retf
sub_121AC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12347	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+3Ah], 0
		jz	loc_12408
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+3Ch]
		cmp	ax, es:[bx+3Eh]
		jl	short loc_123D2
		mov	eax, es:[bx+8]
		mov	es:[bx+10h], eax
		mov	eax, es:[bx+0Ch]
		mov	es:[bx+14h], eax
		mov	byte ptr es:[bx+44h], 0
		push	word ptr [bp+arg_0+2]
		push	bx
		call	sub_121AC
		add	sp, 4
		les	bx, [bp+arg_0]
		mov	eax, es:[bx+10h]
		mov	es:[bx+8], eax
		mov	eax, es:[bx+14h]
		mov	es:[bx+0Ch], eax
		cmp	dword ptr es:[bx+8], 28000h
		jge	short loc_123C7
		cmp	dword ptr es:[bx+8], 0
		jl	short loc_123C7
		cmp	dword ptr es:[bx+0Ch], 4000h
		jl	short loc_123C7
		cmp	dword ptr es:[bx+0Ch], 19000h
		jl	short loc_123DD

loc_123C7:
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+3Ah], 0
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_123D2:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+36h]
		add	es:[bx+18h], ax

loc_123DD:
		les	bx, [bp+arg_0]
		inc	word ptr es:[bx+3Ch]
		mov	eax, es:[bx+8]
		mov	es:[bx+10h], eax
		mov	eax, es:[bx+0Ch]
		mov	es:[bx+14h], eax
		mov	byte ptr es:[bx+44h], 1
		push	word ptr [bp+arg_0+2]
		push	bx
		call	sub_121AC
		add	sp, 4

loc_12408:
		pop	bp
		retf
sub_12347	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1240A	proc far
		push	bp
		mov	bp, sp
		push	seg main_15_TEXT
		push	offset sub_12428
		push	5
		pushd	0Ah
		push	45h ; 'E'
		push	ds
		push	offset unk_391A0
		call	@_vector_new_$qnvuiuluie ; _vector_new_(void *,uint,ulong,uint,...)
		add	sp, 10h
		pop	bp
		retf
sub_1240A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12428	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	short loc_12444
		push	45h ; 'E'
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	short loc_1244D

loc_12444:
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+3Ah], 0

loc_1244D:
		mov	dx, word ptr [bp+arg_0+2]

loc_12450:
		mov	ax, word ptr [bp+arg_0]
		pop	bp

locret_12454:
		retf
sub_12428	endp

main_15_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_16_TEXT	segment	byte public 'CODE' use16
	extern _mdrv2_resident:proc
	extern _mdrv2_bgm_load:proc
	extern _mdrv2_se_load:proc
	extern _mdrv2_bgm_play:proc
	extern _mdrv2_bgm_stop:proc
	extern _mdrv2_bgm_fade_out_nonblock:proc
	extern _mdrv2_bgm_fade_out_block:proc
	extern _mdrv2_bgm_fade_in:proc
	extern _mdrv2_check_board:proc
	extern _mdrv2_se_play:proc
main_16_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_17_TEXT	segment	byte public 'CODE' use16
		assume cs:main_17_TEXT
		;org 5
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_125E5	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	ax, [bp+arg_0]
		imul	ax, 50h
		mov	si, ax
		push	7
		call	_grcg_setcolor_rmw
		pop	cx
		xor	di, di
		jmp	short loc_1260D
; ---------------------------------------------------------------------------

loc_125FE:
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	word ptr es:[bx], 0FFFFh
		add	si, 2
		inc	di

loc_1260D:
		cmp	di, 28h	; '('
		jl	short loc_125FE
		call	_grcg_off_func
		pop	di
		pop	si
		pop	bp
		retf
sub_125E5	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1261B	proc far

var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2

		enter	0Eh, 0
		push	si
		push	di
		mov	[bp+var_8], 0
		push	0
		call	sub_11738
		pop	cx
		mov	ax, point_3982A.y
		add	ax, 48
		mov	[bp+var_2], ax
		mov	ax, point_3982A.y
		add	ax, 48
		mov	[bp+var_4], ax

loc_12640:
		cmp	[bp+var_2], 0
		jl	short loc_1264E
		push	[bp+var_2]
		call	sub_125E5
		pop	cx

loc_1264E:
		cmp	[bp+var_4], 18Fh
		jg	short loc_1265D
		push	[bp+var_4]
		call	sub_125E5
		pop	cx

loc_1265D:
		dec	[bp+var_2]
		inc	[bp+var_4]
		inc	[bp+var_8]
		cmp	[bp+var_2], 0
		jge	short loc_12673
		cmp	[bp+var_4], 18Fh
		jg	short loc_126C3

loc_12673:
		mov	ax, [bp+var_8]
		mov	bx, 0Fh
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_126B8
		xor	si, si
		jmp	short loc_126A7
; ---------------------------------------------------------------------------

loc_12684:
		xor	di, di
		jmp	short loc_126A1
; ---------------------------------------------------------------------------

loc_12688:
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		cbw
		cmp	ax, 0Fh
		jge	short loc_126A0
		mov	bx, si
		imul	bx, 3
		inc	byte ptr _z_Palettes[bx+di]

loc_126A0:
		inc	di

loc_126A1:
		cmp	di, 3
		jl	short loc_12688
		inc	si

loc_126A7:
		cmp	si, 10h
		jl	short loc_12684
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		add	sp, 4

loc_126B8:
		push	1
		call	_frame_delay
		pop	cx
		jmp	loc_12640
; ---------------------------------------------------------------------------

loc_126C3:
		mov	[bp+var_8], 0
		xor	si, si
		jmp	short loc_126E1
; ---------------------------------------------------------------------------

loc_126CC:
		xor	di, di
		jmp	short loc_126DB
; ---------------------------------------------------------------------------

loc_126D0:
		mov	bx, si
		imul	bx, 3
		mov	byte ptr _z_Palettes[bx+di], 0Fh
		inc	di

loc_126DB:
		cmp	di, 3
		jl	short loc_126D0
		inc	si

loc_126E1:
		cmp	si, 10h
		jl	short loc_126CC
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		push	1
		call	_graph_accesspage_func
		call	sub_EC80
		push	0
		call	_graph_accesspage_func
		push	400170h
		push	x_36C26
		call	sub_197E1
		add	sp, 0Eh

loc_12714:
		inc	[bp+var_8]
		mov	[bp+var_6], 0
		mov	ax, [bp+var_8]
		mov	bx, 0Fh
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_1276B
		xor	si, si
		jmp	short loc_1275A
; ---------------------------------------------------------------------------

loc_1272D:
		xor	di, di
		jmp	short loc_12754
; ---------------------------------------------------------------------------

loc_12731:
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		mov	bx, si
		imul	bx, 3
		cmp	al, [bx+di+5414h]
		jle	short loc_12750
		mov	bx, si
		imul	bx, 3
		dec	byte ptr _z_Palettes[bx+di]
		jmp	short loc_12753
; ---------------------------------------------------------------------------

loc_12750:
		inc	[bp+var_6]

loc_12753:
		inc	di

loc_12754:
		cmp	di, 3
		jl	short loc_12731
		inc	si

loc_1275A:
		cmp	si, 10h
		jl	short loc_1272D
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		add	sp, 4

loc_1276B:
		cmp	[bp+var_6], 30h	; '0'
		jge	short loc_1277B
		push	1
		call	_frame_delay
		pop	cx
		jmp	short loc_12714
; ---------------------------------------------------------------------------

loc_1277B:
		xor	si, si
		jmp	short loc_127AC
; ---------------------------------------------------------------------------

loc_1277F:
		xor	di, di
		jmp	short loc_127A6
; ---------------------------------------------------------------------------

loc_12783:
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		cbw
		or	ax, ax
		jle	short loc_127A5
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		add	al, -4
		mov	bx, si
		imul	bx, 3
		mov	_z_Palettes[bx+di], al

loc_127A5:
		inc	di

loc_127A6:
		cmp	di, 3
		jl	short loc_12783
		inc	si

loc_127AC:
		cmp	si, 10h
		jl	short loc_1277F
		mov	_z_Palettes[7 * 3].r, 0Fh
		mov	_z_Palettes[7 * 3].g, 0Fh
		mov	_z_Palettes[7 * 3].b, 0Fh
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		push	1
		call	_graph_accesspage_func
		call	sub_EC0D
		push	ds
		push	offset aVqvnvtvmvcb@vp ; "ＲＯＵＮＤ　１　ＣＬＥＡＲ"
		push	(207h shl 16) or 0
		push	0
		call	graph_putsa_fx
		push	ds
		push	offset aVbvpvovzvtvbvf ; "Ｃｏｎｇｒａｔｕｌａｔｉｏｎ！！"
		push	(207h shl 16) or 32
		push	0
		call	graph_putsa_fx
		push	ds
		push	offset aVrvevmvevgvfb@ ; "Ｓｅｌｅｃｔ　ｎｅｘｔ　Ｒｏｕｎｄ"
		push	(207h shl 16) or 64
		push	0
		call	graph_putsa_fx
		push	ds
		push	offset aCvkev	; "魔界へ"
		push	(201h shl 16) or 96
		push	0
		call	graph_putsa_fx
		add	sp, 2Eh
		push	ds
		push	offset aTnncv	; "地獄へ"
		push	(203h shl 16) or 128
		push	0
		call	graph_putsa_fx
		push	0
		call	_graph_accesspage_func
		push	(0Fh shl 16) or 0Fh
		push	(0Fh shl 16) or 01h
		call	_z_palette_set_show
		push	(09h shl 16) or 09h
		push	(09h shl 16) or 03h
		call	_z_palette_set_show
		push	1000D0h
		pushd	0
		push	400040h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 28h
		push	100100h
		push	200000h
		push	600020h
		call	_graph_slow_2xscale_rect_1_to_0
		push	100110h
		push	400000h
		push	0B40020h
		call	_graph_slow_2xscale_rect_1_to_0
		push	100030h
		push	600000h
		push	0FA0100h
		call	_graph_slow_2xscale_rect_1_to_0
		push	100030h
		push	800000h
		push	12C0100h
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 30h
		call	sub_EC80
		push	300FAh
		push	80h
		call	sub_197E1
		add	sp, 6
		mov	[bp+var_A], 0
		mov	byte_34A4E, 0
		mov	byte_34A52, 0
		call	sub_B87C
		mov	[bp+var_C], 0
		mov	[bp+var_E], 0
		push	32h ; '2'

loc_12902:
		call	_frame_delay
		pop	cx
		push	0
		call	sub_B502
		pop	cx
		cmp	byte_34A54, 0
		jz	short loc_1291D
		cmp	[bp+var_C], 0
		jz	short loc_1292E

loc_1291D:
		cmp	byte_34A55, 0
		jz	loc_129C8
		cmp	[bp+var_E], 0
		jnz	loc_129C8

loc_1292E:
		cmp	[bp+var_A], 0
		jnz	short loc_1297F
		push	200020h
		push	0FA0080h
		call	_egc_copy_rect_1_to_0
		push	3012Ch
		push	80h
		call	sub_197E1
		push	(0Fh shl 16) or 0Fh
		push	(0Fh shl 16) or 03h
		call	_z_palette_set_show
		push	(09h shl 16) or 09h
		push	(09h shl 16) or 01h
		call	_z_palette_set_show
		add	sp, 1Eh
		mov	[bp+var_A], 1
		jmp	short loc_129C8
; ---------------------------------------------------------------------------

loc_1297F:
		push	200020h
		push	12C0080h
		call	_egc_copy_rect_1_to_0
		push	300FAh
		push	80h
		call	sub_197E1
		push	(0Fh shl 16) or 0Fh
		push	(0Fh shl 16) or 01h
		call	_z_palette_set_show
		push	(09h shl 16) or 09h
		push	(09h shl 16) or 03h
		call	_z_palette_set_show
		add	sp, 1Eh
		mov	[bp+var_A], 0

loc_129C8:
		cmp	byte_34A54, 0
		jnz	short loc_129D4
		mov	[bp+var_C], 0

loc_129D4:
		cmp	byte_34A55, 0
		jnz	short loc_129E0
		mov	[bp+var_E], 0

loc_129E0:
		cmp	byte_34A54, 0
		jz	short loc_129EC
		mov	[bp+var_C], 1

loc_129EC:
		cmp	byte_34A55, 0
		jz	short loc_129F8
		mov	[bp+var_E], 1

loc_129F8:
		cmp	byte_34A4E, 1
		jz	short loc_12A06
		cmp	byte_34A52, 1
		jnz	short loc_12A18

loc_12A06:
		push	4
		call	_mdrv2_se_play
		pop	cx
		cmp	[bp+var_A], 0
		jnz	short loc_12A1D
		push	1
		jmp	short loc_12A1F
; ---------------------------------------------------------------------------

loc_12A18:
		push	5
		jmp	loc_12902
; ---------------------------------------------------------------------------

loc_12A1D:
		push	2

loc_12A1F:
		call	sub_20754
		pop	cx
		mov	al, byte ptr [bp+var_A]
		mov	_route, al
		mov	word_34A82, 1
		mov	_player_is_hit, 1
		pop	di
		pop	si
		leave
		retf
sub_1261B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12A3A	proc far

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2

		enter	8, 0
		push	si
		push	di
		mov	[bp+var_8], 0
		push	0
		call	sub_11738
		pop	cx
		mov	ax, word_36C2A
		add	ax, 10h
		mov	[bp+var_2], ax
		mov	ax, word_36C2A
		add	ax, 10h
		mov	[bp+var_4], ax

loc_12A5F:
		cmp	[bp+var_2], 0
		jl	short loc_12A6D
		push	[bp+var_2]
		call	sub_125E5
		pop	cx

loc_12A6D:
		cmp	[bp+var_4], 18Fh
		jg	short loc_12A7C
		push	[bp+var_4]
		call	sub_125E5
		pop	cx

loc_12A7C:
		sub	[bp+var_2], 2
		add	[bp+var_4], 2
		inc	[bp+var_8]
		cmp	[bp+var_2], 0
		jge	short loc_12A94
		cmp	[bp+var_4], 18Fh
		jg	short loc_12AE4

loc_12A94:
		mov	ax, [bp+var_8]
		mov	bx, 7
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_12AD9
		xor	si, si
		jmp	short loc_12AC8
; ---------------------------------------------------------------------------

loc_12AA5:
		xor	di, di
		jmp	short loc_12AC2
; ---------------------------------------------------------------------------

loc_12AA9:
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		cbw
		cmp	ax, 0Fh
		jge	short loc_12AC1
		mov	bx, si
		imul	bx, 3
		inc	byte ptr _z_Palettes[bx+di]

loc_12AC1:
		inc	di

loc_12AC2:
		cmp	di, 3
		jl	short loc_12AA9
		inc	si

loc_12AC8:
		cmp	si, 10h
		jl	short loc_12AA5
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		add	sp, 4

loc_12AD9:
		push	1
		call	_frame_delay
		pop	cx
		jmp	loc_12A5F
; ---------------------------------------------------------------------------

loc_12AE4:
		mov	[bp+var_8], 0
		xor	si, si
		jmp	short loc_12B02
; ---------------------------------------------------------------------------

loc_12AED:
		xor	di, di
		jmp	short loc_12AFC
; ---------------------------------------------------------------------------

loc_12AF1:
		mov	bx, si
		imul	bx, 3
		mov	byte ptr _z_Palettes[bx+di], 0Fh
		inc	di

loc_12AFC:
		cmp	di, 3
		jl	short loc_12AF1
		inc	si

loc_12B02:
		cmp	si, 10h
		jl	short loc_12AED
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		push	1
		call	_graph_accesspage_func
		call	sub_EC80
		push	0
		call	_graph_accesspage_func
		push	400170h
		push	x_36C26
		call	sub_197E1
		add	sp, 0Eh

loc_12B35:
		inc	[bp+var_8]
		mov	[bp+var_6], 0
		mov	ax, [bp+var_8]
		mov	bx, 5
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_12B8C
		xor	si, si
		jmp	short loc_12B7B
; ---------------------------------------------------------------------------

loc_12B4E:
		xor	di, di
		jmp	short loc_12B75
; ---------------------------------------------------------------------------

loc_12B52:
		mov	bx, si
		imul	bx, 3
		mov	al, _z_Palettes[bx+di]
		mov	bx, si
		imul	bx, 3
		cmp	al, [bx+di+5414h]
		jle	short loc_12B71
		mov	bx, si
		imul	bx, 3
		dec	byte ptr _z_Palettes[bx+di]
		jmp	short loc_12B74
; ---------------------------------------------------------------------------

loc_12B71:
		inc	[bp+var_6]

loc_12B74:
		inc	di

loc_12B75:
		cmp	di, 3
		jl	short loc_12B52
		inc	si

loc_12B7B:
		cmp	si, 10h
		jl	short loc_12B4E
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		add	sp, 4

loc_12B8C:
		cmp	[bp+var_6], 30h	; '0'
		jge	short loc_12B9C
		push	1
		call	_frame_delay
		pop	cx
		jmp	short loc_12B35
; ---------------------------------------------------------------------------

loc_12B9C:
		mov	word_34A82, 1

loc_12BA2:
		mov	_player_is_hit, 1
		pop	di
		pop	si
		leave
		retf
sub_12A3A	endp

main_17_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_18_TEXT	segment	byte public 'CODE' use16
		assume cs:main_18_TEXT
		;org 0Bh
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12BAB	proc near

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8

		enter	4, 0
		push	si
		push	di
		mov	di, [bp+arg_4]
		mov	[bp+var_2], 0
		mov	ax, [bp+arg_2]
		shl	ax, 4
		add	ax, 0E0h
		mov	[bp+var_4], ax
		mov	byte_35B29, 1
		xor	si, si
		jmp	short loc_12C27
; ---------------------------------------------------------------------------

loc_12BCE:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		mov	bx, 0Ah
		cwd
		idiv	bx
		mov	bx, 4
		mov	ax, dx
		cwd
		idiv	bx
		add	ax, 1CAh
		push	ax
		push	[bp+arg_0]
		push	[bp+var_4]
		call	sub_19A62
		add	sp, 8
		mov	ax, si
		mov	bx, 0Ah
		cwd
		idiv	bx
		mov	ax, di
		push	dx
		cwd
		idiv	bx
		pop	ax
		cmp	ax, dx
		jnz	short loc_12C0F
		inc	[bp+var_2]

loc_12C0F:
		cmp	[bp+var_2], 2
		jge	short loc_12C2C
		push	4
		call	_delay
		push	2
		call	_mdrv2_se_play
		add	sp, 4
		inc	si

loc_12C27:
		cmp	si, 14h
		jl	short loc_12BCE

loc_12C2C:
		mov	ax, di
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, di
		mov	bx, 0Ah
		cwd
		idiv	bx
		mov	bx, 4
		mov	ax, dx
		cwd
		idiv	bx
		add	ax, 1CAh
		push	ax
		push	[bp+arg_0]
		push	[bp+var_4]
		call	sub_19A62
		add	sp, 8
		mov	byte_35B29, 0
		pop	di
		pop	si
		leave
		retn	6
sub_12BAB	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12C62	proc near

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  4
arg_2		= word ptr  6

		enter	4, 0
		push	si
		push	di
		test	byte ptr [bp+arg_2], 1
		jz	short loc_12C80
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		add	ax, 4Ch	; 'L'
		mov	si, ax
		mov	[bp+var_2], 0FFFCh
		jmp	short loc_12C8D
; ---------------------------------------------------------------------------

loc_12C80:
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		mov	si, ax
		mov	[bp+var_2], 4

loc_12C8D:
		mov	[bp+var_4], 0
		jmp	short loc_12CCC
; ---------------------------------------------------------------------------

loc_12C94:
		add	si, [bp+var_2]
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	di, es:[bx]
		mov	ax, si
		sub	ax, [bp+var_2]
		mov	bx, word ptr _VRAM_PLANE_B
		add	bx, ax
		mov	es:[bx], di
		mov	bx, word ptr _VRAM_PLANE_B
		add	bx, si
		mov	di, es:[bx+2]
		mov	ax, si
		sub	ax, [bp+var_2]
		add	ax, 2
		mov	bx, word ptr _VRAM_PLANE_B
		add	bx, ax
		mov	es:[bx], di
		inc	[bp+var_4]

loc_12CCC:
		cmp	[bp+var_4], 13h
		jl	short loc_12C94
		cmp	[bp+var_2], 0
		jle	short loc_12CE3
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		add	ax, [bp+arg_0]
		jmp	short loc_12CEF
; ---------------------------------------------------------------------------

loc_12CE3:
		mov	ax, [bp+arg_2]
		imul	ax, 50h
		add	ax, 4Ch	; 'L'
		sub	ax, [bp+arg_0]

loc_12CEF:
		mov	[bp+var_4], ax
		push	1
		call	_graph_accesspage_func
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_4]
		mov	di, es:[bx]
		push	0
		call	_graph_accesspage_func
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	es:[bx], di
		push	1
		call	_graph_accesspage_func
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_4]
		mov	di, es:[bx+2]
		push	0
		call	_graph_accesspage_func
		add	sp, 8
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	es:[bx+2], di
		pop	di
		pop	si
		leave
		retn	4
sub_12C62	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12D3F	proc near

var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= dword	ptr -8
_font		= dword	ptr -4

		enter	12h, 0
		push	si
		push	di
		xor	di, di
		mov	[bp+var_A], 0
		mov	[bp+var_10], 1
		push	320h
		call	@$bnwa$qui
		pop	cx
		mov	word ptr [bp+_font+2], dx
		mov	word ptr [bp+_font], ax
		push	320h
		call	@$bnwa$qui
		pop	cx
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		xor	si, si
		jmp	short loc_12D90
; ---------------------------------------------------------------------------

loc_12D73:
		mov	ax, si
		add	ax, ax
		les	bx, [bp+_font]
		add	bx, ax
		mov	word ptr es:[bx], 0
		mov	ax, si
		add	ax, ax
		les	bx, [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 0
		inc	si

loc_12D90:
		cmp	si, 190h
		jb	short loc_12D73
		call	egc_on
		EGC_SETUP_COPY

loc_12DC5:
		xor	si, si
		jmp	short loc_12E0D
; ---------------------------------------------------------------------------

loc_12DC9:
		mov	ax, si
		add	ax, ax
		les	bx, [bp+var_8]
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_12E0C
		push	si
		mov	ax, si
		add	ax, ax
		les	bx, [bp+_font]
		add	bx, ax
		push	word ptr es:[bx]
		call	sub_12C62
		mov	ax, si
		add	ax, ax
		les	bx, [bp+_font]
		add	bx, ax
		add	word ptr es:[bx], 4
		cmp	word ptr es:[bx], 50h ;	'P'
		jb	short loc_12E0C
		mov	ax, si
		add	ax, ax
		les	bx, [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 0
		inc	[bp+var_A]

loc_12E0C:
		inc	si

loc_12E0D:
		cmp	si, 190h
		jb	short loc_12DC9
		inc	[bp+var_12]
		push	2
		call	_frame_delay
		pop	cx
		cmp	[bp+var_A], 190h
		jnb	loc_12F42
		cmp	di, 190h
		jnb	short loc_12EA4
		mov	ax, di
		add	ax, ax
		les	bx, [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 1
		lea	ax, [di+1]
		add	ax, ax
		mov	bx, word ptr [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 1
		lea	ax, [di+2]
		add	ax, ax
		mov	bx, word ptr [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 1
		lea	ax, [di+3]
		add	ax, ax
		mov	bx, word ptr [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 1
		lea	ax, [di+4]
		add	ax, ax
		mov	bx, word ptr [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 1
		lea	ax, [di+5]
		add	ax, ax
		mov	bx, word ptr [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 1
		lea	ax, [di+6]
		add	ax, ax
		mov	bx, word ptr [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 1
		lea	ax, [di+7]
		add	ax, ax
		mov	bx, word ptr [bp+var_8]
		add	bx, ax
		mov	word ptr es:[bx], 1

loc_12EA4:
		add	di, 8
		mov	ax, [bp+var_A]
		cmp	ax, [bp+var_10]
		jz	loc_12F39
		test	di, 0Fh
		jnz	loc_12F39
		mov	[bp+var_C], 0
		jmp	short loc_12F27
; ---------------------------------------------------------------------------

loc_12EC0:
		mov	[bp+var_E], 0
		jmp	short loc_12F1E
; ---------------------------------------------------------------------------

loc_12EC7:
		mov	bx, [bp+var_C]
		imul	bx, 3
		add	bx, [bp+var_E]
		mov	al, _z_Palettes[bx]
		mov	bx, [bp+var_C]
		imul	bx, 3
		add	bx, [bp+var_E]
		cmp	al, [bx+3FE8h]
		jz	short loc_12F1B
		mov	bx, [bp+var_C]
		imul	bx, 3
		add	bx, [bp+var_E]
		mov	bx, [bp+var_C]
		imul	bx, 3
		add	bx, [bp+var_E]
		cmp	al, [bx+3FE8h]
		jge	short loc_12EFF
		mov	al, 1
		jmp	short loc_12F01
; ---------------------------------------------------------------------------

loc_12EFF:
		mov	al, -1

loc_12F01:
		mov	bx, [bp+var_C]
		imul	bx, 3
		add	bx, [bp+var_E]
		add	al, _z_Palettes[bx]
		mov	bx, [bp+var_C]
		imul	bx, 3
		add	bx, [bp+var_E]
		mov	_z_Palettes[bx], al

loc_12F1B:
		inc	[bp+var_E]

loc_12F1E:
		cmp	[bp+var_E], 3
		jb	short loc_12EC7
		inc	[bp+var_C]

loc_12F27:
		cmp	[bp+var_C], 10h
		jb	short loc_12EC0
		push	ds
		push	offset _z_Palettes
		call	sub_EB10
		add	sp, 4

loc_12F39:
		mov	ax, [bp+var_A]
		mov	[bp+var_10], ax
		jmp	loc_12DC5
; ---------------------------------------------------------------------------

loc_12F42:
		pushd	[bp+_font]	; font
		call	@$bdla$qnv
		pushd	[bp+var_8] ; font
		call	@$bdla$qnv
		add	sp, 8
		call	egc_off
		pop	di
		pop	si
		leave
		retn	2
sub_12D3F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12F62	proc near
		push	bp
		mov	bp, sp
		push	1
		call	_graph_accesspage_func
		push	ds
		push	offset aClear3_grp ; "CLEAR3.grp"
		call	sub_10C31
		push	ds
		push	offset aNumb_ptn ; "numb.ptn"
		push	7
		call	sub_10888
		push	0
		call	_graph_accesspage_func
		add	sp, 0Eh
		push	0
		call	sub_12D3F
		pop	bp
		retn
sub_12F62	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_12F91	proc near

var_C		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2

		enter	0Ch, 0
		push	si
		push	di
		mov	di, 3844h
		mov	eax, dword_3573A
		mov	[bp+var_C], eax
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		mov	[bp+var_6], di
		xor	si, si
		jmp	short loc_13024
; ---------------------------------------------------------------------------

loc_12FB1:
		mov	[bp+var_2], 0
		mov	[bp+var_4], di
		mov	ax, [bp+var_6]
		mov	[bp+var_8], ax
		jmp	short loc_13002
; ---------------------------------------------------------------------------

loc_12FC1:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		lea	ax, [bp+var_C]
		add	dx, ax
		mov	bx, dx
		mov	al, ss:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_4]
		mov	es:[bx], al
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		lea	ax, [bp+var_C]
		add	dx, ax
		mov	bx, dx
		mov	al, ss:[bx]
		mov	bx, word ptr _VRAM_PLANE_B
		add	bx, [bp+var_8]
		mov	es:[bx], al
		inc	[bp+var_2]
		inc	[bp+var_4]
		inc	[bp+var_8]

loc_13002:
		cmp	[bp+var_2], 28h	; '('
		jl	short loc_12FC1
		sub	di, 50h	; 'P'
		add	[bp+var_6], 50h	; 'P'
		mov	ax, si
		mov	bx, 6
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_13023
		push	1
		call	_frame_delay
		pop	cx

loc_13023:
		inc	si

loc_13024:
		cmp	si, 8Ch
		jl	short loc_12FB1
		call	_grcg_off_func
		pop	di
		pop	si
		leave
		retn
sub_12F91	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13033	proc far

var_2C		= byte ptr -2Ch
arg_0		= dword	ptr  6
arg_4		= byte ptr  0Ah

		enter	2Ch, 0
		lea	ax, [bp+var_2C]
		push	ss
		push	ax
		push	ds
		push	offset off_3573E
		mov	cx, 2Ch	; ','
		call	SCOPY@
		mov	al, [bp+arg_4]
		cbw
		shl	ax, 2
		lea	dx, [bp+var_2C]
		add	ax, dx
		mov	bx, ax
		les	bx, ss:[bx]
		mov	al, es:[bx]
		les	bx, [bp+arg_0]
		mov	es:[bx], al
		mov	al, [bp+arg_4]
		cbw
		shl	ax, 2
		add	ax, dx
		mov	bx, ax
		les	bx, ss:[bx]
		mov	al, es:[bx+1]
		les	bx, [bp+arg_0]
		mov	es:[bx+1], al
		leave
		retf
sub_13033	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1307D	proc near

arg_0		= word ptr  4
arg_2		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	ax, si
		mov	bx, 3E8h
		cwd
		idiv	bx
		push	ax
		pushd	[bp+arg_2]
		call	sub_13033
		add	sp, 6
		mov	bx, 3E8h
		mov	ax, si
		cwd
		idiv	bx
		mov	si, dx
		mov	ax, si
		mov	bx, 64h	; 'd'
		cwd
		idiv	bx
		push	ax
		mov	ax, word ptr [bp+arg_2]
		add	ax, 2
		push	word ptr [bp+arg_2+2]
		push	ax
		call	sub_13033
		add	sp, 6
		mov	bx, 64h	; 'd'
		mov	ax, si
		cwd
		idiv	bx
		mov	si, dx
		mov	ax, si
		mov	bx, 0Ah
		cwd
		idiv	bx
		push	ax
		mov	ax, word ptr [bp+arg_2]
		add	ax, 4
		push	word ptr [bp+arg_2+2]
		push	ax
		call	sub_13033
		add	sp, 6
		mov	bx, 0Ah
		mov	ax, si
		cwd
		idiv	bx
		mov	si, dx
		push	dx
		mov	ax, word ptr [bp+arg_2]
		add	ax, 6
		push	word ptr [bp+arg_2+2]
		push	ax
		call	sub_13033
		add	sp, 6
		pop	si
		pop	bp
		retn	6
sub_1307D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13101	proc far

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  6

		enter	0Ch, 0
		push	si
		push	di
		mov	word ptr [bp+var_4+2], ds
		mov	word ptr [bp+var_4], offset aSTAGE_COMPLETE
		mov	word ptr [bp+var_8+2], ds
		mov	word ptr [bp+var_8], offset aSTAGE_COMPLETE_NUM
		xor	si, si
		mov	ax, [bp+arg_0]
		mov	bx, 0Ah
		cwd
		idiv	bx
		push	ax
		mov	ax, word ptr [bp+var_4]
		add	ax, 0Ch
		push	word ptr [bp+var_4+2]
		push	ax
		call	sub_13033
		add	sp, 6
		mov	ax, [bp+arg_0]
		mov	bx, 0Ah
		cwd
		idiv	bx
		push	dx
		mov	ax, word ptr [bp+var_4]
		add	ax, 0Eh
		push	word ptr [bp+var_4+2]
		push	ax
		call	sub_13033
		add	sp, 6
		push	ds
		push	offset unk_39B8C
		call	sub_EB10
		add	sp, 4
		call	sub_12F91
		pushd	[bp+var_4]
		push	(2Ah shl 16) or 80
		push	64
		call	graph_putsa_fx
		add	sp, 0Ah
		call	graph_putsa_fx c,  48, large (27h shl 16) or 112, offset aB@b@vavnvmvtvr, ds ; "　　ＢＯＮＵＳ"
		call	graph_putsa_fx c,  48, large (27h shl 16) or 128, offset aB@vsvivnveb@, ds ; "   　Ｔｉｍｅ　"
		call	graph_putsa_fx c,  48, large (27h shl 16) or 160, offset aVbvpvovfvivovx, ds ; "Ｃｏｎｔｉｎｕｏｕｓ"
		call	graph_putsa_fx c,  48, large (27h shl 16) or 192, offset aVavpvnvvbxvovm, ds ; "Ｂｏｍｂ＆Ｐｌａｙｅｒ"
		call	graph_putsa_fx c,  48, large (27h shl 16) or 224, offset aB@b@vrvsvVfvd, ds ;	"　　ＳＴＡＧＥ"
		call	graph_putsa_fx c,  48, large (27h shl 16) or 256, offset aVavnvmvtvrb@vo, ds ; "ＢＯＮＵＳ　Ｐｏｉｎｔ"
		call	graph_putsa_fx c, 160, large (2Ah shl 16) or 288, offset aVgvivfb@vyb@vj, ds ; "Ｈｉｔ　Ｚ　Ｋｅｙ"
		mov	ax, word_39DAC
		imul	ax, 3
		mov	si, ax
		cmp	si, 1999h
		jle	short loc_13210
		mov	si, 1999h

loc_13210:
		xor	di, di
		jmp	short loc_1321E
; ---------------------------------------------------------------------------

loc_13214:
		movsx	eax, si
		add	dword_34A5E, eax
		inc	di

loc_1321E:
		cmp	di, 0Ah
		jb	short loc_13214
		push	0
		mov	ax, word ptr [bp+var_8]
		add	ax, 8
		push	word ptr [bp+var_8+2]
		push	ax
		call	sub_13033
		add	sp, 6
		push	0Ah
		mov	ax, word ptr [bp+var_8]
		add	ax, 0Ah
		push	word ptr [bp+var_8+2]
		push	ax
		call	sub_13033
		add	sp, 6
		pushd	[bp+var_8]
		push	si
		call	sub_1307D
		pushd	[bp+var_8]
		push	(27h shl 16) or 128
		push	256
		call	graph_putsa_fx
		add	sp, 0Ah
		mov	ax, word_34A88
		imul	ax, 64h
		mov	si, ax
		cmp	si, 1999h
		jle	short loc_13277
		mov	si, 1999h

loc_13277:
		xor	di, di
		jmp	short loc_13285
; ---------------------------------------------------------------------------

loc_1327B:
		movsx	eax, si
		add	dword_34A5E, eax
		inc	di

loc_13285:
		cmp	di, 0Ah
		jb	short loc_1327B
		pushd	[bp+var_8]
		push	si
		call	sub_1307D
		pushd	[bp+var_8]
		push	(27h shl 16) or 160
		push	256
		call	graph_putsa_fx
		add	sp, 0Ah
		mov	ax, _rem_lives
		imul	ax, 0C8h
		mov	si, ax
		mov	al, _bombs
		cbw
		imul	ax, 64h
		add	si, ax
		cmp	si, 1999h
		jle	short loc_132C2
		mov	si, 1999h

loc_132C2:
		xor	di, di
		jmp	short loc_132D0
; ---------------------------------------------------------------------------

loc_132C6:
		movsx	eax, si
		add	dword_34A5E, eax
		inc	di

loc_132D0:
		cmp	di, 0Ah
		jb	short loc_132C6
		pushd	[bp+var_8]
		push	si
		call	sub_1307D
		pushd	[bp+var_8]
		push	(27h shl 16) or 192
		push	256
		call	graph_putsa_fx
		add	sp, 0Ah
		mov	ax, [bp+arg_0]
		dec	ax
		imul	ax, 0C8h
		mov	si, ax
		cmp	si, 1999h
		jle	short loc_13305
		mov	si, 1999h

loc_13305:
		xor	di, di
		jmp	short loc_13313
; ---------------------------------------------------------------------------

loc_13309:
		movsx	eax, si
		add	dword_34A5E, eax
		inc	di

loc_13313:
		cmp	di, 0Ah
		jb	short loc_13309
		pushd	[bp+var_8]
		push	si
		call	sub_1307D
		pushd	[bp+var_8]
		push	(27h shl 16) or 224
		push	256
		call	graph_putsa_fx
		add	sp, 0Ah
		mov	eax, dword_34A5E
		add	_score, eax
		mov	ebx, 2710h
		xor	edx, edx
		div	ebx
		mov	[bp+var_A], ax
		imul	ax, 2710h
		mov	dx, word ptr dword_34A5E
		sub	dx, ax
		mov	[bp+var_C], dx
		mov	ax, [bp+arg_0]
		dec	ax
		mov	bx, 5
		cwd
		idiv	bx
		shl	dx, 2
		les	bx, _resident
		add	bx, dx
		mov	eax, dword_34A5E
		mov	es:[bx+reiidenconfig_t.bonus_per_stage], eax
		mov	ax, [bp+var_A]
		mov	bx, 0Ah
		cwd
		idiv	bx
		push	ax
		pushd	[bp+var_8]
		call	sub_13033
		add	sp, 6
		mov	ax, [bp+var_A]
		mov	bx, 0Ah
		cwd
		idiv	bx
		push	dx
		mov	ax, word ptr [bp+var_8]
		add	ax, 2
		push	word ptr [bp+var_8+2]
		push	ax
		call	sub_13033
		add	sp, 6
		mov	ax, [bp+var_C]
		mov	bx, 3E8h
		cwd
		idiv	bx
		push	ax
		mov	ax, word ptr [bp+var_8]
		add	ax, 4
		push	word ptr [bp+var_8+2]
		push	ax
		call	sub_13033
		add	sp, 6
		mov	bx, 3E8h
		mov	ax, [bp+var_C]
		cwd
		idiv	bx
		mov	[bp+var_C], dx
		mov	ax, [bp+var_C]
		mov	bx, 64h	; 'd'
		cwd
		idiv	bx
		push	ax
		mov	ax, word ptr [bp+var_8]
		add	ax, 6
		push	word ptr [bp+var_8+2]
		push	ax
		call	sub_13033
		add	sp, 6
		mov	bx, 64h	; 'd'
		mov	ax, [bp+var_C]
		cwd
		idiv	bx
		mov	[bp+var_C], dx
		mov	ax, [bp+var_C]
		mov	bx, 0Ah
		cwd
		idiv	bx
		push	ax
		mov	ax, word ptr [bp+var_8]
		add	ax, 8
		push	word ptr [bp+var_8+2]
		push	ax
		call	sub_13033
		add	sp, 6
		push	0
		mov	ax, word ptr [bp+var_8]
		add	ax, 0Ah
		push	word ptr [bp+var_8+2]
		push	ax
		call	sub_13033
		add	sp, 6
		pushd	[bp+var_8]
		push	(27h shl 16) or 256
		push	240
		call	graph_putsa_fx
		add	sp, 0Ah
		call	sub_1889C
		call	sub_D02F
		call	sub_B87C
		mov	byte_34A4E, 1
		mov	byte_34A52, 1
		jmp	short loc_1345A
; ---------------------------------------------------------------------------

loc_13452:
		push	0
		call	sub_B502
		pop	cx

loc_1345A:
		cmp	byte_34A4E, 1
		jnz	short loc_13468
		cmp	byte_34A52, 1
		jz	short loc_13452

loc_13468:
		mov	dword_34A5E, 0
		pop	di
		pop	si
		leave
		retf
sub_13101	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13475	proc far

var_6		= dword	ptr -6
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	6, 0
		push	si
		push	di
		push	ds
		push	offset unk_386B8
		call	sub_2FCAD
		add	sp, 4
		push	ds
		push	offset unk_37635
		call	sub_30DEE
		add	sp, 4
		push	32h ; '2'
		call	_frame_delay
		pop	cx
		mov	[bp+var_6], 0
		call	sub_12F62
		mov	ax, [bp+arg_0]
		mov	bx, 0Ah
		cwd
		idiv	bx
		add	ax, 1C0h
		push	ax
		push	0E00E0h
		call	sub_197E1
		add	sp, 6
		mov	ax, [bp+arg_0]
		mov	bx, 0Ah
		cwd
		idiv	bx
		add	dx, 1C0h
		push	dx
		push	0E0100h
		call	sub_197E1
		add	sp, 6
		push	1Eh
		call	_frame_delay
		pop	cx
		mov	ax, word_39DAC
		imul	ax, 5
		movzx	eax, ax
		mov	[bp+var_6], eax
		cmp	[bp+var_6], 1999h
		jle	short loc_13505
		mov	[bp+var_6], 1999h

loc_13505:
		xor	si, si
		jmp	short loc_13513
; ---------------------------------------------------------------------------

loc_13509:
		mov	eax, [bp+var_6]
		add	dword_34A5E, eax
		inc	si

loc_13513:
		cmp	si, 0Ah
		jb	short loc_13509
		mov	eax, [bp+var_6]
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		push	ax
		pushd	56h ; 'V'
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 64h ; 'd'
		cdq
		idiv	ebx
		push	ax
		push	10056h
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 64h ; 'd'
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		push	ax
		push	20056h
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		push	word ptr [bp+var_6]
		push	30056h
		call	sub_12BAB
		pushd	4
		push	56h ; 'V'
		call	sub_12BAB
		push	5
		call	_frame_delay
		pop	cx
		mov	ax, word_34A88
		imul	ax, 0C8h
		cwde
		mov	[bp+var_6], eax
		cmp	[bp+var_6], 1999h
		jle	short loc_135D4
		mov	[bp+var_6], 1999h

loc_135D4:
		xor	si, si
		jmp	short loc_135E2
; ---------------------------------------------------------------------------

loc_135D8:
		mov	eax, [bp+var_6]
		add	dword_34A5E, eax
		inc	si

loc_135E2:
		cmp	si, 0Ah
		jb	short loc_135D8
		mov	eax, [bp+var_6]
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		push	ax
		pushd	6Bh ; 'k'
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 64h ; 'd'
		cdq
		idiv	ebx
		push	ax
		push	1006Bh
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 64h ; 'd'
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		push	ax
		push	2006Bh
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		push	word ptr [bp+var_6]
		push	3006Bh
		call	sub_12BAB
		pushd	4
		push	6Bh ; 'k'
		call	sub_12BAB
		push	5
		call	_frame_delay
		pop	cx
		mov	ax, _rem_lives
		imul	ax, 1F4h
		cwde
		mov	[bp+var_6], eax
		mov	al, _bombs
		cbw
		imul	ax, 0C8h
		cwde
		add	[bp+var_6], eax
		cmp	[bp+var_6], 1999h
		jle	short loc_136B1
		mov	[bp+var_6], 1999h

loc_136B1:
		xor	si, si
		jmp	short loc_136BF
; ---------------------------------------------------------------------------

loc_136B5:
		mov	eax, [bp+var_6]
		add	dword_34A5E, eax
		inc	si

loc_136BF:
		cmp	si, 0Ah
		jb	short loc_136B5
		mov	eax, [bp+var_6]
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		push	ax
		pushd	80h
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 64h ; 'd'
		cdq
		idiv	ebx
		push	ax
		push	10080h
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 64h ; 'd'
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		push	ax
		push	20080h
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		push	word ptr [bp+var_6]
		push	30080h
		call	sub_12BAB
		pushd	4
		push	80h
		call	sub_12BAB
		push	5
		call	_frame_delay
		pop	cx
		mov	ax, [bp+arg_0]
		imul	ax, 3E8h
		cwde
		mov	[bp+var_6], eax
		cmp	[bp+var_6], 0FFFAh
		jle	short loc_13784
		mov	[bp+var_6], 0FFFAh

loc_13784:
		xor	si, si
		jmp	short loc_13792
; ---------------------------------------------------------------------------

loc_13788:
		mov	eax, [bp+var_6]
		add	dword_34A5E, eax
		inc	si

loc_13792:
		cmp	si, 0Ah
		jb	short loc_13788
		mov	eax, [bp+var_6]
		mov	ebx, 2710h
		cdq
		idiv	ebx
		push	ax
		push	0FFFF0095h
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 2710h
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		push	ax
		pushd	95h
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 3E8h
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 64h ; 'd'
		cdq
		idiv	ebx
		push	ax
		push	10095h
		call	sub_12BAB
		mov	eax, [bp+var_6]
		mov	ebx, 64h ; 'd'
		cdq
		idiv	ebx
		mov	[bp+var_6], edx
		mov	eax, [bp+var_6]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		push	ax
		push	20095h
		call	sub_12BAB
		pushd	3
		push	95h
		call	sub_12BAB
		pushd	4
		push	95h
		call	sub_12BAB
		push	5
		call	_frame_delay
		pop	cx
		mov	eax, dword_34A5E
		add	_score, eax
		mov	ebx, 2710h
		xor	edx, edx
		div	ebx
		mov	[bp+var_2], ax
		imul	ax, 2710h
		mov	dx, word ptr dword_34A5E
		sub	dx, ax
		mov	di, dx
		mov	ax, [bp+var_2]
		mov	bx, 0Ah
		cwd
		idiv	bx
		push	ax
		push	0FFFF00C4h
		call	sub_12BAB
		mov	ax, [bp+var_2]
		mov	bx, 0Ah
		cwd
		idiv	bx
		mov	[bp+var_2], dx
		push	dx
		pushd	0C4h ; 'ﾄ'
		call	sub_12BAB
		mov	ax, di
		mov	bx, 3E8h
		cwd
		idiv	bx
		push	ax
		push	100C4h
		call	sub_12BAB
		mov	ax, di
		mov	bx, 3E8h
		cwd
		idiv	bx
		mov	di, dx
		mov	ax, di
		mov	bx, 64h	; 'd'
		cwd
		idiv	bx
		push	ax
		push	200C4h
		call	sub_12BAB
		mov	ax, di
		mov	bx, 64h	; 'd'
		cwd
		idiv	bx
		mov	di, dx
		mov	ax, di
		mov	bx, 0Ah
		cwd
		idiv	bx
		push	ax
		push	300C4h
		call	sub_12BAB
		mov	ax, di
		mov	bx, 0Ah
		cwd
		idiv	bx
		mov	di, dx
		push	dx
		push	400C4h
		call	sub_12BAB
		push	5
		call	_frame_delay
		pop	cx
		call	sub_B87C
		mov	byte_34A4E, 1
		mov	byte_34A52, 1
		mov	ax, [bp+arg_0]
		mov	bx, 5
		cwd
		idiv	bx
		dec	ax
		add	ax, ax
		les	bx, _resident
		add	bx, ax
		mov	ax, word ptr _continues_total
		mov	es:[bx+reiidenconfig_t.continues_per_scene], ax
		jmp	short loc_13933
; ---------------------------------------------------------------------------

loc_1392B:
		push	0
		call	sub_B502
		pop	cx

loc_13933:
		cmp	byte_34A4E, 1
		jnz	short loc_13941
		cmp	byte_34A52, 1
		jz	short loc_1392B

loc_13941:
		mov	dword_34A5E, 0
		push	7

loc_1394C:
		call	sub_108AB
		pop	cx
		pop	di
		pop	si

locret_13954:
		leave
		retf
sub_13475	endp

main_18_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_19_TEXT	segment	byte public 'CODE' use16
		assume cs:main_19_TEXT
		;org 6
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13956	proc far

arg_0		= byte ptr  6

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_0]
		add	al, 9Ch
		pop	bp
		retf
sub_13956	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13960	proc far

arg_0		= byte ptr  6

		push	bp
		mov	bp, sp
		mov	al, [bp+arg_0]
		add	al, 64h	; 'd'
		pop	bp
		retf
sub_13960	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1396A	proc far

dest		= byte ptr -22h
var_12		= dword	ptr -12h
var_E		= dword	ptr -0Eh
var_A		= dword	ptr -0Ah
var_6		= dword	ptr -6
var_2		= word ptr -2

		enter	22h, 0
		push	si
		mov	word ptr [bp+var_6+2], ds
		mov	word ptr [bp+var_6], offset aC ; "無"
		mov	word ptr [bp+var_E+2], ds
		mov	word ptr [bp+var_E], offset aUmx_0 ; "東方★靈異伝　　"
		mov	word ptr [bp+var_12+2],	ds
		mov	word ptr [bp+var_12], offset aHiscore ;	"HISCORE"
		mov	al, _rank
		cbw
		mov	bx, ax
		cmp	bx, RANK_LUNATIC
		ja	short loc_139BC
		add	bx, bx
		jmp	cs:off_13A75[bx]

loc_13999:
		push	ds
		push	offset aReyhies_dat ; "REYHIES.DAT"
		jmp	short loc_139AF
; ---------------------------------------------------------------------------

loc_1399F:
		push	ds
		push	offset aReyhino_dat ; "REYHINO.DAT"
		jmp	short loc_139AF
; ---------------------------------------------------------------------------

loc_139A5:
		push	ds
		push	offset aReyhiha_dat ; "REYHIHA.DAT"
		jmp	short loc_139AF
; ---------------------------------------------------------------------------

loc_139AB:
		push	ds
		push	offset aReyhilu_dat ; "REYHILU.DAT"

loc_139AF:
		push	ss
		lea	ax, [bp+dest]
		push	ax		; dest
		call	_strcpy
		add	sp, 8

loc_139BC:
		push	ss
		lea	ax, [bp+dest]
		push	ax
		call	file_create
		or	ax, ax
		jz	loc_13A72
		pushd	[bp+var_12]
		push	7
		call	file_write
		mov	[bp+var_2], 0Ah
		mov	[bp+var_A], 3E8h
		xor	si, si
		jmp	short loc_139FF
; ---------------------------------------------------------------------------

loc_139E8:
		les	bx, [bp+var_E]
		add	bx, si
		mov	al, es:[bx]
		push	ax
		call	sub_13956
		pop	cx
		les	bx, [bp+var_E]
		add	bx, si
		mov	es:[bx], al
		inc	si

loc_139FF:
		cmp	si, 10h
		jl	short loc_139E8
		xor	si, si
		jmp	short loc_13A14
; ---------------------------------------------------------------------------

loc_13A08:
		pushd	[bp+var_E]
		push	10h
		call	file_write
		inc	si

loc_13A14:
		cmp	si, 0Ah
		jl	short loc_13A08
		xor	si, si
		jmp	short loc_13A36
; ---------------------------------------------------------------------------

loc_13A1D:
		push	ss
		lea	ax, [bp+var_A]
		push	ax
		push	4
		call	file_write
		mov	eax, [bp+var_A]
		add	eax, 0FFFFFF9Ch
		mov	[bp+var_A], eax
		inc	si

loc_13A36:
		cmp	si, 0Ah
		jl	short loc_13A1D
		xor	si, si
		jmp	short loc_13A53
; ---------------------------------------------------------------------------

loc_13A3F:
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		push	2
		call	file_write
		mov	ax, [bp+var_2]
		dec	ax
		mov	[bp+var_2], ax
		inc	si

loc_13A53:
		cmp	si, 0Ah
		jl	short loc_13A3F
		xor	si, si
		jmp	short loc_13A68
; ---------------------------------------------------------------------------

loc_13A5C:
		pushd	[bp+var_6]
		push	2
		call	file_write
		inc	si

loc_13A68:
		cmp	si, 0Ah
		jl	short loc_13A5C
		call	file_close

loc_13A72:
		pop	si
		leave
		retf
sub_1396A	endp

; ---------------------------------------------------------------------------
off_13A75	dw offset loc_13999
		dw offset loc_1399F
		dw offset loc_139A5
		dw offset loc_139AB

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13A7D	proc far

dest		= byte ptr -42h
s1		= byte ptr -32h

		enter	42h, 0
		push	si
		mov	al, _rank
		cbw
		mov	bx, ax
		cmp	bx, RANK_LUNATIC
		ja	short loc_13AB7
		add	bx, bx
		jmp	cs:off_13BA2[bx]

loc_13A94:
		push	ds
		push	offset aReyhies_dat ; "REYHIES.DAT"
		jmp	short loc_13AAA
; ---------------------------------------------------------------------------

loc_13A9A:
		push	ds
		push	offset aReyhino_dat ; "REYHINO.DAT"
		jmp	short loc_13AAA
; ---------------------------------------------------------------------------

loc_13AA0:
		push	ds
		push	offset aReyhiha_dat ; "REYHIHA.DAT"
		jmp	short loc_13AAA
; ---------------------------------------------------------------------------

loc_13AA6:
		push	ds
		push	offset aReyhilu_dat ; "REYHILU.DAT"

loc_13AAA:
		push	ss
		lea	ax, [bp+dest]
		push	ax		; dest
		call	_strcpy
		add	sp, 8

loc_13AB7:
		push	ss
		lea	ax, [bp+dest]
		push	ax
		call	file_exist
		or	ax, ax
		jnz	short loc_13AC9
		call	sub_1396A

loc_13AC9:
		push	ss
		lea	ax, [bp+dest]
		push	ax
		call	file_ropen
		or	ax, ax
		jnz	short loc_13AD9
		jmp	short loc_13B01
; ---------------------------------------------------------------------------

loc_13AD9:
		push	ss
		lea	ax, [bp+s1]
		push	ax
		push	7
		call	file_read
		push	4		; n
		push	ds
		push	offset aHiscore	; "HISCORE"
		push	ss
		lea	ax, [bp+s1]
		push	ax		; s1
		call	_memcmp
		add	sp, 0Ah
		or	ax, ax
		jz	short loc_13B07
		call	file_close

loc_13B01:
		mov	ax, 1
		jmp	loc_13B9F
; ---------------------------------------------------------------------------

loc_13B07:
		push	0A0h
		call	@$bnwa$qui
		pop	cx
		mov	word ptr off_39452+2, dx
		mov	word ptr off_39452, ax
		push	14h
		call	@$bnwa$qui
		pop	cx
		mov	word ptr off_3945A+2, dx
		mov	word ptr off_3945A, ax
		push	14h
		call	@$bnwa$qui
		pop	cx
		mov	word ptr off_39456+2, dx
		mov	word ptr off_39456, ax
		push	28h ; '('
		call	@$bnwa$qui
		pop	cx
		mov	word ptr off_39462+2, dx
		mov	word ptr off_39462, ax
		pushd	[off_39452]
		push	0A0h
		call	file_read
		pushd	[off_39462]
		push	28h ; '('
		call	file_read
		pushd	[off_3945A]
		push	14h
		call	file_read
		pushd	[off_39456]
		push	14h
		call	file_read
		call	file_close
		xor	si, si
		jmp	short loc_13B97
; ---------------------------------------------------------------------------

loc_13B7E:
		les	bx, off_39452
		add	bx, si
		mov	al, es:[bx]
		push	ax
		call	sub_13960
		pop	cx
		les	bx, off_39452
		add	bx, si
		mov	es:[bx], al
		inc	si

loc_13B97:
		cmp	si, 0A0h
		jl	short loc_13B7E
		xor	ax, ax

loc_13B9F:
		pop	si
		leave
		retf
sub_13A7D	endp

; ---------------------------------------------------------------------------
off_13BA2	dw offset loc_13A94
		dw offset loc_13A9A
		dw offset loc_13AA0
		dw offset loc_13AA6

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13BAA	proc far
		push	bp
		mov	bp, sp
		les	bx, off_39462
		mov	dx, es:[bx+2]
		mov	ax, es:[bx]
		pop	bp
		retf
sub_13BAA	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13BBA	proc far

arg_0		= word ptr  6
arg_2		= dword	ptr  8

		push	bp
		mov	bp, sp
		xor	dx, dx
		jmp	short loc_13BDD
; ---------------------------------------------------------------------------

loc_13BC1:
		mov	bx, [bp+arg_0]
		shl	bx, 4
		add	bx, dx
		mov	es, word ptr off_39452+2
		add	bx, word ptr off_39452
		mov	al, es:[bx]
		les	bx, [bp+arg_2]
		add	bx, dx
		mov	es:[bx], al
		inc	dx

loc_13BDD:
		cmp	dx, 10h
		jl	short loc_13BC1
		les	bx, [bp+arg_2]
		mov	byte ptr es:[bx+10h], 0
		pop	bp
		retf
sub_13BBA	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13BEC	proc near

var_1		= byte ptr -1
arg_0		= word ptr  4
arg_2		= dword	ptr  6

		enter	2, 0
		push	si
		les	bx, [bp+arg_2]
		mov	ax, [bp+arg_0]
		mov	es:[bx], ax
		mov	al, es:[bx+1]
		mov	[bp+var_1], al
		push	es
		mov	si, word ptr [bp+arg_2]
		mov	al, es:[si]
		pop	es
		mov	es:[bx+1], al
		mov	es, word ptr [bp+arg_2+2]
		mov	al, [bp+var_1]
		mov	es:[bx], al
		mov	byte ptr es:[bx+2], 0
		pop	si
		leave
		retn	6
sub_13BEC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13C20	proc far

var_6		= byte ptr -6
var_2		= word ptr -2

		enter	6, 0
		push	si
		push	di
		mov	[bp+var_2], 27h	; '''
		mov	di, 8282h
		mov	si, 1
		jmp	short loc_13C69
; ---------------------------------------------------------------------------

loc_13C33:
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	di
		call	sub_13BEC
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	[bp+var_2]
		mov	ax, si
		mov	bx, 18
		cwd
		idiv	bx
		imul	ax, 24
		add	ax, 240
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 5
		add	dx, 32
		push	dx
		call	graph_putsa_fx
		add	sp, 0Ah
		inc	di
		inc	si

loc_13C69:
		cmp	si, 1Ah
		jl	short loc_13C33
		call	graph_putsa_fx c, 32, large (823h shl 16) or 240, offset aVb, ds	; "ａ"
		mov	di, 8260h
		xor	si, si
		jmp	short loc_13CBF
; ---------------------------------------------------------------------------

loc_13C89:
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	di
		call	sub_13BEC
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	[bp+var_2]
		mov	ax, si
		mov	bx, 18
		cwd
		idiv	bx
		imul	ax, 24
		add	ax, 288
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 5
		add	dx, 32
		push	dx
		call	graph_putsa_fx
		add	sp, 0Ah
		inc	di
		inc	si

loc_13CBF:
		cmp	si, 1Ah
		jl	short loc_13C89
		xor	si, si
		jmp	short loc_13D05
; ---------------------------------------------------------------------------

loc_13CC8:
		mov	bx, si
		add	bx, bx
		mov	di, [bx+0EB4h]
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	di
		call	sub_13BEC
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	[bp+var_2]
		mov	ax, si
		mov	bx, 18
		cwd
		idiv	bx
		imul	ax, 24
		add	ax, 336
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 5
		add	dx, 32
		push	dx
		call	graph_putsa_fx
		add	sp, 0Ah
		inc	si

loc_13D05:
		cmp	si, 12h
		jl	short loc_13CC8
		mov	di, 824Fh
		xor	si, si
		jmp	short loc_13D47
; ---------------------------------------------------------------------------

loc_13D11:
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	di
		call	sub_13BEC
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	[bp+var_2]
		mov	ax, si
		mov	bx, 18
		cwd
		idiv	bx
		imul	ax, 24
		add	ax, 360
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 5
		add	dx, 32
		push	dx
		call	graph_putsa_fx
		add	sp, 0Ah
		inc	di
		inc	si

loc_13D47:
		cmp	si, 0Ah
		jl	short loc_13D11
		push	ds
		push	offset aSp	; "SP"
		push	[bp+var_2]
		mov	ax, si
		mov	bx, 18
		cwd
		idiv	bx
		imul	ax, 24
		add	ax, 360
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 5
		add	dx, 32
		push	dx
		call	graph_putsa_fx
		mov	si, 0Fh
		push	ds
		push	offset aBi	; "←"
		push	[bp+var_2]
		mov	ax, si
		mov	bx, 18
		cwd
		idiv	bx
		imul	ax, 24
		add	ax, 360
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 5
		add	dx, 32
		push	dx
		call	graph_putsa_fx
		inc	si
		push	ds
		push	offset aBi_0	; "→"
		push	[bp+var_2]
		mov	ax, si
		mov	bx, 18
		cwd
		idiv	bx
		imul	ax, 24
		add	ax, 360
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 5
		add	dx, 32
		push	dx
		call	graph_putsa_fx
		inc	si
		push	ds
		push	offset aPi	; "終"
		push	[bp+var_2]
		mov	ax, si
		mov	bx, 18
		cwd
		idiv	bx
		imul	ax, 24
		add	ax, 360
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 5
		add	dx, 32
		push	dx
		call	graph_putsa_fx
		add	sp, 28h
		inc	si
		pop	di
		pop	si
		leave
		retf
sub_13C20	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_13DF5	proc far

var_18		= byte ptr -18h
var_6		= byte ptr -6
var_5		= byte ptr -5
var_4		= byte ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= dword	ptr  8
arg_6		= word ptr  0Ch
arg_8		= dword	ptr  0Eh
arg_C		= word ptr  12h
arg_E		= word ptr  14h

		enter	18h, 0
		push	si
		push	di
		lea	ax, [bp+var_18]
		push	ss
		push	ax
		push	ds
		push	offset aBqbqbqbqbqbqbq ; "＿＿＿＿＿＿＿＿"
		mov	cx, 11h
		call	SCOPY@
		push	0
		call	_graph_accesspage_func
		pop	cx
		call	graph_putsa_fx c,  32, large (33h shl 16) or 48, offset aB@cB@iB@, ds ; "　霊　位　"
		call	graph_putsa_fx c, 144, large (33h shl 16) or 48, offset aB@b@cB@b@sob@b, ds ; "　　名　　前　　"
		call	graph_putsa_fx c, 352, large (33h shl 16) or 48, offset aB@b@uB@b@u_b@b, ds ; "　　得　　点　　"
		call	graph_putsa_fx c, 512, large (33h shl 16) or 48, offset aGxgebGwbeglbGg, ds ; "ステージ・ルート"
		xor	si, si
		jmp	loc_14082
; ---------------------------------------------------------------------------

loc_13E6C:
		cmp	si, [bp+arg_0]
		jnz	short loc_13E76
		mov	ax, 3
		jmp	short loc_13E79
; ---------------------------------------------------------------------------

loc_13E76:
		mov	ax, 7

loc_13E79:
		mov	di, ax
		mov	ax, si
		shl	ax, 4
		add	ax, 40h
		mov	[bp+var_2], ax
		mov	bx, si
		cmp	bx, 9
		ja	short loc_13EE1
		add	bx, bx
		jmp	cs:off_1408D[bx]

loc_13E94:
		push	ds
		push	offset aB@sB@r_b@ ; "　靈　神　"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13E9A:
		push	ds
		push	offset aSMRgcId	; "太元帥明王"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13EA0:
		push	ds
		push	offset aB@uvb@rxb@ ; "　天　仙　"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13EA6:
		push	ds
		push	offset aB@r_b@rxb@ ; "　神　仙　"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13EAC:
		push	ds
		push	offset aB@tnb@rxb@ ; "　地　仙　"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13EB2:
		push	ds
		push	offset aB@rlb@rxb@ ; "　人　仙　"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13EB8:
		push	ds
		push	offset aB@rxb@pcb@ ; "　仙　女　"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13EBE:
		push	ds
		push	offset aIab@czb@ot ; "陰　陽　師"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13EC4:
		push	ds
		push	offset aSB@fB@ot ; "靈　媒　師"
		jmp	short loc_13ECE
; ---------------------------------------------------------------------------

loc_13ECA:
		push	ds
		push	offset aPcb@lB@o ; "修　業　者"

loc_13ECE:
		mov	ax, di
		or	ax, 20h
		push	ax
		push	[bp+var_2]
		push	32
		call	graph_putsa_fx
		add	sp, 0Ah

loc_13EE1:
		cmp	si, [bp+arg_0]
		jnz	short loc_13EED
		mov	dx, ss
		lea	ax, [bp+var_18]
		jmp	short loc_13EFC
; ---------------------------------------------------------------------------

loc_13EED:
		mov	ax, si
		imul	ax, 12h
		mov	dx, [bp+arg_E]
		push	ax
		mov	ax, [bp+arg_C]
		pop	bx
		add	ax, bx

loc_13EFC:
		push	dx
		push	ax
		mov	ax, di
		or	ax, 20h
		push	ax
		push	[bp+var_2]
		push	144
		call	graph_putsa_fx
		add	sp, 0Ah
		push	0
		pushd	0
		cmp	[bp+arg_0], si
		jnz	short loc_13F22
		mov	eax, [bp+arg_2]
		jmp	short loc_13F31
; ---------------------------------------------------------------------------

loc_13F22:
		mov	ax, si
		shl	ax, 2
		les	bx, off_39462
		add	bx, ax
		mov	eax, es:[bx]

loc_13F31:
		push	eax
		push	7
		mov	ax, di
		or	ax, 30h
		push	ax
		push	[bp+var_2]
		push	160h
		call	sub_18589
		add	sp, 12h
		cmp	si, [bp+arg_0]
		jz	short loc_13F5E
		mov	ax, si
		add	ax, ax
		les	bx, off_3945A
		add	bx, ax
		cmp	word ptr es:[bx], 28h ;	'('
		jl	short loc_13F69

loc_13F5E:
		cmp	si, [bp+arg_0]
		jnz	short loc_13FA1
		cmp	[bp+arg_6], 28h	; '('
		jge	short loc_13FA1

loc_13F69:
		push	0
		pushd	0
		cmp	si, [bp+arg_0]
		jnz	short loc_13F78
		mov	ax, [bp+arg_6]
		jmp	short loc_13F85
; ---------------------------------------------------------------------------

loc_13F78:
		mov	ax, si
		add	ax, ax
		les	bx, off_3945A
		add	bx, ax
		mov	ax, es:[bx]

loc_13F85:
		cwde
		push	eax
		push	2
		mov	ax, di
		or	ax, 20h
		push	ax
		push	[bp+var_2]
		push	210h
		call	sub_18589
		add	sp, 12h
		jmp	short loc_13FFF
; ---------------------------------------------------------------------------

loc_13FA1:
		cmp	si, [bp+arg_0]
		jz	short loc_13FB6
		mov	ax, si
		add	ax, ax
		les	bx, off_3945A
		add	bx, ax
		cmp	word ptr es:[bx], 32h ;	'2'
		jz	short loc_13FC1

loc_13FB6:
		cmp	si, [bp+arg_0]
		jnz	short loc_13FC7
		cmp	[bp+arg_6], 32h	; '2'
		jnz	short loc_13FC7

loc_13FC1:
		push	ds
		push	offset aCvke	; "魔界"
		jmp	short loc_13FEB
; ---------------------------------------------------------------------------

loc_13FC7:
		cmp	si, [bp+arg_0]
		jz	short loc_13FDC
		mov	ax, si
		add	ax, ax
		les	bx, off_3945A
		add	bx, ax
		cmp	word ptr es:[bx], 3Ch ;	'<'
		jz	short loc_13FE7

loc_13FDC:
		cmp	si, [bp+arg_0]
		jnz	short loc_13FFF
		cmp	[bp+arg_6], 3Ch	; '<'
		jnz	short loc_13FFF

loc_13FE7:
		push	ds
		push	offset aTnnc	; "地獄"

loc_13FEB:
		mov	ax, di
		or	ax, 20h
		push	ax
		push	[bp+var_2]
		push	528
		call	graph_putsa_fx
		add	sp, 0Ah

loc_13FFF:
		push	ds
		push	offset aB_0	; "−"
		mov	ax, di
		or	ax, 20h
		push	ax
		push	[bp+var_2]
		push	560
		call	graph_putsa_fx
		add	sp, 0Ah
		mov	[bp+var_4], 0
		cmp	si, [bp+arg_0]
		jnz	short loc_14025
		les	bx, [bp+arg_8]
		jmp	short loc_1402F
; ---------------------------------------------------------------------------

loc_14025:
		mov	ax, si
		add	ax, ax
		les	bx, off_39456
		add	bx, ax

loc_1402F:
		mov	al, es:[bx]
		mov	[bp+var_6], al
		cmp	si, [bp+arg_0]
		jnz	short loc_1403F
		les	bx, [bp+arg_8]
		jmp	short loc_1404B
; ---------------------------------------------------------------------------

loc_1403F:
		mov	bx, si
		add	bx, bx
		mov	es, word ptr off_39456+2
		add	bx, word ptr off_39456

loc_1404B:
		mov	al, es:[bx+1]
		mov	[bp+var_5], al
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		mov	ax, di
		or	ax, 20h
		push	ax
		push	[bp+var_2]
		push	576
		call	graph_putsa_fx
		add	sp, 0Ah
		cmp	[bp+arg_0], si
		jnz	short loc_14081
		mov	point_3945E.x, 144
		mov	ax, si
		shl	ax, 4
		add	ax, 64
		mov	point_3945E.y, ax

loc_14081:
		inc	si

loc_14082:
		cmp	si, 0Ah
		jl	loc_13E6C
		pop	di
		pop	si
		leave
		retf
sub_13DF5	endp

; ---------------------------------------------------------------------------
off_1408D	dw offset loc_13E94
		dw offset loc_13E9A
		dw offset loc_13EA0
		dw offset loc_13EA6
		dw offset loc_13EAC
		dw offset loc_13EB2
		dw offset loc_13EB8
		dw offset loc_13EBE
		dw offset loc_13EC4
		dw offset loc_13ECA

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_140A1	proc far

var_8		= byte ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
@@x		= word ptr  6
@@y		= word ptr  8
arg_4		= word ptr  0Ah

		enter	8, 0
		push	si
		push	di
		mov	si, [bp+@@x]
		mov	di, [bp+@@y]
		mov	[bp+var_2], 0
		push	100020h
		push	di
		push	si
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		cmp	[bp+arg_4], 0
		jnz	short loc_140CD
		mov	ax, 7
		jmp	short loc_140D0
; ---------------------------------------------------------------------------

loc_140CD:
		mov	ax, 803h

loc_140D0:
		or	ax, 20h
		mov	[bp+var_4], ax
		cmp	di, 240
		jnz	short loc_140EA
		lea	ax, [si-32]
		mov	bx, 32
		cwd
		idiv	bx
		add	ax, 8281h
		jmp	short loc_1413D
; ---------------------------------------------------------------------------

loc_140EA:
		cmp	di, 264
		jnz	short loc_140FE
		lea	ax, [si-32]
		mov	bx, 32
		cwd
		idiv	bx
		add	ax, 8293h
		jmp	short loc_1413D
; ---------------------------------------------------------------------------

loc_140FE:
		cmp	di, 288
		jnz	short loc_14112
		lea	ax, [si-32]
		mov	bx, 32
		cwd
		idiv	bx
		add	ax, 8260h
		jmp	short loc_1413D
; ---------------------------------------------------------------------------

loc_14112:
		cmp	di, 312
		jnz	short loc_14126
		lea	ax, [si-32]
		mov	bx, 32
		cwd
		idiv	bx
		add	ax, 8272h
		jmp	short loc_1413D
; ---------------------------------------------------------------------------

loc_14126:
		cmp	di, 336
		jnz	short loc_14142
		lea	ax, [si-32]
		mov	bx, 32
		cwd
		idiv	bx
		add	ax, ax
		mov	bx, ax
		mov	ax, [bx+0EB4h]

loc_1413D:
		mov	[bp+var_2], ax
		jmp	short loc_141AF
; ---------------------------------------------------------------------------

loc_14142:
		cmp	di, 360
		jnz	short loc_1415C
		cmp	si, 352
		jge	short loc_1415C
		lea	ax, [si-32]
		mov	bx, 32
		cwd
		idiv	bx
		add	ax, 824Fh
		jmp	short loc_1413D
; ---------------------------------------------------------------------------

loc_1415C:
		cmp	di, 360
		jnz	short loc_1416E
		cmp	si, 352
		jnz	short loc_1416E
		push	ds
		push	offset aSp	; "SP"
		jmp	short loc_141A2
; ---------------------------------------------------------------------------

loc_1416E:
		cmp	di, 360
		jnz	short loc_14180
		cmp	si, 512
		jnz	short loc_14180
		push	ds
		push	offset aBi	; "←"
		jmp	short loc_141A2
; ---------------------------------------------------------------------------

loc_14180:
		cmp	di, 360
		jnz	short loc_14192
		cmp	si, 544
		jnz	short loc_14192
		push	ds
		push	offset aBi_0	; "→"
		jmp	short loc_141A2
; ---------------------------------------------------------------------------

loc_14192:
		cmp	di, 360
		jnz	short loc_141AF
		cmp	si, 576
		jnz	short loc_141AF
		push	ds
		push	offset aPi	; "終"

loc_141A2:
		push	[bp+var_4]
		push	di
		push	si
		call	graph_putsa_fx
		add	sp, 0Ah

loc_141AF:
		cmp	[bp+var_2], 0
		jz	short loc_141D2
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		push	[bp+var_2]
		call	sub_13BEC
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		push 	[bp+var_4]
		push	di
		push	si
		call	graph_putsa_fx
		add	sp, 0Ah

loc_141D2:
		pop	di
		pop	si
		leave
		retf
sub_140A1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_141D6	proc far

var_14		= byte ptr -14h
var_13		= byte ptr -13h
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh

		enter	14h, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	di, [bp+arg_2]
		mov	[bp+var_2], 0
		lea	ax, [bp+var_14]
		push	ss
		push	ax
		push	ds
		push	offset aB@b@b@b@b@b@b@ ; "　　　　　　　　"
		mov	cx, 11h
		call	SCOPY@
		cmp	di, 0F0h
		jnz	short loc_1420C
		lea	ax, [si-20h]
		mov	bx, 20h	; ' '
		cwd
		idiv	bx
		add	ax, 8281h
		jmp	short loc_1425F
; ---------------------------------------------------------------------------

loc_1420C:
		cmp	di, 108h
		jnz	short loc_14220
		lea	ax, [si-20h]
		mov	bx, 20h	; ' '
		cwd
		idiv	bx
		add	ax, 8293h
		jmp	short loc_1425F
; ---------------------------------------------------------------------------

loc_14220:
		cmp	di, 120h
		jnz	short loc_14234
		lea	ax, [si-20h]
		mov	bx, 20h	; ' '
		cwd
		idiv	bx
		add	ax, 8260h
		jmp	short loc_1425F
; ---------------------------------------------------------------------------

loc_14234:
		cmp	di, 138h
		jnz	short loc_14248
		lea	ax, [si-20h]
		mov	bx, 20h	; ' '
		cwd
		idiv	bx
		add	ax, 8272h
		jmp	short loc_1425F
; ---------------------------------------------------------------------------

loc_14248:
		cmp	di, 150h
		jnz	short loc_14264
		lea	ax, [si-20h]
		mov	bx, 20h	; ' '
		cwd
		idiv	bx
		add	ax, ax
		mov	bx, ax
		mov	ax, [bx+0EB4h]

loc_1425F:
		mov	[bp+var_2], ax
		jmp	short loc_142E1
; ---------------------------------------------------------------------------

loc_14264:
		cmp	di, 168h
		jnz	short loc_1427E
		cmp	si, 160h
		jge	short loc_1427E
		lea	ax, [si-20h]
		mov	bx, 20h	; ' '
		cwd
		idiv	bx
		add	ax, 824Fh
		jmp	short loc_1425F
; ---------------------------------------------------------------------------

loc_1427E:
		cmp	di, 168h
		jnz	short loc_14291
		cmp	si, 160h
		jnz	short loc_14291
		mov	[bp+var_2], 8140h
		jmp	short loc_142E1
; ---------------------------------------------------------------------------

loc_14291:
		cmp	di, 168h
		jnz	short loc_142B0
		cmp	si, 200h
		jnz	short loc_142B0
		les	bx, [bp+arg_8]
		dec	word ptr es:[bx]
		cmp	word ptr es:[bx], 0
		jge	short loc_142E1
		mov	word ptr es:[bx], 0
		jmp	short loc_142E1
; ---------------------------------------------------------------------------

loc_142B0:
		cmp	di, 168h
		jnz	short loc_142CF
		cmp	si, 220h
		jnz	short loc_142CF
		les	bx, [bp+arg_8]
		inc	word ptr es:[bx]
		cmp	word ptr es:[bx], 7
		jle	short loc_142E1
		mov	word ptr es:[bx], 7
		jmp	short loc_142E1
; ---------------------------------------------------------------------------

loc_142CF:
		cmp	di, 168h
		jnz	short loc_142E1
		cmp	si, 240h
		jnz	short loc_142E1
		mov	ax, 1
		jmp	loc_14395
; ---------------------------------------------------------------------------

loc_142E1:
		cmp	[bp+var_2], 0
		jz	short loc_1432E
		mov	ax, [bp+var_2]
		sar	ax, 8
		les	bx, [bp+arg_8]
		mov	dx, es:[bx]
		add	dx, dx
		les	bx, [bp+arg_4]
		add	bx, dx
		mov	es:[bx], al
		les	bx, [bp+arg_8]
		mov	bx, es:[bx]
		add	bx, bx
		mov	es, word ptr [bp+arg_4+2]
		add	bx, word ptr [bp+arg_4]
		mov	al, byte ptr [bp+var_2]
		and	al, 0FFh
		mov	es:[bx+1], al
		les	bx, [bp+arg_8]
		cmp	word ptr es:[bx], 7
		jnz	short loc_14322
		mov	byte_35889, 1

loc_14322:
		les	bx, [bp+arg_8]
		cmp	word ptr es:[bx], 7
		jge	short loc_1432E
		inc	word ptr es:[bx]

loc_1432E:
		push	100080h
		push	point_3945E.y
		push	point_3945E.x
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		call	graph_putsa_fx c, point_3945E.x, point_3945E.y, 23h, large [bp+arg_4]
		les	bx, [bp+arg_8]
		mov	bx, es:[bx]
		add	bx, bx
		lea	ax, [bp+var_14]
		add	bx, ax
		mov	byte ptr ss:[bx], 81h
		mov	bx, word ptr [bp+arg_8]
		mov	bx, es:[bx]
		add	bx, bx
		lea	ax, [bp+var_13]
		add	bx, ax
		mov	byte ptr ss:[bx], 51h ;	'Q'
		push	ss
		lea	ax, [bp+var_14]
		push	ax
		push	3
		push	point_3945E.y
		push	point_3945E.x
		call	graph_putsa_fx
		add	sp, 0Ah
		xor	ax, ax

loc_14395:
		pop	di
		pop	si
		leave
		retf
sub_141D6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_14399	proc far

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh
arg_C		= dword	ptr  12h

		push	bp
		mov	bp, sp
		cmp	byte_34A54, 1
		jnz	loc_14445
		push	0
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		les	bx, [bp+arg_4]
		sub	word ptr es:[bx], 18h
		cmp	word ptr es:[bx], 0F0h
		jge	short loc_143CD
		mov	word ptr es:[bx], 168h

loc_143CD:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 108h
		jnz	short loc_143E9
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 120h
		jl	short loc_143E9
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx], 0F0h

loc_143E9:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 138h
		jnz	short loc_14405
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 120h
		jl	short loc_14405
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx], 120h

loc_14405:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 168h
		jnz	short loc_14428
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 160h
		jle	short loc_14428
		cmp	word ptr es:[bx], 200h
		jge	short loc_14428
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx], 150h

loc_14428:
		push	1
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		mov	byte_34A54, 0
		jmp	loc_146B6
; ---------------------------------------------------------------------------

loc_14445:
		cmp	byte_34A55, 1
		jnz	loc_144EE
		push	0
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		les	bx, [bp+arg_4]
		add	word ptr es:[bx], 18h
		cmp	word ptr es:[bx], 168h
		jle	short loc_14476
		mov	word ptr es:[bx], 0F0h

loc_14476:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 108h
		jnz	short loc_14492
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 120h
		jl	short loc_14492
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx], 120h

loc_14492:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 138h
		jnz	short loc_144AE
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 120h
		jl	short loc_144AE
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx], 150h

loc_144AE:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 168h
		jnz	short loc_144D1
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 160h
		jle	short loc_144D1
		cmp	word ptr es:[bx], 200h
		jge	short loc_144D1
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx], 0F0h

loc_144D1:
		push	1
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		mov	byte_34A55, 0
		jmp	loc_146B6
; ---------------------------------------------------------------------------

loc_144EE:
		cmp	byte_34A4B, 2
		jnz	loc_14579
		push	0
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		les	bx, [bp+arg_0]
		sub	word ptr es:[bx], 20h ;	' '
		cmp	word ptr es:[bx], 20h ;	' '
		jge	short loc_1451E
		mov	word ptr es:[bx], 240h

loc_1451E:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 108h
		jnz	short loc_14537
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 120h
		jl	short loc_14537
		mov	word ptr es:[bx], 100h

loc_14537:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 138h
		jnz	short loc_14550
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 120h
		jl	short loc_14550
		mov	word ptr es:[bx], 100h

loc_14550:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 168h
		jnz	loc_145FC
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 160h
		jle	loc_145FC
		cmp	word ptr es:[bx], 200h
		jge	loc_145FC
		mov	word ptr es:[bx], 160h
		jmp	loc_145FC
; ---------------------------------------------------------------------------

loc_14579:
		cmp	byte_34A4B, 1
		jnz	loc_14619
		push	0
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		les	bx, [bp+arg_0]
		add	word ptr es:[bx], 20h ;	' '
		cmp	word ptr es:[bx], 240h
		jle	short loc_145AA
		mov	word ptr es:[bx], 20h ;	' '

loc_145AA:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 108h
		jnz	short loc_145C3
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 120h
		jl	short loc_145C3
		mov	word ptr es:[bx], 20h ;	' '

loc_145C3:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 138h
		jnz	short loc_145DC
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 120h
		jl	short loc_145DC
		mov	word ptr es:[bx], 20h ;	' '

loc_145DC:
		les	bx, [bp+arg_4]
		cmp	word ptr es:[bx], 168h
		jnz	short loc_145FC
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 160h
		jle	short loc_145FC
		cmp	word ptr es:[bx], 200h
		jge	short loc_145FC
		mov	word ptr es:[bx], 200h

loc_145FC:
		push	1
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		mov	byte_34A4B, 0
		jmp	loc_146B6
; ---------------------------------------------------------------------------

loc_14619:
		cmp	byte_34A4E, 1
		jnz	short loc_1468E
		pushd	[bp+arg_C]
		pushd	[bp+arg_8]
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_141D6
		add	sp, 0Ch
		or	ax, ax
		jz	short loc_14644
		mov	ax, 1
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_14644:
		cmp	byte_35889, 0
		jz	short loc_14687
		push	0
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx], 240h
		les	bx, [bp+arg_4]
		mov	word ptr es:[bx], 168h
		push	1
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		call	sub_140A1
		add	sp, 6
		mov	byte_35889, 0

loc_14687:
		mov	byte_34A4E, 0
		jmp	short loc_146B6
; ---------------------------------------------------------------------------

loc_1468E:
		cmp	byte_34A53, 1
		jnz	short loc_146B1
		pushd	[bp+arg_C]
		pushd	[bp+arg_8]
		push	1680200h
		call	sub_141D6
		add	sp, 0Ch
		mov	byte_34A53, 0
		jmp	short loc_146B6
; ---------------------------------------------------------------------------

loc_146B1:
		mov	ax, 2
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_146B6:
		xor	ax, ax
		pop	bp
		retf
sub_14399	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_146BA	proc far
		push	bp
		mov	bp, sp
		pushd	[off_39452] ; font
		call	@$bdla$qnv
		add	sp, 4
		pushd	[off_3945A] ; font
		call	@$bdla$qnv
		add	sp, 4
		pushd	[off_39456] ; font
		call	@$bdla$qnv
		add	sp, 4
		pushd	[off_39462] ; font
		call	@$bdla$qnv
		add	sp, 4
		pop	bp
		retf
sub_146BA	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_146F3	proc far

dest		= byte ptr -1Ch
var_C		= byte ptr -0Ch
stream		= dword	ptr -4

		enter	1Ch, 0
		push	si
		lea	ax, [bp+var_C]
		push	ss
		push	ax
		push	ds
		push	offset aHiscore_0 ; "HISCORE"
		mov	cx, 8
		call	SCOPY@
		mov	al, _rank
		cbw
		mov	bx, ax
		cmp	bx, RANK_LUNATIC
		ja	short loc_1473E
		add	bx, bx
		jmp	cs:off_14806[bx]

loc_1471B:
		push	ds
		push	offset aReyhies_dat ; "REYHIES.DAT"
		jmp	short loc_14731
; ---------------------------------------------------------------------------

loc_14721:
		push	ds
		push	offset aReyhino_dat ; "REYHINO.DAT"
		jmp	short loc_14731
; ---------------------------------------------------------------------------

loc_14727:
		push	ds
		push	offset aReyhiha_dat ; "REYHIHA.DAT"
		jmp	short loc_14731
; ---------------------------------------------------------------------------

loc_1472D:
		push	ds
		push	offset aReyhilu_dat ; "REYHILU.DAT"

loc_14731:
		push	ss
		lea	ax, [bp+dest]
		push	ax		; dest
		call	_strcpy
		add	sp, 8

loc_1473E:
		push	ds
		push	offset aWB	; "wb"
		push	ss
		lea	ax, [bp+dest]
		push	ax		; path
		call	_fopen
		add	sp, 8
		mov	word ptr [bp+stream+2],	dx
		mov	word ptr [bp+stream], ax
		or	ax, dx
		jz	loc_14803
		push	7
		push	ss
		lea	ax, [bp+var_C]
		push	ax
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax
		call	_write
		add	sp, 8
		xor	si, si
		jmp	short loc_14790
; ---------------------------------------------------------------------------

loc_14777:
		les	bx, off_39452
		add	bx, si
		mov	al, es:[bx]
		push	ax
		call	sub_13956
		pop	cx
		les	bx, off_39452
		add	bx, si
		mov	es:[bx], al
		inc	si

loc_14790:
		cmp	si, 0A0h
		jl	short loc_14777
		push	0A0h
		pushd	[off_39452]
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax
		call	_write
		add	sp, 8
		push	28h ; '('
		pushd	[off_39462]
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax
		call	_write
		add	sp, 8
		push	14h
		pushd	[off_3945A]
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax
		call	_write
		add	sp, 8
		push	14h
		pushd	[off_39456]
		les	bx, [bp+stream]
		mov	al, es:[bx+4]
		cbw
		push	ax
		call	_write
		add	sp, 8
		pushd	[bp+stream] ; stream
		call	_fclose
		add	sp, 4

loc_14803:
		pop	si
		leave
		retf
sub_146F3	endp

; ---------------------------------------------------------------------------
off_14806	dw offset loc_1471B
		dw offset loc_14721
		dw offset loc_14727
		dw offset loc_1472D

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1480E	proc far

var_1A		= byte ptr -1Ah
var_A		= byte ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	1Ah, 0
		push	si
		push	di
		mov	[bp+var_6], 0
		xor	di, di
		mov	[bp+var_2], 20h	; ' '
		mov	[bp+var_4], 0F0h
		xor	si, si
		jmp	short loc_1482E
; ---------------------------------------------------------------------------

loc_14829:
		mov	[bp+si+var_1A],	20h ; ' '
		inc	si

loc_1482E:
		cmp	si, 10h
		jl	short loc_14829
		mov	[bp+var_A], 0
		call	sub_B87C

loc_1483C:
		push	0
		call	sub_B502
		pop	cx
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	ss
		lea	ax, [bp+var_1A]
		push	ax
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	ss
		lea	ax, [bp+var_2]
		push	ax
		call	sub_14399
		add	sp, 10h
		mov	[bp+var_8], ax
		cmp	[bp+var_8], 1
		jz	short loc_14886
		cmp	byte_34A52, 0
		jnz	short loc_14886
		cmp	di, 3E8h
		ja	short loc_14886
		cmp	[bp+var_8], 2
		jz	short loc_1483C
		push	4
		call	_frame_delay
		pop	cx
		inc	di
		jmp	short loc_1483C
; ---------------------------------------------------------------------------

loc_14886:
		mov	byte_34A52, 0
		xor	si, si
		jmp	short loc_148A6
; ---------------------------------------------------------------------------

loc_1488F:
		mov	al, [bp+si+var_1A]
		mov	bx, [bp+arg_0]
		shl	bx, 4
		add	bx, si
		mov	es, word ptr off_39452+2
		add	bx, word ptr off_39452
		mov	es:[bx], al
		inc	si

loc_148A6:
		cmp	si, 10h
		jl	short loc_1488F
		call	sub_146F3
		pop	di
		pop	si
		leave
		retf
sub_1480E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_148B3	proc far

var_D2		= byte ptr -0D2h
var_D0		= byte ptr -0D0h
var_C0		= byte ptr -0C0h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= dword	ptr  0Ch

		enter	0D0h, 0
		push	si
		push	di
		mov	di, [bp+arg_4]
		lea	ax, [bp+var_D0]
		push	ss
		push	ax
		push	ds
		push	offset off_358A3
		mov	cx, 10h
		call	SCOPY@
		call	sub_EC37
		call	_z_palette_black
		push	1
		call	_graph_accesspage_func
		pop	cx
		cmp	di, 1Eh
		jge	short loc_148F0
		push	ds
		push	offset aGame_o_grp ; "game_o.grp"
		call	sub_10BAE
		jmp	short loc_148F9
; ---------------------------------------------------------------------------

loc_148F0:
		push	ds
		push	offset aEndm_a_grp ; "endm_a.grp"
		call	sub_10C31

loc_148F9:
		add	sp, 4
		call	sub_EC80
		call	sub_ED86
		push	1
		call	_graph_accesspage_func
		pop	cx
		cmp	di, 1Eh
		jge	short loc_14942
		call	graph_putsa_fx c, 0, large (227h shl 16) or 384, offset aUmx_2, ds	; "東方靈異伝　強者の記録　"
		mov	al, _rank
		cbw
		shl	ax, 2
		lea	dx, [bp+var_D0]
		add	ax, dx
		mov	bx, ax
		pushd	dword ptr ss:[bx]
		push	(227h shl 16) or 384
		jmp	short loc_1496F
; ---------------------------------------------------------------------------

loc_14942:
		call	graph_putsa_fx c, 0, large (227h shl 16) or 0, offset aUmx_1, ds	; "東方靈異伝　強者の記録"
		mov	al, _rank
		cbw
		shl	ax, 2
		lea	dx, [bp+var_D0]
		add	ax, dx
		mov	bx, ax
		pushd	dword ptr ss:[bx]
		push	(227h shl 16) or 0

loc_1496F:
		push	192
		call	graph_putsa_fx
		add	sp, 0Ah
		push	0
		call	_graph_accesspage_func
		pop	cx
		cmp	di, 1Eh
		jge	short loc_149C0
		push	100120h
		push	1800000h
		pushd	30h ; '0'
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch
		call	_graph_move_byterect_interpage c, large (384 shl 16) or 0, large (RES_Y shl 16) or 288, large (384 shl 16) or 0, large (1 shl 16) or 0
		jmp	short loc_149D4
; ---------------------------------------------------------------------------

loc_149C0:
		push	100120h
		pushd	0
		pushd	30h ; '0'
		call	_graph_slow_2xscale_rect_1_to_0
		add	sp, 0Ch

loc_149D4:
		call	sub_13A7D
		or	ax, ax
		jnz	loc_14BCE
		mov	[bp+var_4], 0
		jmp	short loc_14A04
; ---------------------------------------------------------------------------

loc_149E8:
		mov	ax, word ptr [bp+var_4]
		imul	ax, 12h
		lea	dx, [bp+var_C0]
		add	ax, dx
		push	ss
		push	ax
		push	word ptr [bp+var_4]
		call	sub_13BBA
		add	sp, 6
		inc	[bp+var_4]

loc_14A04:
		cmp	[bp+var_4], 0Ah
		jl	short loc_149E8
		mov	[bp+var_4], 0
		jmp	short loc_14A2F
; ---------------------------------------------------------------------------

loc_14A15:
		mov	ax, word ptr [bp+var_4]
		shl	ax, 2
		les	bx, off_39462
		add	bx, ax
		mov	eax, es:[bx]
		cmp	eax, [bp+arg_0]
		jle	short loc_14A36
		inc	[bp+var_4]

loc_14A2F:
		cmp	[bp+var_4], 0Ah
		jl	short loc_14A15

loc_14A36:
		call	sub_B87C
		cmp	[bp+var_4], 0Ah
		jge	loc_14B8D
		mov	[bp+var_8], 9
		jmp	loc_14AD1
; ---------------------------------------------------------------------------

loc_14A4F:
		push	ss
		mov	ax, word ptr [bp+var_8]
		imul	ax, 12h
		lea	dx, [bp+var_D2]
		add	ax, dx
		push	ax		; src
		mov	ax, word ptr [bp+var_8]
		imul	ax, 12h
		lea	dx, [bp+var_C0]
		add	ax, dx
		push	ss
		push	ax		; dest
		call	_strcpy
		add	sp, 8
		mov	ax, word ptr [bp+var_8]
		dec	ax
		shl	ax, 2
		les	bx, off_39462
		add	bx, ax
		mov	eax, es:[bx]
		mov	dx, word ptr [bp+var_8]
		shl	dx, 2
		mov	bx, word ptr off_39462
		add	bx, dx
		mov	es:[bx], eax
		mov	ax, word ptr [bp+var_8]
		dec	ax
		add	ax, ax
		les	bx, off_3945A
		add	bx, ax
		mov	ax, es:[bx]
		mov	dx, word ptr [bp+var_8]
		add	dx, dx
		mov	bx, word ptr off_3945A
		add	bx, dx
		mov	es:[bx], ax
		mov	bx, word ptr [bp+var_8]
		add	bx, bx
		mov	es, word ptr off_39456+2
		add	bx, word ptr off_39456
		mov	al, es:[bx-2]
		mov	es:[bx], al
		mov	al, es:[bx-1]
		mov	es:[bx+1], al
		dec	[bp+var_8]

loc_14AD1:
		mov	eax, [bp+var_8]
		cmp	eax, [bp+var_4]
		jg	loc_14A4F
		mov	[bp+var_C], 9Fh
		jmp	short loc_14B04
; ---------------------------------------------------------------------------

loc_14AE7:
		mov	bx, word ptr [bp+var_C]
		mov	es, word ptr off_39452+2
		add	bx, word ptr off_39452
		mov	al, es:[bx-10h]
		mov	bx, word ptr off_39452
		add	bx, word ptr [bp+var_C]
		mov	es:[bx], al
		dec	[bp+var_C]

loc_14B04:
		mov	eax, [bp+var_4]
		shl	eax, 4
		add	eax, 10h
		cmp	eax, [bp+var_C]
		jle	short loc_14AE7
		push	ss
		lea	ax, [bp+var_C0]
		push	ax
		pushd	[bp+arg_6]
		push	di
		pushd	[bp+arg_0]
		push	word ptr [bp+var_4]
		call	sub_13DF5
		add	sp, 10h
		call	sub_13C20
		mov	ax, word ptr [bp+var_4]
		shl	ax, 2
		les	bx, off_39462
		add	bx, ax
		mov	eax, [bp+arg_0]
		mov	es:[bx], eax
		mov	ax, word ptr [bp+var_4]
		add	ax, ax
		les	bx, off_3945A
		add	bx, ax
		mov	es:[bx], di
		mov	ax, word ptr [bp+var_4]
		add	ax, ax
		les	bx, off_39456
		add	bx, ax
		push	es
		les	si, [bp+arg_6]
		mov	al, es:[si]
		pop	es
		mov	es:[bx], al
		les	bx, [bp+arg_6]
		mov	al, es:[bx+1]
		mov	bx, word ptr [bp+var_4]
		add	bx, bx
		mov	es, word ptr off_39456+2
		add	bx, word ptr off_39456
		mov	es:[bx+1], al
		push	word ptr [bp+var_4]
		call	sub_1480E
		pop	cx
		jmp	short loc_14BC5
; ---------------------------------------------------------------------------

loc_14B8D:
		push	ss
		lea	ax, [bp+var_C0]
		push	ax
		pushd	[bp+arg_6]
		push	di
		pushd	[bp+arg_0]
		push	1Eh
		call	sub_13DF5
		add	sp, 10h
		mov	byte_34A52, 1
		mov	byte_34A4E, 1

loc_14BAF:
		push	0
		call	sub_B502
		pop	cx
		cmp	byte_34A52, 0
		jz	short loc_14BC5
		cmp	byte_34A4E, 0
		jnz	short loc_14BAF

loc_14BC5:
		mov	ax, seg	main_06_TEXT
		mov	es, ax
		assume es:main_06_TEXT
		call	sub_146BA

loc_14BCE:
		pop	di
		pop	si
		leave
		retf
sub_148B3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_14BD2	proc far
		push	bp
		mov	bp, sp
		call	sub_13A7D
		call	sub_13BAA
		push	dx
		push	ax
		pop	eax
		les	bx, _resident
		assume es:nothing
		mov	es:[bx+reiidenconfig_t.hiscore], eax
		call	sub_146BA
		pop	bp
		retf
sub_14BD2	endp

main_19_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_20_TEXT	segment	byte public 'CODE' use16
		assume cs:main_20_TEXT
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_14BF0	proc far

var_36		= byte ptr -36h
var_32		= byte ptr -32h
var_30		= byte ptr -30h
var_2E		= byte ptr -2Eh
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah

		enter	36h, 0

loc_14BF4:
		push	si
		push	di
		pushd	[bp+arg_4]
		call	@arc_file_load$qnxc
		push	ss
		lea	ax, [bp+var_36]
		push	ax
		push	10h
		call	@arc_file_get$qncui
		mov	al, [bp+var_32]
		mov	ah, 0
		les	bx, [bp+arg_0]
		mov	es:[bx+280h], ax
		mov	al, [bp+var_30]
		mov	ah, 0
		mov	es:[bx+282h], ax
		mov	al, [bp+var_2E]
		mov	ah, 0
		mov	es:[bx+284h], ax
		mov	ax, es:[bx+280h]
		imul	word ptr es:[bx+282h]
		mov	[bp+var_2], ax
		push	40h
		call	@arc_file_seek$qc
		xor	di, di
		jmp	loc_14E20
; ---------------------------------------------------------------------------

loc_14C45:
		push	[bp+var_2]
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		shl	bx, 2
		les	si, [bp+arg_0]
		add	si, bx
		mov	es:[si+2], dx
		mov	es:[si], ax
		push	[bp+var_2]
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		shl	bx, 2
		les	si, [bp+arg_0]
		add	si, bx
		mov	es:[si+82h], dx
		mov	es:[si+80h], ax
		push	[bp+var_2]
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		shl	bx, 2
		les	si, [bp+arg_0]
		add	si, bx
		mov	es:[si+102h], dx
		mov	es:[si+100h], ax
		push	[bp+var_2]
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		shl	bx, 2
		les	si, [bp+arg_0]
		add	si, bx
		mov	es:[si+182h], dx
		mov	es:[si+180h], ax
		push	[bp+var_2]
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		shl	bx, 2
		les	si, [bp+arg_0]
		add	si, bx
		mov	es:[si+202h], dx
		mov	es:[si+200h], ax
		push	word ptr es:[si+2]
		push	word ptr es:[si]
		push	[bp+var_2]
		call	@arc_file_get$qncui
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx+80h]
		push	[bp+var_2]
		call	@arc_file_get$qncui
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx+100h]
		push	[bp+var_2]
		call	@arc_file_get$qncui
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx+180h]
		push	[bp+var_2]
		call	@arc_file_get$qncui
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx+200h]
		push	[bp+var_2]
		call	@arc_file_get$qncui
		mov	[bp+var_4], 0
		jmp	loc_14E15
; ---------------------------------------------------------------------------

loc_14D4A:
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, [bp+var_4]
		mov	al, es:[bx]
		not	al
		mov	dx, di
		shl	dx, 2
		les	bx, [bp+arg_0]
		add	bx, dx
		les	bx, es:[bx]
		add	bx, [bp+var_4]
		mov	es:[bx], al
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, [bp+var_4]
		mov	al, es:[bx]
		mov	dx, di
		shl	dx, 2
		les	bx, [bp+arg_0]
		add	bx, dx
		les	bx, es:[bx+80h]
		add	bx, [bp+var_4]
		and	es:[bx], al
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, [bp+var_4]
		mov	al, es:[bx]
		mov	dx, di
		shl	dx, 2
		les	bx, [bp+arg_0]
		add	bx, dx
		les	bx, es:[bx+100h]
		add	bx, [bp+var_4]
		and	es:[bx], al
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, [bp+var_4]
		mov	al, es:[bx]
		mov	dx, di
		shl	dx, 2
		les	bx, [bp+arg_0]
		add	bx, dx
		les	bx, es:[bx+180h]
		add	bx, [bp+var_4]
		and	es:[bx], al
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, [bp+var_4]
		mov	al, es:[bx]
		mov	dx, di
		shl	dx, 2
		les	bx, [bp+arg_0]
		add	bx, dx
		les	bx, es:[bx+200h]
		add	bx, [bp+var_4]
		and	es:[bx], al
		inc	[bp+var_4]

loc_14E15:
		mov	ax, [bp+var_4]
		cmp	ax, [bp+var_2]
		jl	loc_14D4A
		inc	di

loc_14E20:
		les	bx, [bp+arg_0]
		cmp	es:[bx+284h], di
		jg	loc_14C45
		call	@arc_file_free$qv
		xor	ax, ax
		pop	di
		pop	si
		leave
		retf
sub_14BF0	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_14E37	proc far

var_9		= byte ptr -9
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	0Ah, 0
		push	si
		push	di
		xor	di, di
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+284h]
		cmp	ax, [bp+arg_8]
		jle	loc_15034
		mov	ax, [bp+arg_4]
		add	ax, 280h
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_6]
		imul	dx, 50h
		add	ax, dx
		add	ax, 0FFB0h
		mov	[bp+var_2], ax
		mov	[bp+var_4], 0
		jmp	loc_1501D
; ---------------------------------------------------------------------------

loc_14E70:
		mov	si, [bp+var_2]
		cmp	[bp+arg_4], 0
		jge	short loc_14E85
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_14E8E
; ---------------------------------------------------------------------------

loc_14E85:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_14E8E:
		mov	[bp+var_8], ax
		mov	[bp+var_6], 0
		jmp	loc_15000
; ---------------------------------------------------------------------------

loc_14E99:
		mov	ax, si
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_8]
		jnz	loc_14FFB
		or	si, si
		jl	loc_14FFB
		mov	ax, [bp+arg_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, di
		cmp	byte ptr es:[bx], 0
		jz	loc_14FFB
		push	0
		call	_grcg_setcolor_rmw
		push	0
		call	_graph_accesspage_func
		mov	ax, [bp+arg_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, di
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	es:[bx], al
		call	_grcg_off_func
		push	1
		call	_graph_accesspage_func
		add	sp, 6
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	al, es:[bx]
		mov	[bp+var_9], al
		cmp	[bp+var_9], 0
		jz	short loc_14F38
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, [bp+arg_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, di
		mov	al, es:[bx]
		and	al, [bp+var_9]
		les	bx, _VRAM_PLANE_B
		add	bx, si
		or	es:[bx], al

loc_14F38:
		push	1
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	al, es:[bx]
		mov	[bp+var_9], al
		cmp	[bp+var_9], 0
		jz	short loc_14F79
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, [bp+arg_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, di
		mov	al, es:[bx]
		and	al, [bp+var_9]
		les	bx, _VRAM_PLANE_R
		add	bx, si
		or	es:[bx], al

loc_14F79:
		push	1
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	al, es:[bx]
		mov	[bp+var_9], al
		cmp	[bp+var_9], 0
		jz	short loc_14FBA
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, [bp+arg_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, di
		mov	al, es:[bx]
		and	al, [bp+var_9]
		les	bx, _VRAM_PLANE_G
		add	bx, si
		or	es:[bx], al

loc_14FBA:
		push	1
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	al, es:[bx]
		mov	[bp+var_9], al
		cmp	[bp+var_9], 0
		jz	short loc_14FFB
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, [bp+arg_8]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, di
		mov	al, es:[bx]
		and	al, [bp+var_9]
		les	bx, _VRAM_PLANE_E
		add	bx, si
		or	es:[bx], al

loc_14FFB:
		inc	si
		inc	di
		inc	[bp+var_6]

loc_15000:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+280h]
		cmp	ax, [bp+var_6]
		jg	loc_14E99
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jge	short loc_1502C
		inc	[bp+var_4]

loc_1501D:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+282h]
		cmp	ax, [bp+var_4]
		jg	loc_14E70

loc_1502C:
		push	0
		call	_graph_accesspage_func
		pop	cx

loc_15034:
		pop	di
		pop	si
		leave
		retf
sub_14E37	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15038	proc far

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	0Ah, 0
		push	si
		push	di
		mov	di, [bp+arg_8]
		xor	si, si
		les	bx, [bp+arg_0]
		cmp	es:[bx+284h], di
		jle	loc_1520A
		mov	ax, [bp+arg_4]
		add	ax, 280h
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_6]
		imul	dx, 50h
		add	ax, dx
		add	ax, 0FFB0h
		mov	[bp+var_2], ax
		mov	[bp+var_6], 0
		jmp	loc_151F3
; ---------------------------------------------------------------------------

loc_15071:
		mov	ax, [bp+var_2]
		mov	[bp+var_4], ax
		cmp	[bp+arg_4], 0
		jge	short loc_15086
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_1508F
; ---------------------------------------------------------------------------

loc_15086:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_1508F:
		mov	[bp+var_A], ax
		mov	[bp+var_8], 0
		jmp	loc_151D6
; ---------------------------------------------------------------------------

loc_1509A:
		mov	ax, [bp+var_4]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_A]
		jnz	loc_151CF
		cmp	[bp+var_4], 0
		jl	loc_151CF
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	loc_151CF
		push	0
		call	_grcg_setcolor_rmw
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_4]
		mov	es:[bx], al
		call	_grcg_off_func
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+80h]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	short loc_15130
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+80h]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_4]
		or	es:[bx], al

loc_15130:
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+100h]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	short loc_15165
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+100h]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_R
		add	bx, [bp+var_4]
		or	es:[bx], al

loc_15165:
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+180h]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	short loc_1519A
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+180h]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_G
		add	bx, [bp+var_4]
		or	es:[bx], al

loc_1519A:
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+200h]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	short loc_151CF
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+200h]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_E
		add	bx, [bp+var_4]
		or	es:[bx], al

loc_151CF:
		inc	[bp+var_4]
		inc	si
		inc	[bp+var_8]

loc_151D6:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+280h]
		cmp	ax, [bp+var_8]
		jg	loc_1509A
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jge	short loc_15202
		inc	[bp+var_6]

loc_151F3:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+282h]
		cmp	ax, [bp+var_6]
		jg	loc_15071

loc_15202:
		push	0
		call	_graph_accesspage_func
		pop	cx

loc_1520A:
		pop	di
		pop	si
		leave
		retf
sub_15038	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1520E	proc far

var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= byte ptr -0Eh
var_D		= byte ptr -0Dh
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h

		enter	14h, 0
		push	si
		push	di
		mov	ax, [bp+arg_4]
		add	ax, 20h	; ' '
		sar	ax, 3
		mov	dx, [bp+arg_8]
		add	dx, 20h	; ' '
		sar	dx, 3
		sub	ax, dx
		mov	[bp+var_6], ax
		xor	si, si
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+284h]
		cmp	ax, [bp+arg_C]
		jle	loc_15570
		mov	ax, [bp+arg_4]
		add	ax, 280h
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_6]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_6]
		shl	dx, 4
		add	ax, dx
		add	ax, 0FFB0h
		mov	[bp+var_4], ax
		mov	[bp+var_2], 0
		jmp	loc_15559
; ---------------------------------------------------------------------------

loc_15266:
		mov	ax, [bp+var_4]
		mov	[bp+var_10], ax
		cmp	[bp+arg_4], 0
		jge	short loc_1527B
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_15284
; ---------------------------------------------------------------------------

loc_1527B:
		mov	ax, [bp+var_4]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_15284:
		mov	[bp+var_14], ax
		cmp	[bp+var_6], 0
		jle	short loc_152EA
		mov	ax, [bp+arg_E]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, si
		mov	al, es:[bx]
		mov	[bp+var_E], al
		mov	di, 1
		jmp	short loc_152DD
; ---------------------------------------------------------------------------

loc_152A8:
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		mov	ax, si
		add	ax, di
		add	bx, ax
		mov	al, es:[bx-1]
		not	al
		mov	dx, [bp+arg_E]
		shl	dx, 2
		les	bx, [bp+arg_0]
		add	bx, dx
		les	bx, es:[bx]
		mov	dx, si
		add	dx, di
		add	bx, dx
		and	al, es:[bx]
		mov	[bp+di+var_E], al
		inc	di

loc_152DD:
		les	bx, [bp+arg_0]
		cmp	es:[bx+280h], di
		jg	short loc_152A8
		jmp	loc_153AF
; ---------------------------------------------------------------------------

loc_152EA:
		cmp	[bp+var_6], 0
		jge	short loc_15367
		xor	di, di
		jmp	short loc_15329
; ---------------------------------------------------------------------------

loc_152F4:
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		mov	ax, si
		add	ax, di
		add	bx, ax
		mov	al, es:[bx+1]
		not	al
		mov	dx, [bp+arg_E]
		shl	dx, 2
		les	bx, [bp+arg_0]
		add	bx, dx
		les	bx, es:[bx]
		mov	dx, si
		add	dx, di
		add	bx, dx
		and	al, es:[bx]
		mov	[bp+di+var_E], al
		inc	di

loc_15329:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+280h]
		dec	ax
		cmp	ax, di
		jg	short loc_152F4
		mov	ax, es:[bx+280h]
		add	ax, si
		mov	dx, [bp+arg_E]
		shl	dx, 2
		add	bx, dx
		mov	dx, es:[bx+2]
		add	ax, es:[bx]
		mov	bx, ax
		mov	es, dx
		mov	al, es:[bx-1]
		les	bx, [bp+arg_0]
		mov	bx, es:[bx+280h]
		lea	dx, [bp+var_E]
		dec	dx
		add	bx, dx
		mov	ss:[bx], al
		jmp	short loc_153AF
; ---------------------------------------------------------------------------

loc_15367:
		cmp	[bp+var_6], 0
		jnz	short loc_153AF
		xor	di, di
		jmp	short loc_153A5
; ---------------------------------------------------------------------------

loc_15371:
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		mov	ax, si
		add	ax, di
		add	bx, ax
		mov	al, es:[bx]
		not	al
		mov	dx, [bp+arg_E]
		shl	dx, 2
		les	bx, [bp+arg_0]
		add	bx, dx
		les	bx, es:[bx]
		mov	dx, si
		add	dx, di
		add	bx, dx
		and	al, es:[bx]
		mov	[bp+di+var_E], al
		inc	di

loc_153A5:
		les	bx, [bp+arg_0]
		cmp	es:[bx+280h], di
		jg	short loc_15371

loc_153AF:
		cmp	[bp+arg_8], 0
		jl	short loc_153CE
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+280h]
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		mov	ax, [bp+arg_A]
		add	ax, [bp+var_2]
		push	ax
		push	[bp+arg_8]
		jmp	short loc_153E6
; ---------------------------------------------------------------------------

loc_153CE:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+280h]
		dec	ax
		push	ax
		push	ss
		lea	ax, [bp+var_D]
		push	ax
		mov	ax, [bp+arg_A]
		add	ax, [bp+var_2]
		push	ax
		push	0

loc_153E6:
		call	_graph_copy_hline_mask_1_to_0
		add	sp, 0Ah
		mov	[bp+var_12], 0
		jmp	loc_1553C
; ---------------------------------------------------------------------------

loc_153F6:
		mov	ax, [bp+var_10]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_14]
		jnz	loc_15535
		cmp	[bp+var_10], 0
		jl	loc_15535
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	loc_15535
		push	0
		call	_grcg_setcolor_rmw
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_10]
		mov	es:[bx], al
		call	_grcg_off_func
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+80h]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	short loc_15490
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+80h]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_10]
		or	es:[bx], al

loc_15490:
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+100h]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	short loc_154C7
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+100h]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_R
		add	bx, [bp+var_10]
		or	es:[bx], al

loc_154C7:
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+180h]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	short loc_154FE
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+180h]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_G
		add	bx, [bp+var_10]
		or	es:[bx], al

loc_154FE:
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+200h]
		add	bx, si
		cmp	byte ptr es:[bx], 0
		jz	short loc_15535
		mov	ax, [bp+arg_C]
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		les	bx, es:[bx+200h]
		add	bx, si
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_E
		add	bx, [bp+var_10]
		or	es:[bx], al

loc_15535:
		inc	[bp+var_10]
		inc	si
		inc	[bp+var_12]

loc_1553C:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+280h]
		cmp	ax, [bp+var_12]
		jg	loc_153F6
		add	[bp+var_4], 50h	; 'P'
		cmp	[bp+var_4], 7D00h
		jge	short loc_15568
		inc	[bp+var_2]

loc_15559:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+282h]
		cmp	ax, [bp+var_2]
		jg	loc_15266

loc_15568:
		push	0
		call	_graph_accesspage_func
		pop	cx

loc_15570:
		pop	di
		pop	si
		leave
		retf
sub_1520E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15574	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_155E7
; ---------------------------------------------------------------------------

loc_1557C:
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx]	; font
		call	@$bdla$qnv
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx+80h] ; font
		call	@$bdla$qnv
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx+100h] ; font
		call	@$bdla$qnv
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx+180h] ; font
		call	@$bdla$qnv
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+arg_0]
		add	bx, ax
		pushd	dword ptr es:[bx+200h] ; font
		call	@$bdla$qnv
		add	sp, 14h
		inc	si

loc_155E7:
		les	bx, [bp+arg_0]
		cmp	es:[bx+284h], si
		jg	short loc_1557C
		pop	si
		pop	bp
		retf
sub_15574	endp

main_20_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_21_TEXT	segment	byte public 'CODE' use16
		assume cs:main_21_TEXT
		;org 4
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_155F4	proc far
		push	bp
		mov	bp, sp
		xor	dx, dx
		jmp	loc_15686
; ---------------------------------------------------------------------------

loc_155FC:
		xor	cx, cx
		jmp	short loc_1567E
; ---------------------------------------------------------------------------

loc_15600:
		mov	bx, dx
		imul	bx, 0A0h
		mov	ax, cx
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4ADCh], 0
		mov	word ptr [bx+4ADAh], 0
		mov	bx, dx
		imul	bx, 0A0h
		mov	ax, cx
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4ACCh], 0
		mov	word ptr [bx+4ACAh], 0
		mov	bx, dx
		imul	bx, 0A0h
		mov	ax, cx
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4AD0h], 0
		mov	word ptr [bx+4ACEh], 0
		mov	bx, dx
		imul	bx, 0A0h
		mov	ax, cx
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4AD4h], 0
		mov	word ptr [bx+4AD2h], 0
		mov	bx, dx
		imul	bx, 0A0h
		mov	ax, cx
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4AD8h], 0
		mov	word ptr [bx+4AD6h], 0
		inc	cx

loc_1567E:
		cmp	cx, 8
		jl	loc_15600
		inc	dx

loc_15686:
		cmp	dx, 0Ah
		jl	loc_155FC
		pop	bp
		retf
sub_155F4	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1568F	proc far

var_32		= byte ptr -32h
var_2E		= byte ptr -2Eh
var_2C		= byte ptr -2Ch
var_2A		= byte ptr -2Ah
arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh

		enter	32h, 0
		push	si
		push	di
		pushd	[bp+arg_4]
		call	@arc_file_load$qnxc
		push	ss
		lea	ax, [bp+var_32]
		push	ax
		push	10h
		call	@arc_file_get$qncui
		mov	al, [bp+var_2E]
		mov	ah, 0
		les	bx, [bp+arg_0]
		mov	es:[bx+8], ax
		mov	al, [bp+var_2C]
		mov	ah, 0
		mov	es:[bx+0Ah], ax
		mov	al, [bp+var_2A]
		mov	ah, 0
		mov	es:[bx+20h], ax
		mov	ax, es:[bx+8]
		imul	word ptr es:[bx+0Ah]
		mov	di, ax
		push	ss
		lea	ax, [bp+var_32]
		push	ax
		push	30h ; '0'
		call	@arc_file_get$qncui
		cmp	byte_35A44, 0
		jnz	loc_1583C
		push	[bp+arg_8]
		nopcall	sub_169CB
		pop	cx
		xor	si, si
		jmp	loc_15831
; ---------------------------------------------------------------------------

loc_156F5:
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4ADCh], dx
		mov	[bx+4ADAh], ax
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4ACCh], dx
		mov	[bx+4ACAh], ax
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4AD0h], dx
		mov	[bx+4ACEh], ax
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4AD4h], dx
		mov	[bx+4AD2h], ax
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4AD8h], dx
		mov	[bx+4AD6h], ax
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4ADAh]
		push	di
		call	@arc_file_get$qncui
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4ACAh]
		push	di
		call	@arc_file_get$qncui
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4ACEh]
		push	di
		call	@arc_file_get$qncui
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4AD2h]
		push	di
		call	@arc_file_get$qncui
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4AD6h]
		push	di
		call	@arc_file_get$qncui
		inc	si

loc_15831:
		les	bx, [bp+arg_0]
		cmp	es:[bx+20h], si
		jg	loc_156F5

loc_1583C:
		les	bx, [bp+arg_0]
		mov	al, byte ptr [bp+arg_8]
		mov	es:[bx+31h], al
		call	@arc_file_free$qv
		xor	ax, ax
		pop	di
		pop	si
		leave
		retf
sub_1568F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15851	proc far

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= dword	ptr  0Eh
arg_C		= dword	ptr  12h
arg_10		= dword	ptr  16h

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+20h]
		les	bx, [bp+arg_4]
		mov	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	al, es:[bx+31h]
		les	bx, [bp+arg_8]
		mov	es:[bx], al
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		les	bx, [bp+arg_10]
		mov	es:[bx], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		les	bx, [bp+arg_C]
		mov	es:[bx], ax
		pop	bp
		retf
sub_15851	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1588A	proc far

var_C		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	0Ch, 0
		push	si
		push	di
		mov	ax, [bp+arg_4]
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_6]
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_2], ax
		xor	si, si
		les	bx, [bp+arg_0]
		mov	al, es:[bx+31h]
		mov	ah, 0
		imul	ax, 0A0h
		mov	dx, [bp+arg_8]
		imul	dx, 14h
		add	ax, dx
		add	ax, 4ACAh
		mov	word ptr [bp+var_C+2], ds
		mov	word ptr [bp+var_C], ax
		mov	ax, es:[bx+20h]
		cmp	ax, [bp+arg_8]
		jle	loc_15A33
		mov	[bp+var_4], 0
		jmp	loc_15A25
; ---------------------------------------------------------------------------

loc_158D7:
		mov	di, [bp+var_2]
		cmp	[bp+arg_4], 0
		jge	short loc_158EC
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_158F5
; ---------------------------------------------------------------------------

loc_158EC:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_158F5:
		mov	[bp+var_8], ax
		mov	[bp+var_6], 0
		jmp	loc_15A04
; ---------------------------------------------------------------------------

loc_15900:
		mov	ax, di
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_8]
		jnz	loc_159FD
		les	bx, [bp+var_C]
		les	bx, es:[bx+10h]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		or	ax, ax
		jz	loc_159FD
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		les	bx, [bp+var_C]
		les	bx, es:[bx+10h]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx], ax
		call	_grcg_off_func
		les	bx, [bp+var_C]
		les	bx, es:[bx]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_15979
		les	bx, [bp+var_C]
		les	bx, es:[bx]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		or	es:[bx], ax

loc_15979:
		les	bx, [bp+var_C]
		les	bx, es:[bx+4]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_159A5
		les	bx, [bp+var_C]
		les	bx, es:[bx+4]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_R
		add	bx, di
		or	es:[bx], ax

loc_159A5:
		les	bx, [bp+var_C]
		les	bx, es:[bx+8]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_159D1
		les	bx, [bp+var_C]
		les	bx, es:[bx+8]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_G
		add	bx, di
		or	es:[bx], ax

loc_159D1:
		les	bx, [bp+var_C]
		les	bx, es:[bx+0Ch]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_159FD
		les	bx, [bp+var_C]
		les	bx, es:[bx+0Ch]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_E
		add	bx, di
		or	es:[bx], ax

loc_159FD:
		add	di, 2
		inc	si
		inc	[bp+var_6]

loc_15A04:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		cmp	ax, [bp+var_6]
		jg	loc_15900
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jge	short loc_15A33
		inc	[bp+var_4]

loc_15A25:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp+var_4]
		jg	loc_158D7

loc_15A33:
		pop	di
		pop	si
		leave
		retf
sub_1588A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15A37	proc far

var_18		= word ptr -18h
var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= dword	ptr -0Eh
var_A		= byte ptr -0Ah
var_9		= byte ptr -9
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		enter	18h, 0
		push	si
		push	di
		mov	ax, [bp+arg_4]
		sar	ax, 3
		mov	dx, [bp+arg_6]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_6]
		shl	dx, 4
		add	ax, dx
		mov	[bp+var_2], ax
		mov	[bp+var_6], 0
		mov	al, byte ptr [bp+arg_4]
		and	al, 7
		mov	[bp+var_9], al
		mov	al, 8
		sub	al, [bp+var_9]
		mov	[bp+var_A], al
		les	bx, [bp+arg_0]
		mov	al, es:[bx+31h]
		mov	ah, 0
		imul	ax, 0A0h
		mov	dx, [bp+arg_8]
		imul	dx, 14h
		add	ax, dx
		add	ax, 4ACAh
		mov	word ptr [bp+var_E+2], ds
		mov	word ptr [bp+var_E], ax
		mov	ax, es:[bx+20h]
		cmp	ax, [bp+arg_8]
		jle	loc_15C7C
		mov	di, [bp+var_2]
		cmp	[bp+arg_4], 0
		jge	short loc_15AA9
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_15AB2
; ---------------------------------------------------------------------------

loc_15AA9:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_15AB2:
		mov	[bp+var_8], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		imul	[bp+arg_A]
		mov	[bp+var_6], ax
		mov	[bp+var_4], 0
		jmp	loc_15C69
; ---------------------------------------------------------------------------

loc_15ACF:
		mov	ax, di
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_8]
		jnz	loc_15C60
		les	bx, [bp+var_E]
		les	bx, es:[bx+10h]
		mov	ax, [bp+var_6]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		mov	[bp+var_18], ax
		les	bx, [bp+var_E]
		les	bx, es:[bx]
		mov	ax, [bp+var_6]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_16], ax
		les	bx, [bp+var_E]
		les	bx, es:[bx+4]
		mov	ax, [bp+var_6]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_14], ax
		les	bx, [bp+var_E]
		les	bx, es:[bx+8]
		mov	ax, [bp+var_6]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_12], ax
		les	bx, [bp+var_E]
		les	bx, es:[bx+0Ch]
		mov	ax, [bp+var_6]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_10], ax
		cmp	[bp+var_9], 0
		jnz	short loc_15B9F
		xor	si, si
		jmp	short loc_15B97
; ---------------------------------------------------------------------------

loc_15B4D:
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		mov	al, byte ptr [bp+si+var_18]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx+si], al
		call	_grcg_off_func
		mov	al, byte ptr [bp+si+var_16]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		or	es:[bx+si], al
		mov	al, byte ptr [bp+si+var_14]
		les	bx, _VRAM_PLANE_R
		add	bx, di
		or	es:[bx+si], al
		mov	al, byte ptr [bp+si+var_12]
		les	bx, _VRAM_PLANE_G
		add	bx, di
		or	es:[bx+si], al
		mov	al, byte ptr [bp+si+var_10]
		les	bx, _VRAM_PLANE_E
		add	bx, di
		or	es:[bx+si], al
		inc	si

loc_15B97:
		cmp	si, 2
		jl	short loc_15B4D
		jmp	loc_15C60
; ---------------------------------------------------------------------------

loc_15B9F:
		xor	si, si
		jmp	loc_15C59
; ---------------------------------------------------------------------------

loc_15BA4:
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		mov	al, byte ptr [bp+si+var_18]
		mov	ah, 0
		mov	cl, [bp+var_9]
		sar	ax, cl
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx+si], al
		mov	al, byte ptr [bp+si+var_18]
		mov	cl, [bp+var_A]
		shl	al, cl
		mov	bx, word ptr _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx+si+1], al
		call	_grcg_off_func
		mov	al, byte ptr [bp+si+var_16]
		mov	ah, 0
		mov	cl, [bp+var_9]
		sar	ax, cl
		les	bx, _VRAM_PLANE_B
		add	bx, di
		or	es:[bx+si], al
		mov	al, byte ptr [bp+si+var_14]
		mov	ah, 0
		sar	ax, cl
		les	bx, _VRAM_PLANE_R
		add	bx, di
		or	es:[bx+si], al
		mov	al, byte ptr [bp+si+var_12]
		mov	ah, 0
		sar	ax, cl
		les	bx, _VRAM_PLANE_G
		add	bx, di
		or	es:[bx+si], al
		mov	al, byte ptr [bp+si+var_10]
		mov	ah, 0
		sar	ax, cl
		les	bx, _VRAM_PLANE_E
		add	bx, di
		or	es:[bx+si], al
		mov	al, byte ptr [bp+si+var_16]
		mov	cl, [bp+var_A]
		shl	al, cl
		les	bx, _VRAM_PLANE_B
		add	bx, di
		or	es:[bx+si+1], al
		mov	al, byte ptr [bp+si+var_14]
		shl	al, cl
		les	bx, _VRAM_PLANE_R
		add	bx, di
		or	es:[bx+si+1], al
		mov	al, byte ptr [bp+si+var_12]
		shl	al, cl
		les	bx, _VRAM_PLANE_G
		add	bx, di
		or	es:[bx+si+1], al
		mov	al, byte ptr [bp+si+var_10]
		shl	al, cl
		les	bx, _VRAM_PLANE_E
		add	bx, di
		or	es:[bx+si+1], al
		inc	si

loc_15C59:
		cmp	si, 2
		jl	loc_15BA4

loc_15C60:
		add	di, 2
		inc	[bp+var_6]
		inc	[bp+var_4]

loc_15C69:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		cmp	ax, [bp+var_4]
		jg	loc_15ACF

loc_15C7C:
		pop	di
		pop	si
		leave
		retf
sub_15A37	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15C80	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_4]
		add	bx, [bp+arg_2]
		mov	ax, es:[bx]
		and	ax, [bp+arg_0]
		les	bx, [bp+arg_8]
		mov	es:[bx], ax
		pop	bp
		retn	0Ch
sub_15C80	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15C99	proc near

arg_0		= word ptr  4
arg_2		= word ptr  6
arg_4		= dword	ptr  8
arg_8		= word ptr  0Ch

		push	bp
		mov	bp, sp
		mov	ax, [bp+arg_8]
		or	ax, [bp+arg_0]
		les	bx, [bp+arg_4]
		add	bx, [bp+arg_2]
		mov	es:[bx], ax
		pop	bp
		retn	0Ah
sub_15C99	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15CAF	proc near

var_2		= word ptr -2
arg_0		= byte ptr  4
arg_2		= word ptr  6
arg_4		= word ptr  8
arg_6		= dword	ptr  0Ah
arg_A		= word ptr  0Eh

		enter	2, 0
		push	si
		mov	si, [bp+arg_A]
		mov	ax, si
		mov	cl, [bp+arg_0]
		sar	ax, cl
		mov	cl, 10h
		sub	cl, [bp+arg_0]
		mov	dx, si
		shl	dx, cl
		add	ax, dx
		mov	[bp+var_2], ax
		les	bx, [bp+arg_6]
		add	bx, [bp+arg_4]
		or	ax, [bp+arg_2]
		mov	es:[bx], ax
		pop	si
		leave
		retn	0Ch
sub_15CAF	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15CDD	proc far

var_20		= word ptr -20h
var_1E		= word ptr -1Eh
var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_16		= dword	ptr -16h
var_12		= word ptr -12h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= byte ptr -8
var_7		= word ptr -7
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		enter	20h, 0
		push	si
		push	di
		mov	ax, [bp+arg_4]
		sar	ax, 3
		mov	dx, [bp+arg_6]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_6]
		shl	dx, 4
		add	ax, dx
		mov	[bp+var_2], ax
		xor	di, di
		mov	al, byte ptr [bp+arg_4]
		and	al, 7
		mov	byte ptr [bp+var_7], al
		mov	al, 10h
		sub	al, byte ptr [bp+var_7]
		mov	[bp+var_8], al
		les	bx, [bp+arg_0]
		mov	al, es:[bx+31h]
		mov	ah, 0
		imul	ax, 0A0h
		mov	dx, [bp+arg_8]
		imul	dx, 14h
		add	ax, dx
		add	ax, 4ACAh
		mov	word ptr [bp+var_16+2],	ds
		mov	word ptr [bp+var_16], ax
		mov	ax, es:[bx+20h]
		cmp	ax, [bp+arg_8]
		jle	loc_15F46
		mov	si, [bp+var_2]
		cmp	[bp+arg_4], 0
		jge	short loc_15D4C
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_15D55
; ---------------------------------------------------------------------------

loc_15D4C:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_15D55:
		mov	[bp+var_7+1], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		imul	[bp+arg_A]
		mov	di, ax
		mov	[bp+var_4], 0
		jmp	loc_15F33
; ---------------------------------------------------------------------------

loc_15D71:
		mov	ax, si
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_7+1]
		jnz	loc_15F2C
		les	bx, [bp+var_16]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_20], ax
		les	bx, [bp+var_16]
		les	bx, es:[bx]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_1E], ax
		les	bx, [bp+var_16]
		les	bx, es:[bx+4]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_1C], ax
		les	bx, [bp+var_16]
		les	bx, es:[bx+8]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_1A], ax
		les	bx, [bp+var_16]
		les	bx, es:[bx+0Ch]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		mov	[bp+var_18], ax
		cmp	byte ptr [bp+var_7], 0
		jnz	loc_15E7A
		push	1
		call	_graph_accesspage_func
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		pushd	[_VRAM_PLANE_B]
		push	si
		push	[bp+var_20]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		pushd	[_VRAM_PLANE_R]
		push	si
		push	[bp+var_20]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_C]
		push	ax
		pushd	[_VRAM_PLANE_G]
		push	si
		push	[bp+var_20]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_A]
		push	ax
		pushd	[_VRAM_PLANE_E]
		push	si
		push	[bp+var_20]
		call	sub_15C80
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		push	[bp+var_1E]
		pushd	[_VRAM_PLANE_B]
		push	si
		push	[bp+var_10]
		call	sub_15C99
		push	[bp+var_1C]
		pushd	[_VRAM_PLANE_R]
		push	si
		push	[bp+var_E]
		call	sub_15C99
		push	[bp+var_1A]
		pushd	[_VRAM_PLANE_G]
		push	si
		push	[bp+var_C]
		call	sub_15C99
		push	[bp+var_18]
		pushd	[_VRAM_PLANE_E]
		push	si
		push	[bp+var_A]
		call	sub_15C99
		jmp	loc_15F2C
; ---------------------------------------------------------------------------

loc_15E7A:
		push	1
		call	_graph_accesspage_func
		mov	ax, [bp+var_20]
		mov	cl, byte ptr [bp+var_7]
		shr	ax, cl
		mov	dx, [bp+var_20]
		mov	cl, [bp+var_8]
		shl	dx, cl
		add	ax, dx
		mov	[bp+var_12], ax
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		pushd	[_VRAM_PLANE_B]
		push	si
		push	[bp+var_12]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		pushd	[_VRAM_PLANE_R]
		push	si
		push	[bp+var_12]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_C]
		push	ax
		pushd	[_VRAM_PLANE_G]
		push	si
		push	[bp+var_12]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_A]
		push	ax
		pushd	[_VRAM_PLANE_E]
		push	si
		push	[bp+var_12]
		call	sub_15C80
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		push	[bp+var_1E]
		pushd	[_VRAM_PLANE_B]
		push	si
		push	[bp+var_10]
		push	[bp+var_7]
		call	sub_15CAF
		push	[bp+var_1C]
		pushd	[_VRAM_PLANE_R]
		push	si
		push	[bp+var_E]
		push	[bp+var_7]
		call	sub_15CAF
		push	[bp+var_1A]
		pushd	[_VRAM_PLANE_G]
		push	si
		push	[bp+var_C]
		push	[bp+var_7]
		call	sub_15CAF
		push	[bp+var_18]
		pushd	[_VRAM_PLANE_E]
		push	si
		push	[bp+var_A]
		push	[bp+var_7]
		call	sub_15CAF

loc_15F2C:
		add	si, 2
		inc	di
		inc	[bp+var_4]

loc_15F33:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		cmp	ax, [bp+var_4]
		jg	loc_15D71

loc_15F46:
		pop	di
		pop	si
		leave
		retf
sub_15CDD	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_15F4A	proc far

var_14		= dword	ptr -14h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	14h, 0
		push	si
		push	di
		mov	ax, [bp+arg_4]
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_6]
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_2], ax
		xor	di, di
		les	bx, [bp+arg_0]
		mov	al, es:[bx+31h]
		mov	ah, 0
		imul	ax, 0A0h
		mov	dx, [bp+arg_8]
		imul	dx, 14h
		add	ax, dx
		add	ax, 4ACAh
		mov	word ptr [bp+var_14+2],	ds
		mov	word ptr [bp+var_14], ax
		mov	ax, es:[bx+20h]
		cmp	ax, [bp+arg_8]
		jle	loc_1612A
		mov	[bp+var_4], 0
		jmp	loc_1611C
; ---------------------------------------------------------------------------

loc_15F97:
		mov	si, [bp+var_2]
		cmp	[bp+arg_4], 0
		jge	short loc_15FAC
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_15FB5
; ---------------------------------------------------------------------------

loc_15FAC:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_15FB5:
		mov	[bp+var_8], ax
		mov	[bp+var_6], 0
		jmp	loc_160FB
; ---------------------------------------------------------------------------

loc_15FC0:
		mov	ax, si
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_8]
		jnz	loc_160F4
		lea	ax, [si+1]
		cwd
		idiv	bx
		cmp	ax, [bp+var_8]
		jnz	loc_160F4
		or	si, si
		jl	loc_160F4
		push	1
		call	_graph_accesspage_func
		pop	cx
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_1606F
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, si
		and	ax, es:[bx]
		mov	[bp+var_10], ax
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_R
		add	bx, si
		and	ax, es:[bx]
		mov	[bp+var_E], ax
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_G
		add	bx, si
		and	ax, es:[bx]
		mov	[bp+var_C], ax
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_E
		add	bx, si
		and	ax, es:[bx]
		mov	[bp+var_A], ax
		jmp	short loc_1607D
; ---------------------------------------------------------------------------

loc_1606F:
		xor	ax, ax
		mov	[bp+var_A], ax
		mov	[bp+var_C], ax
		mov	[bp+var_E], ax
		mov	[bp+var_10], ax

loc_1607D:
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, [bp+var_14]
		les	bx, es:[bx]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		or	ax, [bp+var_10]
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	es:[bx], ax
		les	bx, [bp+var_14]
		les	bx, es:[bx+4]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		or	ax, [bp+var_E]
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	es:[bx], ax
		les	bx, [bp+var_14]
		les	bx, es:[bx+8]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		or	ax, [bp+var_C]
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	es:[bx], ax
		les	bx, [bp+var_14]
		les	bx, es:[bx+0Ch]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		or	ax, [bp+var_A]
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	es:[bx], ax

loc_160F4:
		add	si, 2
		inc	di
		inc	[bp+var_6]

loc_160FB:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		cmp	ax, [bp+var_6]
		jg	loc_15FC0
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jge	short loc_1612A
		inc	[bp+var_4]

loc_1611C:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp+var_4]
		jg	loc_15F97

loc_1612A:
		pop	di
		pop	si
		leave
		retf
sub_15F4A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1612E	proc far

var_E		= dword	ptr -0Eh
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	0Eh, 0
		push	si
		push	di
		mov	ax, [bp+arg_4]
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_6]
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_2], ax
		mov	[bp+var_8], 0
		les	bx, [bp+arg_0]
		mov	al, es:[bx+31h]
		mov	ah, 0
		imul	ax, 0A0h
		mov	dx, [bp+arg_8]
		imul	dx, 14h
		add	ax, dx
		add	ax, 4ACAh
		mov	word ptr [bp+var_E+2], ds
		mov	word ptr [bp+var_E], ax
		mov	ax, es:[bx+20h]
		cmp	ax, [bp+arg_8]
		jle	loc_16340
		mov	[bp+var_4], 0
		jmp	loc_1632A
; ---------------------------------------------------------------------------

loc_1617E:
		mov	si, [bp+var_2]
		cmp	[bp+arg_4], 0
		jge	short loc_16193
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_1619C
; ---------------------------------------------------------------------------

loc_16193:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_1619C:
		mov	[bp+var_A], ax
		mov	[bp+var_6], 0
		jmp	loc_16309
; ---------------------------------------------------------------------------

loc_161A7:
		mov	ax, si
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_A]
		jnz	loc_16300
		lea	ax, [si+1]
		cwd
		idiv	bx
		cmp	ax, [bp+var_A]
		jnz	loc_16300
		or	si, si
		jl	loc_16300
		push	0
		call	_grcg_setcolor_rmw
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		les	bx, [bp+var_E]
		les	bx, es:[bx+10h]
		mov	ax, [bp+var_8]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	es:[bx], ax
		call	_grcg_off_func
		les	bx, [bp+var_E]
		les	bx, es:[bx+10h]
		mov	ax, [bp+var_8]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		or	ax, ax
		jz	loc_16300
		push	1
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	di, es:[bx]
		or	di, di
		jz	short loc_1624F
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, [bp+var_E]
		les	bx, es:[bx+10h]
		mov	ax, [bp+var_8]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		and	ax, di
		les	bx, _VRAM_PLANE_B
		add	bx, si
		or	es:[bx], ax

loc_1624F:
		push	1
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	di, es:[bx]
		or	di, di
		jz	short loc_1628A
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, [bp+var_E]
		les	bx, es:[bx+10h]
		mov	ax, [bp+var_8]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		and	ax, di
		les	bx, _VRAM_PLANE_R
		add	bx, si
		or	es:[bx], ax

loc_1628A:
		push	1
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	di, es:[bx]
		or	di, di
		jz	short loc_162C5
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, [bp+var_E]
		les	bx, es:[bx+10h]
		mov	ax, [bp+var_8]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		and	ax, di
		les	bx, _VRAM_PLANE_G
		add	bx, si
		or	es:[bx], ax

loc_162C5:
		push	1
		call	_graph_accesspage_func
		pop	cx
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	di, es:[bx]
		or	di, di
		jz	short loc_16300
		push	0
		call	_graph_accesspage_func
		pop	cx
		les	bx, [bp+var_E]
		les	bx, es:[bx+10h]
		mov	ax, [bp+var_8]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		and	ax, di
		les	bx, _VRAM_PLANE_E
		add	bx, si
		or	es:[bx], ax

loc_16300:
		add	si, 2
		inc	[bp+var_8]
		inc	[bp+var_6]

loc_16309:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		cmp	ax, [bp+var_6]
		jg	loc_161A7
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jge	short loc_16338
		inc	[bp+var_4]

loc_1632A:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Ah]
		cmp	ax, [bp+var_4]
		jg	loc_1617E

loc_16338:
		push	0
		call	_graph_accesspage_func
		pop	cx

loc_16340:
		pop	di
		pop	si
		leave
		retf
sub_1612E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_16344	proc far

var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h

		enter	2, 0
		push	si
		push	di
		mov	di, [bp+arg_E]
		xor	si, si
		jmp	short loc_1639B
; ---------------------------------------------------------------------------

loc_16351:
		movsx	eax, [bp+arg_C]
		mov	bx, di
		and	bx, 0FFh
		add	bx, bx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		mov	ebx, 100h
		cdq
		idiv	ebx
		add	ax, [bp+arg_4]
		mov	[bp+var_2], ax
		mov	ax, 100h
		cwd
		idiv	[bp+arg_A]
		add	di, ax
		push	si
		push	[bp+arg_8]
		mov	ax, [bp+arg_6]
		add	ax, si
		push	ax
		push	[bp+var_2]
		pushd	[bp+arg_0]
		call	sub_15A37
		add	sp, 0Ch
		inc	si

loc_1639B:
		les	bx, [bp+arg_0]
		cmp	es:[bx+0Ah], si
		jg	short loc_16351
		pop	di
		pop	si
		leave
		retf
sub_16344	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_163A8	proc far

var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h

		enter	2, 0
		push	si
		push	di
		mov	di, [bp+arg_E]
		xor	si, si
		jmp	short loc_163FF
; ---------------------------------------------------------------------------

loc_163B5:
		movsx	eax, [bp+arg_C]
		mov	bx, di
		and	bx, 0FFh
		add	bx, bx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		mov	ebx, 100h
		cdq
		idiv	ebx
		add	ax, [bp+arg_4]
		mov	[bp+var_2], ax
		mov	ax, 100h
		cwd
		idiv	[bp+arg_A]
		add	di, ax
		push	si
		push	[bp+arg_8]
		mov	ax, [bp+arg_6]
		add	ax, si
		push	ax
		push	[bp+var_2]
		pushd	[bp+arg_0]
		call	sub_15CDD
		add	sp, 0Ch
		inc	si

loc_163FF:
		les	bx, [bp+arg_0]
		cmp	es:[bx+0Ah], si
		jg	short loc_163B5
		pop	di
		pop	si
		leave
		retf
sub_163A8	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1640C	proc far

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= word ptr  16h
arg_12		= word ptr  18h
arg_14		= word ptr  1Ah
arg_16		= word ptr  1Ch

		enter	6, 0
		push	si
		push	di
		mov	ax, [bp+arg_E]
		mov	[bp+var_2], ax
		mov	ax, [bp+arg_16]
		mov	[bp+var_6], ax
		xor	si, si
		jmp	loc_164D7
; ---------------------------------------------------------------------------

loc_16423:
		movsx	eax, [bp+arg_C]
		mov	bx, [bp+var_2]
		and	bx, 0FFh
		add	bx, bx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		mov	ebx, 100h
		cdq
		idiv	ebx
		add	ax, [bp+arg_4]
		mov	di, ax
		movsx	eax, [bp+arg_14]
		mov	bx, [bp+var_6]
		and	bx, 0FFh
		add	bx, bx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		mov	ebx, 100h
		cdq
		idiv	ebx
		add	ax, [bp+arg_10]
		mov	[bp+var_4], ax
		mov	ax, 100h
		cwd
		idiv	[bp+arg_A]
		add	[bp+var_2], ax
		mov	ax, 100h
		cwd
		idiv	[bp+arg_12]
		add	[bp+var_6], ax
		cmp	di, [bp+var_4]
		jle	short loc_164AB
		push	si
		mov	ax, di
		sub	ax, [bp+var_4]
		mov	bx, 10h
		cwd
		idiv	bx
		shl	ax, 4
		add	ax, 10h
		push	ax
		mov	ax, [bp+arg_6]
		add	ax, si
		push	ax
		push	[bp+var_4]
		jmp	short loc_164CE
; ---------------------------------------------------------------------------

loc_164AB:
		push	si
		mov	ax, [bp+var_4]
		sub	ax, di
		mov	bx, 10h
		cwd
		idiv	bx
		shl	ax, 4
		add	ax, 10h
		push	ax
		mov	ax, [bp+arg_6]
		add	ax, si
		push	ax
		les	bx, [bp+arg_0]
		mov	ax, di
		sub	ax, es:[bx+8]
		push	ax

loc_164CE:
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		inc	si

loc_164D7:
		les	bx, [bp+arg_0]
		cmp	es:[bx+0Ah], si
		jg	loc_16423
		pop	di
		pop	si
		leave
		retf
sub_1640C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_164E6	proc far

var_14		= dword	ptr -14h
var_10		= word ptr -10h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch

		enter	14h, 0
		push	si
		push	di
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		sar	ax, 3
		mov	dx, es:[bx+2]
		shl	dx, 6
		add	ax, dx
		mov	dx, es:[bx+2]
		shl	dx, 4
		add	ax, dx
		mov	[bp+var_2], ax
		xor	di, di
		mov	ax, es:[bx+24h]
		mov	[bp+var_8], ax
		mov	al, es:[bx+31h]
		mov	ah, 0
		imul	ax, 0A0h
		mov	dx, [bp+var_8]
		imul	dx, 14h
		add	ax, dx
		add	ax, 4ACAh
		mov	word ptr [bp+var_14+2],	ds
		mov	word ptr [bp+var_14], ax
		mov	ax, [bp+arg_4]
		sar	ax, 3
		mov	dx, [bp+arg_6]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_6]
		shl	dx, 4
		add	ax, dx
		add	[bp+var_2], ax
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		imul	[bp+arg_6]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 10h
		cwd
		idiv	bx
		pop	dx
		add	dx, ax
		mov	di, dx
		mov	bx, word ptr [bp+arg_0]
		mov	ax, es:[bx+20h]
		cmp	ax, [bp+var_8]
		jle	loc_166CE
		mov	[bp+var_4], 0
		jmp	loc_166C6
; ---------------------------------------------------------------------------

loc_16578:
		mov	si, [bp+var_2]
		cmp	[bp+arg_4], 0
		jge	short loc_1658D
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		dec	ax
		jmp	short loc_16596
; ---------------------------------------------------------------------------

loc_1658D:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_16596:
		mov	[bp+var_6], ax
		lea	ax, [si+1]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_6]
		jnz	loc_166AA
		or	si, si
		jl	loc_166AA
		push	1
		call	_graph_accesspage_func
		push	ss
		lea	ax, [bp+var_10]
		push	ax
		pushd	[_VRAM_PLANE_B]
		push	si
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		push	word ptr es:[bx]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_E]
		push	ax
		pushd	[_VRAM_PLANE_R]
		push	si
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		push	word ptr es:[bx]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_C]
		push	ax
		pushd	[_VRAM_PLANE_G]
		push	si
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		push	word ptr es:[bx]
		call	sub_15C80
		push	ss
		lea	ax, [bp+var_A]
		push	ax
		pushd	[_VRAM_PLANE_E]
		push	si
		les	bx, [bp+var_14]
		les	bx, es:[bx+10h]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		push	word ptr es:[bx]
		call	sub_15C80
		push	0
		call	_graph_accesspage_func
		add	sp, 4
		les	bx, [bp+var_14]
		les	bx, es:[bx]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		push	word ptr es:[bx]
		pushd	[_VRAM_PLANE_B]
		push	si
		push	[bp+var_10]
		call	sub_15C99
		les	bx, [bp+var_14]
		les	bx, es:[bx+4]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		push	word ptr es:[bx]
		pushd	[_VRAM_PLANE_R]
		push	si
		push	[bp+var_E]
		call	sub_15C99
		les	bx, [bp+var_14]
		les	bx, es:[bx+8]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		push	word ptr es:[bx]
		pushd	[_VRAM_PLANE_G]
		push	si
		push	[bp+var_C]
		call	sub_15C99
		les	bx, [bp+var_14]
		les	bx, es:[bx+0Ch]
		mov	ax, di
		add	ax, ax
		add	bx, ax
		push	word ptr es:[bx]
		pushd	[_VRAM_PLANE_E]
		push	si
		push	[bp+var_A]
		call	sub_15C99
		add	si, 2

loc_166AA:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+8]
		cwd
		sub	ax, dx
		sar	ax, 1
		add	di, ax
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jge	short loc_166CE
		inc	[bp+var_4]

loc_166C6:
		cmp	[bp+var_4], 8
		jl	loc_16578

loc_166CE:
		pop	di
		pop	si
		leave
		retf
sub_164E6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_166D2	proc far

arg_0		= dword	ptr  6
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h
arg_C		= word ptr  12h
arg_E		= word ptr  14h
arg_10		= word ptr  16h

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		mov	ax, [bp+arg_4]
		mov	es:[bx], ax
		mov	ax, [bp+arg_6]
		mov	es:[bx+2], ax
		mov	ax, [bp+arg_8]
		mov	es:[bx+26h], ax
		mov	ax, [bp+arg_A]
		mov	es:[bx+0Ch], ax
		mov	ax, [bp+arg_C]
		mov	es:[bx+0Eh], ax
		mov	ax, [bp+arg_E]
		mov	es:[bx+10h], ax
		mov	ax, [bp+arg_10]
		mov	es:[bx+12h], ax
		mov	word ptr es:[bx+2Eh], 0
		pop	bp
		retf
sub_166D2	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_16710	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+0Ah]
		mov	ax, es:[bx+8]
		shl	ax, 3
		push	ax
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		pop	bp
		retf
sub_16710	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_16733	proc far

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		enter	6, 0
		push	si
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+2Ch], 0
		jnz	loc_1687F
		mov	ax, [bp+arg_6]
		mov	es:[bx+1Eh], ax
		mov	ax, [bp+arg_8]
		mov	es:[bx+1Ch], ax
		push	es
		mov	si, word ptr [bp+arg_0]
		mov	ax, es:[si]
		pop	es
		mov	es:[bx+4], ax
		mov	es, word ptr [bp+arg_0+2]
		mov	ax, es:[bx+2]
		mov	es:[bx+6], ax
		mov	ax, es:[bx+1Eh]
		add	es:[bx], ax
		mov	ax, es:[bx+0Ch]
		cmp	ax, es:[bx]
		jle	short loc_1677E
		mov	es:[bx], ax
		jmp	short $+2

loc_1677E:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Eh]
		cmp	ax, es:[bx]
		jge	short loc_1678F
		mov	es:[bx], ax
		jmp	short $+2

loc_1678F:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ch]
		add	es:[bx+2], ax
		mov	ax, es:[bx+2]
		cmp	ax, es:[bx+10h]
		jge	short loc_167AE
		mov	ax, es:[bx+10h]
		mov	es:[bx+2], ax
		jmp	short $+2

loc_167AE:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		cmp	ax, es:[bx+12h]
		jle	short loc_167C5
		mov	ax, es:[bx+12h]
		mov	es:[bx+2], ax
		jmp	short $+2

loc_167C5:
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+1Eh], 0
		jle	short loc_167DE
		mov	ax, es:[bx+4]
		mov	bx, 8
		cwd
		idiv	bx
		shl	ax, 3
		jmp	short loc_167F9
; ---------------------------------------------------------------------------

loc_167DE:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		mov	bx, 8
		cwd
		idiv	bx
		shl	ax, 3
		mov	bx, word ptr [bp+arg_0]
		mov	dx, es:[bx+8]
		shl	dx, 3
		add	ax, dx

loc_167F9:
		mov	[bp+var_2], ax
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+0Ah]
		push	8
		push	word ptr es:[bx+6]
		push	ax
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		cmp	ax, es:[bx+6]
		jle	short loc_16825
		mov	ax, es:[bx+6]
		jmp	short loc_16830
; ---------------------------------------------------------------------------

loc_16825:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		add	ax, es:[bx+0Ah]

loc_16830:
		mov	[bp+var_4], ax
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		sub	ax, es:[bx+6]
		mov	[bp+var_6], ax
		cwd
		xor	ax, dx
		sub	ax, dx
		push	ax
		mov	ax, es:[bx+8]
		shl	ax, 3
		push	ax
		push	[bp+var_4]
		push	word ptr es:[bx+4]
		call	_egc_copy_rect_1_to_0
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+24h]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	word ptr [bp+arg_0+2]
		push	bx
		call	sub_15F4A
		add	sp, 12h
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+2Ch], 1
		jmp	short loc_1689A
; ---------------------------------------------------------------------------

loc_1687F:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2Ch]
		cmp	ax, [bp+arg_A]
		jl	short loc_16893
		mov	word ptr es:[bx+2Ch], 0
		jmp	short loc_1689A
; ---------------------------------------------------------------------------

loc_16893:
		les	bx, [bp+arg_0]
		inc	word ptr es:[bx+2Ch]

loc_1689A:
		pop	si
		leave
		retf
sub_16733	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1689D	proc far

arg_0		= dword	ptr  6
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		push	bp
		mov	bp, sp
		push	si
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+2Ch], 0
		jnz	loc_16952
		mov	ax, [bp+arg_6]
		mov	es:[bx+1Eh], ax
		mov	ax, [bp+arg_8]
		mov	es:[bx+1Ch], ax
		push	es
		mov	si, word ptr [bp+arg_0]
		mov	ax, es:[si]
		pop	es
		mov	es:[bx+4], ax
		mov	es, word ptr [bp+arg_0+2]
		mov	ax, es:[bx+2]
		mov	es:[bx+6], ax
		mov	ax, es:[bx+1Eh]
		add	es:[bx], ax
		mov	ax, es:[bx+0Ch]
		cmp	ax, es:[bx]
		jle	short loc_168E7
		mov	es:[bx], ax
		jmp	short $+2

loc_168E7:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+0Eh]
		cmp	ax, es:[bx]
		jge	short loc_168F8
		mov	es:[bx], ax
		jmp	short $+2

loc_168F8:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+1Ch]
		add	es:[bx+2], ax
		mov	ax, es:[bx+2]
		cmp	ax, es:[bx+10h]
		jge	short loc_16917
		mov	ax, es:[bx+10h]
		mov	es:[bx+2], ax
		jmp	short $+2

loc_16917:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2]
		cmp	ax, es:[bx+12h]
		jle	short loc_1692E
		mov	ax, es:[bx+12h]
		mov	es:[bx+2], ax
		jmp	short $+2

loc_1692E:
		les	bx, [bp+arg_0]
		push	word ptr es:[bx+24h]
		push	word ptr es:[bx+2]
		push	word ptr es:[bx]
		push	word ptr [bp+arg_0+2]
		push	bx
		call	sub_1588A
		add	sp, 0Ah
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+2Ch], 1
		jmp	short loc_1696D
; ---------------------------------------------------------------------------

loc_16952:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+2Ch]
		cmp	ax, [bp+arg_A]
		jl	short loc_16966
		mov	word ptr es:[bx+2Ch], 0
		jmp	short loc_1696D
; ---------------------------------------------------------------------------

loc_16966:
		les	bx, [bp+arg_0]
		inc	word ptr es:[bx+2Ch]

loc_1696D:
		pop	si
		pop	bp
		retf
sub_1689D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_16970	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx+28h], 1
		jz	short loc_169C7
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+14h]
		add	ax, es:[bx]
		add	ax, 0FFE8h
		cmp	ax, word_34A8E
		jg	short loc_169C7
		mov	ax, es:[bx+16h]
		add	ax, es:[bx]
		add	ax, 0FFF8h
		cmp	ax, word_34A8E
		jl	short loc_169C7
		mov	ax, es:[bx+2]
		add	ax, es:[bx+18h]
		add	ax, 0FFE8h
		cmp	ax, word_34A90
		jg	short loc_169C7
		mov	ax, es:[bx+2]
		add	ax, es:[bx+1Ah]
		add	ax, 0FFF8h
		cmp	ax, word_34A90
		jl	short loc_169C7
		mov	ax, 1
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_169C7:
		xor	ax, ax
		pop	bp
		retf
sub_16970	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_169CB	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+arg_0]
		xor	si, si
		jmp	loc_16B4B
; ---------------------------------------------------------------------------

loc_169D8:
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	ax, [bx+4ADAh]
		or	ax, [bx+4ADCh]
		jz	short loc_16A09
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4ADAh] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_16A09:
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4ADCh], 0
		mov	word ptr [bx+4ADAh], 0
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	ax, [bx+4ACAh]
		or	ax, [bx+4ACCh]
		jz	short loc_16A53
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4ACAh] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_16A53:
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4ACCh], 0
		mov	word ptr [bx+4ACAh], 0
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	ax, [bx+4ACEh]
		or	ax, [bx+4AD0h]
		jz	short loc_16A9D
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4ACEh] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_16A9D:
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4AD0h], 0
		mov	word ptr [bx+4ACEh], 0
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	ax, [bx+4AD2h]
		or	ax, [bx+4AD4h]
		jz	short loc_16AE7
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4AD2h] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_16AE7:
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4AD4h], 0
		mov	word ptr [bx+4AD2h], 0
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	ax, [bx+4AD6h]
		or	ax, [bx+4AD8h]
		jz	short loc_16B31
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4AD6h] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_16B31:
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4AD8h], 0
		mov	word ptr [bx+4AD6h], 0
		inc	si

loc_16B4B:
		cmp	si, 8
		jl	loc_169D8
		pop	di
		pop	si
		pop	bp
		retf
sub_169CB	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_16B56	proc far

var_34		= byte ptr -34h
var_30		= byte ptr -30h
var_2E		= byte ptr -2Eh
var_2C		= byte ptr -2Ch
var_2		= word ptr -2
arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh

		enter	34h, 0
		push	si
		push	di
		pushd	[bp+arg_4]
		call	@arc_file_load$qnxc
		push	ss
		lea	ax, [bp+var_34]
		push	ax
		push	10h
		call	@arc_file_get$qncui
		mov	al, [bp+var_30]
		mov	ah, 0
		les	bx, [bp+arg_0]
		mov	es:[bx+4], ax
		mov	al, [bp+var_2E]
		mov	ah, 0
		mov	es:[bx+6], ax
		mov	al, [bp+var_2C]
		mov	es:[bx+8], al
		mov	ax, es:[bx+4]
		imul	word ptr es:[bx+6]
		mov	di, ax
		push	ss
		lea	ax, [bp+var_34]
		push	ax
		push	30h ; '0'
		call	@arc_file_get$qncui
		cmp	byte_35A44, 0
		jnz	loc_16D55
		push	[bp+arg_8]
		nopcall	sub_16F1B
		pop	cx
		xor	si, si
		jmp	loc_16D46
; ---------------------------------------------------------------------------

loc_16BBA:
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4D5Ch], dx
		mov	[bx+4D5Ah], ax
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4D4Ch], dx
		mov	[bx+4D4Ah], ax
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4D50h], dx
		mov	[bx+4D4Eh], ax
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4D54h], dx
		mov	[bx+4D52h], ax
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, ax
		push	ax
		call	@$bnwa$qui
		pop	cx
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	cx, si
		imul	cx, 14h
		add	bx, cx
		mov	[bx+4D58h], dx
		mov	[bx+4D56h], ax
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D5Ah]
		push	di
		call	@arc_file_get$qncui
		mov	[bp+var_2], 0
		jmp	short loc_16CD5
; ---------------------------------------------------------------------------

loc_16C98:
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		les	bx, [bx+4D5Ah]
		mov	ax, [bp+var_2]
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		not	ax
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	dx, si
		imul	dx, 14h
		add	bx, dx
		mov	bx, [bx+4D5Ah]
		mov	dx, [bp+var_2]
		add	dx, dx
		add	bx, dx
		mov	es:[bx], ax
		inc	[bp+var_2]

loc_16CD5:
		mov	ax, di
		cwd
		sub	ax, dx
		sar	ax, 1
		cmp	ax, [bp+var_2]
		jg	short loc_16C98
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D4Ah]
		push	di
		call	@arc_file_get$qncui
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D4Eh]
		push	di
		call	@arc_file_get$qncui
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D52h]
		push	di
		call	@arc_file_get$qncui
		mov	bx, [bp+arg_8]
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D56h]
		push	di
		call	@arc_file_get$qncui
		inc	si

loc_16D46:
		les	bx, [bp+arg_0]
		mov	al, es:[bx+8]
		mov	ah, 0
		cmp	ax, si
		jg	loc_16BBA

loc_16D55:
		les	bx, [bp+arg_0]
		mov	al, byte ptr [bp+arg_8]
		mov	es:[bx+0Ah], al
		call	@arc_file_free$qv
		xor	ax, ax
		pop	di
		pop	si
		leave
		retf
sub_16B56	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_16D6A	proc far

var_C		= dword	ptr -0Ch
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= dword	ptr  6

		enter	0Ch, 0
		push	si
		push	di
		les	bx, [bp+arg_0]
		mov	ax, es:[bx]
		mov	bx, 8
		cwd
		idiv	bx
		mov	bx, word ptr [bp+arg_0]
		mov	dx, es:[bx+2]
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_2], ax
		xor	si, si
		mov	al, es:[bx+0Ah]
		mov	ah, 0
		imul	ax, 0A0h
		mov	dl, es:[bx+9]
		mov	dh, 0
		imul	dx, 14h
		add	ax, dx
		add	ax, 4D4Ah
		mov	word ptr [bp+var_C+2], ds
		mov	word ptr [bp+var_C], ax
		mov	al, es:[bx+9]
		cmp	al, es:[bx+8]
		jnb	loc_16F17
		mov	[bp+var_4], 0
		jmp	loc_16F09
; ---------------------------------------------------------------------------

loc_16DBF:
		mov	di, [bp+var_2]
		les	bx, [bp+arg_0]
		cmp	word ptr es:[bx], 0
		jge	short loc_16DD7
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		inc	ax
		jmp	short loc_16DE0
; ---------------------------------------------------------------------------

loc_16DD7:
		mov	ax, [bp+var_2]
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx

loc_16DE0:
		mov	[bp+var_8], ax
		mov	[bp+var_6], 0
		jmp	loc_16EE8
; ---------------------------------------------------------------------------

loc_16DEB:
		mov	ax, di
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_8]
		jnz	loc_16EE1
		les	bx, [bp+var_C]
		les	bx, es:[bx+10h]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_16E33
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		les	bx, [bp+var_C]
		les	bx, es:[bx+10h]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx], ax
		call	_grcg_off_func

loc_16E33:
		les	bx, [bp+var_C]
		les	bx, es:[bx]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_16E5D
		les	bx, [bp+var_C]
		les	bx, es:[bx]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		or	es:[bx], ax

loc_16E5D:
		les	bx, [bp+var_C]
		les	bx, es:[bx+4]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_16E89
		les	bx, [bp+var_C]
		les	bx, es:[bx+4]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_R
		add	bx, di
		or	es:[bx], ax

loc_16E89:
		les	bx, [bp+var_C]
		les	bx, es:[bx+8]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_16EB5
		les	bx, [bp+var_C]
		les	bx, es:[bx+8]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_G
		add	bx, di
		or	es:[bx], ax

loc_16EB5:
		les	bx, [bp+var_C]
		les	bx, es:[bx+0Ch]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		cmp	word ptr es:[bx], 0
		jz	short loc_16EE1
		les	bx, [bp+var_C]
		les	bx, es:[bx+0Ch]
		mov	ax, si
		add	ax, ax
		add	bx, ax
		mov	ax, es:[bx]
		les	bx, _VRAM_PLANE_E
		add	bx, di
		or	es:[bx], ax

loc_16EE1:
		add	di, 2
		inc	si
		inc	[bp+var_6]

loc_16EE8:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+4]
		cwd
		sub	ax, dx
		sar	ax, 1
		cmp	ax, [bp+var_6]
		jg	loc_16DEB
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jge	short loc_16F17
		inc	[bp+var_4]

loc_16F09:
		les	bx, [bp+arg_0]
		mov	ax, es:[bx+6]
		cmp	ax, [bp+var_4]
		jg	loc_16DBF

loc_16F17:
		pop	di
		pop	si
		leave
		retf
sub_16D6A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_16F1B	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+arg_0]
		xor	si, si
		jmp	loc_17036
; ---------------------------------------------------------------------------

loc_16F28:
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	ax, [bx+4D5Ah]
		or	ax, [bx+4D5Ch]
		jz	short loc_16F59
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D5Ah] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_16F59:
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4D5Ch], 0
		mov	word ptr [bx+4D5Ah], 0
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D4Ah] ; font
		call	@$bdla$qnv
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4D4Ch], 0
		mov	word ptr [bx+4D4Ah], 0
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D4Eh] ; font
		call	@$bdla$qnv
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4D50h], 0
		mov	word ptr [bx+4D4Eh], 0
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D52h] ; font
		call	@$bdla$qnv
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4D54h], 0
		mov	word ptr [bx+4D52h], 0
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		pushd	dword ptr [bx+4D56h] ; font
		call	@$bdla$qnv
		add	sp, 10h
		mov	bx, di
		imul	bx, 0A0h
		mov	ax, si
		imul	ax, 14h
		add	bx, ax
		mov	word ptr [bx+4D58h], 0
		mov	word ptr [bx+4D56h], 0
		inc	si

loc_17036:
		cmp	si, 8
		jl	loc_16F28
		pop	di
		pop	si
		pop	bp
		retf
sub_16F1B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17041	proc far
		push	bp
		mov	bp, sp
		mov	word_39854, 0
		mov	byte_3985A, 0
		mov	word_39886, 0
		mov	byte_3988C, 0
		mov	word_398B8, 0
		mov	byte_398BE, 0
		mov	word_398EA, 0
		mov	byte_398F0, 0
		mov	word_3991C, 0
		mov	byte_39922, 0
		push	seg main_21_TEXT
		push	offset sub_17096
		push	5
		pushd	5
		push	32h ; '2'
		push	ds
		push	offset unk_39924
		call	@_vector_new_$qnvuiuluie ; _vector_new_(void *,uint,ulong,uint,...)
		add	sp, 10h
		pop	bp
		retf
sub_17041	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17096	proc far

arg_0		= dword	ptr  6

		push	bp
		mov	bp, sp
		cmp	[bp+arg_0], 0
		jnz	short loc_170B2
		push	32h ; '2'
		call	@$bnew$qui	; operator new(uint)
		pop	cx
		mov	word ptr [bp+arg_0+2], dx
		mov	word ptr [bp+arg_0], ax
		or	ax, dx
		jz	short loc_170C0

loc_170B2:
		les	bx, [bp+arg_0]
		mov	word ptr es:[bx+2Ah], 0
		mov	byte ptr es:[bx+30h], 0

loc_170C0:
		mov	dx, word ptr [bp+arg_0+2]

loc_170C3:
		mov	ax, word ptr [bp+arg_0]
		pop	bp
		retf
sub_17096	endp

main_21_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_22_TEXT	segment	byte public 'CODE' use16
		assume cs:main_22_TEXT
		;org 8
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing
include th01/pf.asm
main_22_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_23_TEXT	segment	byte public 'CODE' use16
		assume cs:main_23_TEXT
		;org 0Bh
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1744B	proc far

var_36		= byte ptr -36h
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= dword	ptr  8

		enter	36h, 0
		push	si
		push	di
		mov	di, [bp+arg_0]
		pushd	[bp+arg_2]
		call	@arc_file_load$qnxc
		push	4
		call	@arc_file_seek$qc
		push	ds
		mov	ax, di
		imul	ax, 26h
		add	ax, 50BCh
		push	ax
		push	2
		call	@arc_file_get$qncui
		push	ds
		mov	ax, di
		imul	ax, 26h
		add	ax, 50BEh
		push	ax
		push	2
		call	@arc_file_get$qncui
		push	ss
		lea	ax, [bp+var_36]
		push	ax
		push	8
		call	@arc_file_get$qncui
		mov	al, [bp+var_36]
		mov	ah, 0
		mov	bx, di
		imul	bx, 26h
		mov	[bx+50C0h], ax
		mov	bx, di
		imul	bx, 26h
		mov	ax, [bx+50BCh]
		mov	bx, di
		imul	bx, 26h
		imul	word ptr [bx+50BEh]
		mov	[bp+var_2], ax
		push	ss
		lea	ax, [bp+var_36]
		push	ax
		push	30h ; '0'
		call	@arc_file_get$qncui
		mov	[bp+var_4], 0
		jmp	short loc_17534
; ---------------------------------------------------------------------------

loc_174C8:
		mov	bx, di
		imul	bx, 26h
		mov	ax, [bp+var_4]
		shl	ax, 2
		add	bx, ax
		mov	ax, [bx+50C2h]
		or	ax, [bx+50C4h]
		jz	short loc_174F9
		mov	bx, di
		imul	bx, 26h
		mov	ax, [bp+var_4]
		shl	ax, 2
		add	bx, ax
		pushd	dword ptr [bx+50C2h] ; font
		call	@$bdla$qnv
		add	sp, 4

loc_174F9:
		push	[bp+var_2]
		call	@$bnwa$qui
		pop	cx
		mov	bx, di
		imul	bx, 26h
		mov	si, [bp+var_4]
		shl	si, 2
		add	bx, si
		mov	[bx+50C4h], dx
		mov	[bx+50C2h], ax
		mov	bx, di
		imul	bx, 26h
		mov	ax, [bp+var_4]
		shl	ax, 2
		add	bx, ax
		pushd	dword ptr [bx+50C2h]
		push	[bp+var_2]
		call	@arc_file_get$qncui
		inc	[bp+var_4]

loc_17534:
		mov	bx, di
		imul	bx, 26h
		mov	ax, [bx+50C0h]
		cmp	ax, [bp+var_4]
		jg	short loc_174C8
		call	@arc_file_free$qv
		xor	ax, ax
		pop	di
		pop	si
		leave
		retf
sub_1744B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1754D	proc far

var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh

		enter	0Ah, 0
		push	si
		push	di
		mov	si, [bp+arg_4]
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	[bp+var_2], ax
		mov	[bp+var_8], 0
		mov	bx, si
		imul	bx, 26h
		mov	ax, [bx+50BCh]
		imul	ax, -8
		cmp	ax, [bp+arg_0]
		jg	loc_1767E
		cmp	[bp+arg_0], 280h
		jge	loc_1767E
		mov	bx, si
		imul	bx, 26h
		mov	ax, [bx+50BEh]
		imul	ax, -1
		cmp	ax, [bp+arg_2]
		jg	loc_1767E
		cmp	[bp+arg_2], 190h
		jge	loc_1767E
		push	[bp+arg_8]
		call	_grcg_setcolor_rmw
		pop	cx
		mov	[bp+var_4], 0
		jmp	loc_17669
; ---------------------------------------------------------------------------

loc_175BD:
		mov	di, [bp+var_2]
		mov	ax, di
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		mov	[bp+var_A], ax
		cmp	[bp+var_2], 0
		jl	short loc_1764F
		mov	[bp+var_6], 0
		jmp	short loc_1763F
; ---------------------------------------------------------------------------

loc_175D8:
		mov	bx, si
		imul	bx, 26h
		mov	ax, [bp+arg_6]
		shl	ax, 2
		add	bx, ax
		les	bx, [bx+50C2h]
		add	bx, [bp+var_8]
		cmp	byte ptr es:[bx], 0
		jz	short loc_17638
		cmp	[bp+arg_0], 0
		jl	short loc_17605
		mov	ax, di
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_A]
		jz	short loc_17618

loc_17605:
		cmp	[bp+arg_0], 0
		jge	short loc_17638
		mov	ax, di
		mov	bx, 50h	; 'P'
		cwd
		idiv	bx
		cmp	ax, [bp+var_A]
		jz	short loc_17638

loc_17618:
		mov	bx, si
		imul	bx, 26h
		mov	ax, [bp+arg_6]
		shl	ax, 2
		add	bx, ax
		les	bx, [bx+50C2h]
		add	bx, [bp+var_8]
		mov	al, es:[bx]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx], al

loc_17638:
		inc	[bp+var_8]
		inc	di
		inc	[bp+var_6]

loc_1763F:
		mov	bx, si
		imul	bx, 26h
		mov	ax, [bx+50BCh]
		cmp	ax, [bp+var_6]
		jg	short loc_175D8
		jmp	short loc_1765B
; ---------------------------------------------------------------------------

loc_1764F:
		mov	bx, si
		imul	bx, 26h
		mov	ax, [bx+50BCh]
		add	[bp+var_8], ax

loc_1765B:
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jge	short loc_17679
		inc	[bp+var_4]

loc_17669:
		mov	bx, si
		imul	bx, 26h
		mov	ax, [bx+50BEh]
		cmp	ax, [bp+var_4]
		jg	loc_175BD

loc_17679:
		call	_grcg_off_func

loc_1767E:
		pop	di
		pop	si
		leave
		retf
sub_1754D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17682	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+arg_0]
		xor	si, si
		jmp	short loc_176D6
; ---------------------------------------------------------------------------

loc_1768E:
		mov	bx, di
		imul	bx, 26h
		mov	ax, si
		shl	ax, 2
		add	bx, ax
		mov	ax, [bx+50C2h]
		or	ax, [bx+50C4h]
		jz	short loc_176D5
		mov	bx, di
		imul	bx, 26h
		mov	ax, si
		shl	ax, 2
		add	bx, ax
		pushd	dword ptr [bx+50C2h] ; font
		call	@$bdla$qnv
		add	sp, 4
		mov	bx, di
		imul	bx, 26h
		mov	ax, si
		shl	ax, 2
		add	bx, ax
		mov	word ptr [bx+50C4h], 0
		mov	word ptr [bx+50C2h], 0

loc_176D5:
		inc	si

loc_176D6:
		mov	bx, di
		imul	bx, 26h
		cmp	[bx+50C0h], si
		jg	short loc_1768E
		pop	di
		pop	si
		pop	bp
		retf
sub_17682	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_176E5	proc far

var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= byte ptr  8
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh

		enter	2, 0
		push	si
		push	di
		mov	di, [bp+arg_0]
		push	[bp+arg_8]
		call	_grcg_setcolor_rmw
		pop	cx
		xor	si, si
		jmp	short loc_17733
; ---------------------------------------------------------------------------

loc_176FB:
		les	bx, [bp+arg_4]
		add	bx, si
		mov	al, es:[bx]
		mov	ah, 0
		mov	cl, 10h
		sub	cl, [bp+arg_2]
		shl	ax, cl
		mov	bx, word ptr [bp+arg_4]
		add	bx, si
		mov	dl, es:[bx]
		mov	dh, 0
		mov	cl, [bp+arg_2]
		sar	dx, cl
		add	ax, dx
		mov	[bp+var_2], ax
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	es:[bx], ax
		add	di, 50h	; 'P'
		cmp	di, 7D00h
		jge	short loc_17738
		inc	si

loc_17733:
		cmp	si, 8
		jl	short loc_176FB

loc_17738:
		call	_grcg_off_func
		pop	di
		pop	si
		leave
		retf
sub_176E5	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17741	proc far

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= byte ptr -8
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	0Ch, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	di, [bp+arg_2]
		lea	ax, [bp+var_8]
		push	ss
		push	ax
		push	ds
		push	offset unk_35A4A
		mov	cx, 8
		call	SCOPY@
		mov	ax, si
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, di
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_A], ax
		mov	ax, si
		cwd
		idiv	bx
		mov	[bp+var_C], dx
		or	si, si
		jl	short loc_177A1
		cmp	si, 280h
		jge	short loc_177A1
		or	di, di
		jl	short loc_177A1
		cmp	di, 190h
		jge	short loc_177A1
		push	[bp+arg_4]
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		push	[bp+var_C]
		push	[bp+var_A]
		call	sub_176E5
		add	sp, 0Ah

loc_177A1:
		pop	di
		pop	si
		leave
		retf
sub_17741	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_177A5	proc far

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= byte ptr -8
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	0Ch, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	di, [bp+arg_2]
		lea	ax, [bp+var_8]
		push	ss
		push	ax
		push	ds
		push	offset unk_35A52
		mov	cx, 8
		call	SCOPY@
		mov	ax, si
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, di
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_A], ax
		mov	ax, si
		cwd
		idiv	bx
		mov	[bp+var_C], dx
		or	si, si
		jl	short loc_17805
		cmp	si, 280h
		jge	short loc_17805
		or	di, di
		jl	short loc_17805
		cmp	di, 190h
		jge	short loc_17805
		push	[bp+arg_4]
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		push	[bp+var_C]
		push	[bp+var_A]
		call	sub_176E5
		add	sp, 0Ah

loc_17805:
		pop	di
		pop	si
		leave
		retf
sub_177A5	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17809	proc far

var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= byte ptr -8
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	0Ch, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	di, [bp+arg_2]
		lea	ax, [bp+var_8]
		push	ss
		push	ax
		push	ds
		push	offset unk_35A5A
		mov	cx, 8
		call	SCOPY@
		mov	ax, si
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, di
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_A], ax
		mov	ax, si
		cwd
		idiv	bx
		mov	[bp+var_C], dx
		or	si, si
		jl	short loc_17869
		cmp	si, 280h
		jge	short loc_17869
		or	di, di
		jl	short loc_17869
		cmp	di, 190h
		jge	short loc_17869
		push	[bp+arg_4]
		push	ss
		lea	ax, [bp+var_8]
		push	ax
		push	[bp+var_C]
		push	[bp+var_A]
		call	sub_176E5
		add	sp, 0Ah

loc_17869:
		pop	di
		pop	si
		leave
		retf
sub_17809	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1786D	proc far

var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_1		= byte ptr -1
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= word ptr  0Eh
arg_A		= byte ptr  10h
arg_C		= byte ptr  12h
arg_E		= byte ptr  14h

		enter	8, 0
		push	si
		push	di
		mov	[bp+var_1], 0
		mov	di, 0FFFFh
		push	[bp+arg_8]
		call	_grcg_setcolor_rmw
		pop	cx
		mov	al, [bp+arg_C]
		cmp	al, [bp+arg_E]
		ja	loc_17952
		mov	al, [bp+arg_C]
		mov	ah, 0
		mov	si, ax
		jmp	loc_17942
; ---------------------------------------------------------------------------

loc_17897:
		movsx	eax, [bp+arg_4]
		mov	bx, si
		and	bx, 0FFh
		add	bx, bx
		movsx	edx, _CosTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, [bp+arg_0]
		mov	[bp+var_6], ax
		movsx	eax, [bp+arg_6]
		mov	bx, si
		and	bx, 0FFh
		add	bx, bx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, [bp+arg_2]
		mov	[bp+var_8], ax
		mov	ax, [bp+var_6]
		sar	ax, 3
		mov	dx, [bp+var_8]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+var_8]
		shl	dx, 4
		add	ax, dx
		mov	[bp+var_4], ax
		cmp	di, [bp+var_4]
		jz	short loc_1792D
		cmp	[bp+var_6], 0
		jl	short loc_1791A
		cmp	[bp+var_6], 280h
		jge	short loc_1791A
		or	di, di
		jl	short loc_1791A
		cmp	di, 7D00h
		jge	short loc_1791A
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	al, [bp+var_1]
		mov	es:[bx], al

loc_1791A:
		mov	cl, byte ptr [bp+var_6]
		and	cl, 7
		mov	ax, 80h
		sar	ax, cl
		mov	[bp+var_1], al
		mov	di, [bp+var_4]
		jmp	short loc_1793B
; ---------------------------------------------------------------------------

loc_1792D:
		mov	cl, byte ptr [bp+var_6]
		and	cl, 7
		mov	ax, 80h
		sar	ax, cl
		or	[bp+var_1], al

loc_1793B:
		mov	al, [bp+arg_A]
		mov	ah, 0
		add	si, ax

loc_17942:
		mov	al, [bp+arg_E]
		mov	ah, 0
		cmp	ax, si
		jge	loc_17897
		call	_grcg_off_func

loc_17952:
		pop	di
		pop	si
		leave
		retf
sub_1786D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17956	proc far

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= byte ptr  0Eh
arg_A		= byte ptr  10h
arg_C		= byte ptr  12h

		enter	6, 0
		push	si
		push	di
		mov	al, [bp+arg_A]
		cmp	al, [bp+arg_C]
		ja	loc_179F4
		mov	al, [bp+arg_A]
		mov	ah, 0
		mov	si, ax
		jmp	short loc_179E9
; ---------------------------------------------------------------------------

loc_1796F:
		movsx	eax, [bp+arg_4]
		mov	bx, si
		and	bx, 0FFh
		add	bx, bx
		movsx	edx, _CosTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, [bp+arg_0]
		mov	di, ax
		movsx	eax, [bp+arg_6]
		mov	bx, si
		and	bx, 0FFh
		add	bx, bx
		movsx	edx, _SinTable8[bx]
		imul	eax, edx
		sar	eax, 8
		add	ax, [bp+arg_2]
		mov	[bp+var_2], ax
		mov	ax, [bp+var_6]
		cmp	ax, [bp+var_2]
		jnz	short loc_179C7
		mov	ax, [bp+var_4]
		sar	ax, 3
		mov	dx, di
		sar	dx, 3
		cmp	ax, dx
		jz	short loc_179E2

loc_179C7:
		push	10008h
		push	[bp+var_2]
		push	di
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		mov	[bp+var_4], di
		mov	ax, [bp+var_2]
		mov	[bp+var_6], ax

loc_179E2:
		mov	al, [bp+arg_8]
		mov	ah, 0
		add	si, ax

loc_179E9:
		mov	al, [bp+arg_C]
		mov	ah, 0
		cmp	ax, si
		jge	loc_1796F

loc_179F4:
		pop	di
		pop	si
		leave
		retf
sub_17956	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_179F8	proc far

var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	4, 0
		push	si
		push	di
		mov	di, [bp+arg_4]
		cmp	[bp+arg_0], 0
		jl	loc_17AA5
		push	di
		push	[bp+arg_2]
		push	[bp+arg_0]
		nopcall	sub_17AA9
		add	sp, 6
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_2]
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_2], ax
		mov	ax, [bp+arg_0]
		cwd
		idiv	bx
		mov	[bp+var_4], dx
		cmp	di, 3
		jg	short loc_17AA5
		push	0Ah
		call	_grcg_setcolor_rmw
		pop	cx
		xor	si, si
		jmp	short loc_17A9B
; ---------------------------------------------------------------------------

loc_17A46:
		cmp	[bp+var_4], 0
		jnz	short loc_17A61
		mov	bx, di
		shl	bx, 3
		mov	al, [bx+si+10C2h]
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_2]
		mov	es:[bx], al
		jmp	short loc_17A8F
; ---------------------------------------------------------------------------

loc_17A61:
		mov	bx, di
		shl	bx, 3
		mov	al, [bx+si+10C2h]
		mov	ah, 0
		mov	cl, 10h
		sub	cl, byte ptr [bp+var_4]
		shl	ax, cl
		mov	bx, di
		shl	bx, 3
		mov	dl, [bx+si+10C2h]
		mov	dh, 0
		mov	cl, byte ptr [bp+var_4]
		sar	dx, cl
		add	ax, dx
		les	bx, _VRAM_PLANE_B
		add	bx, [bp+var_2]
		mov	es:[bx], ax

loc_17A8F:
		add	[bp+var_2], 50h	; 'P'
		cmp	[bp+var_2], 7D00h
		jg	short loc_17AA0
		inc	si

loc_17A9B:
		cmp	si, 8
		jl	short loc_17A46

loc_17AA0:
		call	_grcg_off_func

loc_17AA5:
		pop	di
		pop	si
		leave
		retf
sub_179F8	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17AA9	proc far

var_4		= byte ptr -4
var_3		= byte ptr -3
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	4, 0
		push	si
		push	di
		cmp	[bp+arg_0], 0
		jl	loc_17BAA
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_2]
		imul	dx, 50h
		add	ax, dx
		mov	si, ax
		mov	ax, [bp+arg_0]
		cwd
		idiv	bx
		mov	[bp+var_2], dx
		cmp	[bp+arg_4], 3
		jg	loc_17BAA
		push	0Ah
		call	_grcg_setcolor_rmw
		pop	cx
		xor	di, di
		jmp	loc_17B9E
; ---------------------------------------------------------------------------

loc_17AE8:
		cmp	[bp+var_2], 0
		jnz	short loc_17B20
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	ax, 0A800h
		mov	es, ax
		assume es:nothing
		mov	al, es:[si]
		mov	bx, [bp+arg_4]
		shl	bx, 3
		and	al, [bx+di+10C2h]
		mov	[bp+var_3], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, 0A800h
		mov	dl, [bp+var_3]
		mov	es, ax
		mov	es:[si], dl
		jmp	short loc_17B94
; ---------------------------------------------------------------------------

loc_17B20:
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	ax, 0A800h
		mov	es, ax
		mov	al, es:[si]
		mov	bx, [bp+arg_4]
		shl	bx, 3
		mov	dl, [bx+di+10C2h]
		mov	dh, 0
		mov	cl, byte ptr [bp+var_2]
		sar	dx, cl
		and	al, dl
		mov	[bp+var_3], al
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	ax, 0A800h
		mov	es, ax
		mov	al, es:[si+1]
		mov	bx, [bp+arg_4]
		shl	bx, 3
		mov	dl, [bx+di+10C2h]
		mov	cl, 8
		sub	cl, byte ptr [bp+var_2]
		shl	dl, cl
		and	al, dl
		mov	[bp+var_4], al
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, 0A800h
		mov	dl, [bp+var_3]
		mov	es, ax
		mov	es:[si], dl
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, 0A800h
		mov	dl, [bp+var_4]
		mov	es, ax
		mov	es:[si+1], dl

loc_17B94:
		add	si, 50h	; 'P'
		cmp	si, 7D00h
		jg	short loc_17BA5
		inc	di

loc_17B9E:
		cmp	di, 8
		jl	loc_17AE8

loc_17BA5:
		call	_grcg_off_func

loc_17BAA:
		pop	di
		pop	si
		leave
		retf
sub_17AA9	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17BAE	proc far

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh
arg_A		= word ptr  10h

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+arg_A]
		xor	si, si
		jmp	short loc_17BF6
; ---------------------------------------------------------------------------

loc_17BBA:
		push	di
		lea	ax, [si+1]
		add	ax, ax
		les	bx, [bp+arg_4]
		assume es:nothing
		add	bx, ax
		push	word ptr es:[bx]
		lea	ax, [si+1]
		add	ax, ax
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx]
		mov	ax, si
		add	ax, ax
		les	bx, [bp+arg_4]
		add	bx, ax
		push	word ptr es:[bx]
		mov	ax, si
		add	ax, ax
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx]
		call	_graph_r_line
		add	sp, 0Ah
		inc	si

loc_17BF6:
		mov	ax, [bp+arg_8]
		dec	ax
		cmp	ax, si
		jg	short loc_17BBA
		push	di
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		mov	ax, si
		add	ax, ax
		les	bx, [bp+arg_4]
		add	bx, ax
		push	word ptr es:[bx]
		mov	ax, si
		add	ax, ax
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx]
		call	_graph_r_line
		add	sp, 0Ah
		pop	di
		pop	si
		pop	bp
		retf
sub_17BAE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17C2F	proc far

arg_0		= dword	ptr  6
arg_4		= dword	ptr  0Ah
arg_8		= word ptr  0Eh

		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_17C72
; ---------------------------------------------------------------------------

loc_17C37:
		lea	ax, [si+1]
		add	ax, ax
		les	bx, [bp+arg_4]
		add	bx, ax
		push	word ptr es:[bx]
		lea	ax, [si+1]
		add	ax, ax
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx]
		mov	ax, si
		add	ax, ax
		les	bx, [bp+arg_4]
		add	bx, ax
		push	word ptr es:[bx]
		mov	ax, si
		add	ax, ax
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx]
		call	_graph_r_line_from_1
		add	sp, 8
		inc	si

loc_17C72:
		mov	ax, [bp+arg_8]
		dec	ax
		cmp	ax, si
		jg	short loc_17C37
		les	bx, [bp+arg_4]
		push	word ptr es:[bx]
		les	bx, [bp+arg_0]
		push	word ptr es:[bx]
		mov	ax, si
		add	ax, ax
		les	bx, [bp+arg_4]
		add	bx, ax
		push	word ptr es:[bx]
		mov	ax, si
		add	ax, ax
		les	bx, [bp+arg_0]
		add	bx, ax
		push	word ptr es:[bx]

loc_17C9E:
		call	_graph_r_line_from_1

loc_17CA3:
		add	sp, 8
		pop	si
		pop	bp
		retf
sub_17C2F	endp

main_23_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_24_TEXT	segment	byte public 'CODE' use16
		assume cs:main_24_TEXT
		;org 9
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17CA9	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		mov	cx, [bp+arg_0]
		xor	dx, dx
		jmp	short loc_17D18
; ---------------------------------------------------------------------------

loc_17CB3:
		mov	bx, dx
		imul	bx, 0Ah
		cmp	byte ptr [bx+5378h], 0
		jnz	short loc_17D17
		mov	bx, dx
		imul	bx, 0Ah
		mov	byte ptr [bx+5378h], 1
		mov	ax, cx
		add	ax, ax
		les	bx, font
		add	bx, ax
		mov	ax, es:[bx]
		mov	bx, dx
		imul	bx, 0Ah
		mov	[bx+5370h], ax
		mov	ax, cx
		add	ax, ax
		les	bx, off_39E88
		add	bx, ax
		mov	ax, es:[bx]
		mov	bx, dx
		imul	bx, 0Ah
		mov	[bx+5372h], ax
		mov	bx, dx
		imul	bx, 0Ah
		mov	word ptr [bx+5374h], 0
		mov	bx, dx
		imul	bx, 0Ah
		mov	word ptr [bx+5376h], 2
		mov	bx, dx
		imul	bx, 0Ah
		mov	byte ptr [bx+5379h], 4
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_17D17:
		inc	dx

loc_17D18:
		cmp	dx, 4
		jl	short loc_17CB3
		pop	bp
		retf
sub_17CA9	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17D1F	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, x_36C26
		add	ax, -24
		cmp	[bx+5370h], ax
		jle	loc_17E1B
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, x_36C26
		add	ax, 24
		cmp	[bx+5370h], ax
		jge	loc_17E1B
		mov	bx, si
		imul	bx, 0Ah
		cmp	word ptr [bx+5372h], 158h
		jle	loc_17E1B
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+5378h]
		cbw
		cmp	ax, 1
		jle	loc_17E1B
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+5378h]
		cbw
		cmp	ax, 63h	; 'c'
		jge	loc_17E1B
		push	200020h
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5372h]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5370h]
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		mov	bx, si
		imul	bx, 0Ah
		mov	word ptr [bx+5376h], 0FFFEh
		mov	bx, si
		imul	bx, 0Ah
		mov	byte ptr [bx+5379h], 10h
		mov	bx, si
		imul	bx, 0Ah
		cmp	word ptr [bx+5372h], 170h
		jl	short loc_17DC4
		mov	ax, 170h
		jmp	short loc_17DCD
; ---------------------------------------------------------------------------

loc_17DC4:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5372h]

loc_17DCD:
		mov	bx, si
		imul	bx, 0Ah
		mov	[bx+5372h], ax
		mov	al, _bombs
		cbw
		cmp	ax, 5
		jge	short loc_17DFB
		inc	_bombs
		mov	al, _bombs
		cbw
		dec	ax
		push	ax
		call	sub_18F98
		pop	cx
		mov	bx, si
		imul	bx, 0Ah
		mov	byte ptr [bx+5378h], 63h ; 'c'
		jmp	short loc_17E13
; ---------------------------------------------------------------------------

loc_17DFB:
		add	_score, 10000
		call	sub_1889C
		mov	bx, si
		imul	bx, 0Ah
		mov	byte ptr [bx+5378h], 64h ; 'd'

loc_17E13:
		push	0Fh
		call	_mdrv2_se_play
		pop	cx

loc_17E1B:
		pop	si
		pop	bp
		retf
sub_17D1F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17E1E	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_17E61
; ---------------------------------------------------------------------------

loc_17E26:
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+5378h]
		cbw
		cmp	ax, 1
		jle	short loc_17E60
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+5378h]
		cbw
		cmp	ax, 63h	; 'c'
		jge	short loc_17E60
		push	20h ; ' '
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5372h]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5370h]
		call	sub_197E1
		add	sp, 6

loc_17E60:
		inc	si

loc_17E61:
		cmp	si, 4
		jl	short loc_17E26
		pop	si
		pop	bp
		retf
sub_17E1E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17E69	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_17EB0
; ---------------------------------------------------------------------------

loc_17E71:
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+5378h]
		cbw
		cmp	ax, 1
		jle	short loc_17EAF
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+5378h]
		cbw
		cmp	ax, 63h	; 'c'
		jge	short loc_17EAF
		push	200020h
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5372h]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5370h]
		call	_egc_copy_rect_1_to_0
		add	sp, 8

loc_17EAF:
		inc	si

loc_17EB0:
		cmp	si, 4
		jl	short loc_17E71
		pop	si
		pop	bp
		retf
sub_17E69	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17EB8	proc far
		push	bp
		mov	bp, sp
		mov	byte_39D18, 0
		mov	byte_39D22, 0
		mov	byte_39D2C, 0
		mov	byte_39D36, 0
		pop	bp
		retf
sub_17EB8	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_17ED1	proc far

arg_0		= word ptr  6
arg_2		= dword	ptr  8
arg_6		= dword	ptr  0Ch
arg_A		= dword	ptr  10h
arg_E		= dword	ptr  14h
arg_12		= dword	ptr  18h
arg_16		= dword	ptr  1Ch
arg_1A		= word ptr  20h
arg_1C		= dword	ptr  22h
arg_20		= dword	ptr  26h

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+arg_0]
		mov	si, [bp+arg_1A]
		push	di
		call	[bp+arg_6]
		pop	cx
		les	bx, [bp+arg_2]
		mov	al, es:[bx]
		cbw
		cmp	ax, 1
		jnz	loc_17F73
		push	0FFh
		push	0
		push	8
		les	bx, [bp+arg_16]
		mov	al, es:[bx]
		mov	ah, 0
		push	ax
		mov	al, es:[bx]
		mov	ah, 0
		push	ax
		les	bx, [bp+arg_E]
		mov	ax, es:[bx]
		add	ax, 10h
		push	ax
		les	bx, [bp+arg_A]
		mov	ax, es:[bx]
		add	ax, 10h
		push	ax
		call	sub_17956
		add	sp, 0Eh
		les	bx, [bp+arg_16]
		mov	al, es:[bx]
		add	al, 4
		mov	es:[bx], al
		cmp	byte ptr es:[bx], 30h ;	'0'
		jb	short loc_17F3C
		les	bx, [bp+arg_2]
		mov	byte ptr es:[bx], 2
		jmp	loc_18029
; ---------------------------------------------------------------------------

loc_17F3C:
		push	0FFh
		push	0
		push	8
		push	7
		les	bx, [bp+arg_16]
		mov	al, es:[bx]
		mov	ah, 0
		push	ax
		mov	al, es:[bx]
		mov	ah, 0
		push	ax
		les	bx, [bp+arg_E]
		mov	ax, es:[bx]
		add	ax, 10h
		push	ax
		les	bx, [bp+arg_A]
		mov	ax, es:[bx]
		add	ax, 10h
		push	ax
		call	sub_1786D
		add	sp, 10h
		jmp	loc_18029
; ---------------------------------------------------------------------------

loc_17F73:
		les	bx, [bp+arg_2]
		mov	al, es:[bx]
		cbw
		cmp	ax, 2
		jnz	short loc_17FB8
		push	si
		les	bx, [bp+arg_E]
		push	word ptr es:[bx]
		les	bx, [bp+arg_A]
		push	word ptr es:[bx]
		call	sub_196A7
		add	sp, 6
		les	bx, [bp+arg_12]
		mov	ax, es:[bx]
		les	bx, [bp+arg_E]
		add	es:[bx], ax
		cmp	word ptr es:[bx], 170h
		jl	short loc_18001
		les	bx, [bp+arg_12]
		mov	word ptr es:[bx], 0FFF8h
		les	bx, [bp+arg_2]
		mov	byte ptr es:[bx], 3
		jmp	short loc_17FD9
; ---------------------------------------------------------------------------

loc_17FB8:
		les	bx, [bp+arg_2]
		mov	al, es:[bx]
		cbw
		cmp	ax, 3
		jnz	short loc_18018
		push	si
		les	bx, [bp+arg_E]
		push	word ptr es:[bx]
		les	bx, [bp+arg_A]
		push	word ptr es:[bx]
		call	sub_196A7
		add	sp, 6

loc_17FD9:
		les	bx, [bp+arg_12]
		mov	ax, es:[bx]
		les	bx, [bp+arg_E]
		add	es:[bx], ax
		les	bx, [bp+arg_12]
		inc	word ptr es:[bx]
		les	bx, [bp+arg_E]
		cmp	word ptr es:[bx], 190h
		jl	short loc_18001
		les	bx, [bp+arg_2]
		mov	byte ptr es:[bx], 0
		call	[bp+arg_20]
		jmp	short loc_18029
; ---------------------------------------------------------------------------

loc_18001:
		push	si
		les	bx, [bp+arg_E]
		push	word ptr es:[bx]
		les	bx, [bp+arg_A]
		push	word ptr es:[bx]
		call	sub_197E1
		add	sp, 6
		jmp	short loc_18029
; ---------------------------------------------------------------------------

loc_18018:
		les	bx, [bp+arg_2]
		mov	al, es:[bx]
		cbw
		cmp	ax, 63h	; 'c'
		jl	short loc_18029
		push	di
		call	[bp+arg_1C]
		pop	cx

loc_18029:
		pop	di
		pop	si
		pop	bp
		retf
sub_17ED1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1802D	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		push	100020h
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5372h]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5370h]
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+5378h]
		cbw
		cmp	ax, 63h	; 'c'
		jnz	short loc_180C5
		push	100040h
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5372h]
		add	ax, 10h
		push	ax
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5370h]
		add	ax, 0FFF0h
		jge	short loc_18088
		xor	ax, ax
		jmp	short loc_18094
; ---------------------------------------------------------------------------

loc_18088:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5370h]
		add	ax, 0FFF0h

loc_18094:
		cmp	ax, 240h
		jle	short loc_1809E
		mov	ax, 240h
		jmp	short loc_180BC
; ---------------------------------------------------------------------------

loc_1809E:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5370h]
		add	ax, 0FFF0h
		jge	short loc_180B0
		xor	ax, ax
		jmp	short loc_180BC
; ---------------------------------------------------------------------------

loc_180B0:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5370h]
		add	ax, 0FFF0h

loc_180BC:
		push	ax
		call	_egc_copy_rect_1_to_0
		add	sp, 8

loc_180C5:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5376h]
		mov	bx, si
		imul	bx, 0Ah
		add	[bx+5372h], ax
		mov	bx, si
		imul	bx, 0Ah
		dec	byte ptr [bx+5379h]
		mov	bx, si
		imul	bx, 0Ah
		cmp	byte ptr [bx+5379h], 0
		jnz	short loc_180F9
		mov	bx, si
		imul	bx, 0Ah
		mov	byte ptr [bx+5378h], 0
		jmp	loc_181A4
; ---------------------------------------------------------------------------

loc_180F9:
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+5378h]
		cbw
		cmp	ax, 63h	; 'c'
		jnz	short loc_18184
		push	ds
		push	offset aBomb	; "Bomb"
		push	7
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5372h]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5370h]
		call	graph_putsa_fx
		add	sp, 0Ah
		push	ds
		push	offset aExtend	; "Extend!!"
		push	7
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5372h]
		add	ax, 10h
		push	ax
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5370h]
		add	ax, 0FFF0h
		jge	short loc_1814D
		xor	ax, ax
		jmp	short loc_18159
; ---------------------------------------------------------------------------

loc_1814D:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5370h]
		add	ax, 0FFF0h

loc_18159:
		cmp	ax, 240h
		jle	short loc_18163
		mov	ax, 240h
		jmp	short loc_18181
; ---------------------------------------------------------------------------

loc_18163:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5370h]
		add	ax, 0FFF0h
		jge	short loc_18175
		xor	ax, ax
		jmp	short loc_18181
; ---------------------------------------------------------------------------

loc_18175:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5370h]
		add	ax, 0FFF0h

loc_18181:
		push	ax
		jmp	short loc_1819C
; ---------------------------------------------------------------------------

loc_18184:
		push	ds
		push	offset aVpf	; "１萬"
		push	7
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5372h]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5370h]

loc_1819C:
		call	graph_putsa_fx
		add	sp, 0Ah

loc_181A4:
		pop	si
		pop	bp
		retf
sub_1802D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_181A7	proc far
		push	bp
		mov	bp, sp
		pop	bp
		retf
sub_181A7	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_181AC	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_1820F
; ---------------------------------------------------------------------------

loc_181B4:
		mov	bx, si
		imul	bx, 0Ah
		cmp	byte ptr [bx+5378h], 0
		jz	short loc_1820E
		push	seg main_24_TEXT
		push	offset sub_181A7
		push	seg main_24_TEXT
		push	offset sub_1802D
		push	20h ; ' '
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 5379h
		push	ax
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 5376h
		push	ax
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 5372h
		push	ax
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 5370h
		push	ax
		push	seg main_24_TEXT
		push	offset sub_17D1F
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 5378h
		push	ax
		push	si
		call	sub_17ED1
		add	sp, 24h

loc_1820E:
		inc	si

loc_1820F:
		cmp	si, 4
		jl	short loc_181B4
		pop	si
		pop	bp
		retf
sub_181AC	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18217	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		mov	cx, [bp+arg_0]
		xor	dx, dx
		jmp	short loc_18286
; ---------------------------------------------------------------------------

loc_18221:
		mov	bx, dx
		imul	bx, 0Ah
		cmp	byte ptr [bx+53A0h], 0
		jnz	short loc_18285
		mov	bx, dx
		imul	bx, 0Ah
		mov	byte ptr [bx+53A0h], 1
		mov	ax, cx
		add	ax, ax
		les	bx, font
		add	bx, ax
		mov	ax, es:[bx]
		mov	bx, dx
		imul	bx, 0Ah
		mov	[bx+5398h], ax
		mov	ax, cx
		add	ax, ax
		les	bx, off_39E88
		add	bx, ax
		mov	ax, es:[bx]
		mov	bx, dx
		imul	bx, 0Ah
		mov	[bx+539Ah], ax
		mov	bx, dx
		imul	bx, 0Ah
		mov	word ptr [bx+539Ch], 0
		mov	bx, dx
		imul	bx, 0Ah
		mov	word ptr [bx+539Eh], 2
		mov	bx, dx
		imul	bx, 0Ah
		mov	byte ptr [bx+53A1h], 4
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_18285:
		inc	dx

loc_18286:
		cmp	dx, 0Ah
		jl	short loc_18221
		pop	bp
		retf
sub_18217	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1828D	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		mov	si, [bp+arg_0]
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, x_36C26
		add	ax, -24
		cmp	[bx+5398h], ax
		jle	loc_183A0
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, x_36C26
		add	ax, 24
		cmp	[bx+5398h], ax
		jge	loc_183A0
		mov	bx, si
		imul	bx, 0Ah
		cmp	word ptr [bx+539Ah], 158h
		jle	loc_183A0
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+53A0h]
		cbw
		cmp	ax, 1
		jle	loc_183A0
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+53A0h]
		cbw
		cmp	ax, 63h	; 'c'
		jge	loc_183A0
		push	200020h
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+539Ah]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5398h]
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		mov	bx, si
		imul	bx, 0Ah
		mov	word ptr [bx+539Eh], 0FFFEh
		mov	bx, si
		imul	bx, 0Ah
		mov	byte ptr [bx+53A1h], 10h
		mov	bx, si
		imul	bx, 0Ah
		cmp	word ptr [bx+539Ah], 170h
		jl	short loc_18332
		mov	ax, 170h
		jmp	short loc_1833B
; ---------------------------------------------------------------------------

loc_18332:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+539Ah]

loc_1833B:
		mov	bx, si
		imul	bx, 0Ah
		mov	[bx+539Ah], ax
		les	bx, _resident
		cmp	es:[bx+reiidenconfig_t.p_value], 59999
		jnb	short loc_18368
		cmp	es:[bx+reiidenconfig_t.p_value], 10000
		jnb	short loc_1835D
		mov	ax, 3E8h
		jmp	short loc_18360
; ---------------------------------------------------------------------------

loc_1835D:
		mov	ax, 2710h

loc_18360:
		les	bx, _resident
		add	es:[bx+reiidenconfig_t.p_value], ax

loc_18368:
		les	bx, _resident
		cmp	es:[bx+reiidenconfig_t.p_value], 60000
		jb	short loc_1837A
		mov	es:[bx+reiidenconfig_t.p_value], 65530

loc_1837A:
		les	bx, _resident
		movzx	eax, es:[bx+reiidenconfig_t.p_value]
		add	_score, eax
		call	sub_1889C
		mov	bx, si
		imul	bx, 0Ah
		mov	byte ptr [bx+53A0h], 64h ; 'd'
		push	0Fh
		call	_mdrv2_se_play
		pop	cx

loc_183A0:
		pop	si
		pop	bp
		retf
sub_1828D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_183A3	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_183E6
; ---------------------------------------------------------------------------

loc_183AB:
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+53A0h]
		cbw
		cmp	ax, 1
		jle	short loc_183E5
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+53A0h]
		cbw
		cmp	ax, 63h	; 'c'
		jge	short loc_183E5
		push	21h ; '!'
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+539Ah]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5398h]
		call	sub_197E1
		add	sp, 6

loc_183E5:
		inc	si

loc_183E6:
		cmp	si, 0Ah
		jl	short loc_183AB
		pop	si
		pop	bp
		retf
sub_183A3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_183EE	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_18435
; ---------------------------------------------------------------------------

loc_183F6:
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+53A0h]
		cbw
		cmp	ax, 1
		jle	short loc_18434
		mov	bx, si
		imul	bx, 0Ah
		mov	al, [bx+53A0h]
		cbw
		cmp	ax, 63h	; 'c'
		jge	short loc_18434
		push	200020h
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+539Ah]
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+5398h]
		call	_egc_copy_rect_1_to_0
		add	sp, 8

loc_18434:
		inc	si

loc_18435:
		cmp	si, 0Ah
		jl	short loc_183F6
		pop	si
		pop	bp
		retf
sub_183EE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1843D	proc far
		push	bp
		mov	bp, sp
		xor	ax, ax
		jmp	short loc_1844F
; ---------------------------------------------------------------------------

loc_18444:
		mov	bx, ax
		imul	bx, 0Ah
		mov	byte ptr [bx+53A0h], 0
		inc	ax

loc_1844F:
		cmp	ax, 0Ah
		jl	short loc_18444
		pop	bp
		retf
sub_1843D	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18456	proc far
		push	bp
		mov	bp, sp
		les	bx, _resident
		mov	es:[bx+reiidenconfig_t.p_value], 0
		pop	bp
		retf
sub_18456	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18465	proc far

var_6		= byte ptr -6
arg_0		= word ptr  6

		enter	6, 0
		push	si
		mov	si, [bp+arg_0]
		push	100030h
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+539Ah]
		mov	bx, si
		imul	bx, 0Ah
		cmp	word ptr [bx+5398h], 258h
		jle	short loc_1848E
		mov	ax, 258h
		jmp	short loc_18497
; ---------------------------------------------------------------------------

loc_1848E:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5398h]

loc_18497:
		push	ax
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+539Eh]
		mov	bx, si
		imul	bx, 0Ah
		add	[bx+539Ah], ax
		mov	bx, si
		imul	bx, 0Ah
		dec	byte ptr [bx+53A1h]
		mov	bx, si
		imul	bx, 0Ah
		cmp	byte ptr [bx+53A1h], 0
		jnz	short loc_184D3
		mov	bx, si
		imul	bx, 0Ah
		mov	byte ptr [bx+53A0h], 0
		jmp	short loc_1851B
; ---------------------------------------------------------------------------

loc_184D3:
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		les	bx, _resident
		push	es:[bx+reiidenconfig_t.p_value]
		push	5
		call	sub_1FF8A
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	7
		mov	bx, si
		imul	bx, 0Ah
		push	word ptr [bx+539Ah]
		mov	bx, si
		imul	bx, 0Ah
		cmp	word ptr [bx+5398h], 600
		jle	short loc_18509
		mov	ax, 600
		jmp	short loc_18512
; ---------------------------------------------------------------------------

loc_18509:
		mov	bx, si
		imul	bx, 0Ah
		mov	ax, [bx+5398h]

loc_18512:
		push	ax
		call	graph_putsa_fx
		add	sp, 0Ah

loc_1851B:
		pop	si
		leave
		retf
sub_18465	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1851E	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_18581
; ---------------------------------------------------------------------------

loc_18526:
		mov	bx, si
		imul	bx, 0Ah
		cmp	byte ptr [bx+53A0h], 0
		jz	short loc_18580
		push	seg main_24_TEXT
		push	offset sub_18456
		push	seg main_24_TEXT
		push	offset sub_18465
		push	21h ; '!'
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 53A1h
		push	ax
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 539Eh
		push	ax
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 539Ah
		push	ax
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 5398h
		push	ax
		push	seg main_24_TEXT
		push	offset sub_1828D
		push	ds
		mov	ax, si
		imul	ax, 0Ah
		add	ax, 53A0h
		push	ax
		push	si
		call	sub_17ED1
		add	sp, 24h

loc_18580:
		inc	si

loc_18581:
		cmp	si, 0Ah

loc_18584:
		jl	short loc_18526
		pop	si
		pop	bp
		retf
sub_1851E	endp

main_24_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_25_TEXT	segment	byte public 'CODE' use16
		assume cs:main_25_TEXT
		;org 9
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18589	proc far

var_30		= byte ptr -30h
var_8		= dword	ptr -8
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= word ptr  0Ch
arg_8		= dword	ptr  0Eh
arg_C		= dword	ptr  12h
arg_10		= word ptr  16h

		enter	30h, 0
		push	si
		push	di
		mov	si, [bp+arg_0]
		mov	[bp+var_8], 1
		lea	ax, [bp+var_30]
		push	ss
		push	ax
		push	ds
		push	offset off_35A97
		mov	cx, 28h	; '('
		call	SCOPY@
		xor	di, di
		jmp	short loc_185BC
; ---------------------------------------------------------------------------

loc_185AF:
		mov	eax, [bp+var_8]
		imul	eax, 0Ah
		mov	[bp+var_8], eax
		inc	di

loc_185BC:
		cmp	di, [bp+arg_6]
		jl	short loc_185AF

loc_185C1:
		mov	ebx, 0Ah
		mov	eax, [bp+var_8]
		xor	edx, edx
		div	ebx
		mov	[bp+var_8], eax
		cmp	si, 270h
		jg	short loc_18653
		mov	eax, [bp+arg_8]
		xor	edx, edx
		div	[bp+var_8]
		mov	ebx, 0Ah
		xor	edx, edx
		div	ebx
		mov	[bp+var_2], dx
		mov	eax, [bp+arg_C]
		xor	edx, edx
		div	[bp+var_8]
		xor	edx, edx
		div	ebx
		mov	[bp+var_4], dx
		cmp	[bp+var_2], 0
		jz	short loc_18614
		mov	[bp+arg_10], 1

loc_18614:
		cmp	[bp+arg_10], 0
		jz	short loc_18647
		mov	ax, [bp+var_2]
		cmp	ax, [bp+var_4]
		jnz	short loc_18629
		cmp	[bp+arg_C], 0
		jnz	short loc_18647

loc_18629:
		mov	bx, [bp+var_2]
		shl	bx, 2
		lea	ax, [bp+var_30]
		add	bx, ax
		call	graph_putsa_fx c, si, [bp+arg_2], [bp+arg_4], large dword ptr ss:[bx]

loc_18647:
		add	si, 10h
		cmp	[bp+var_8], 1
		ja	loc_185C1

loc_18653:
		pop	di
		pop	si
		leave
		retf
sub_18589	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18657	proc far

var_8		= dword	ptr -8
var_4		= dword	ptr -4

		enter	8, 0
		push	si
		mov	[bp+var_4], 0F4240h
		les	bx, _resident
		mov	eax, es:[bx+reiidenconfig_t.hiscore]
		mov	[bp+var_8], eax
		cmp	eax, _score
		jnb	loc_187A3
		xor	si, si
		jmp	loc_18723
; ---------------------------------------------------------------------------

loc_1867F:
		mov	eax, dword_35ABF
		cdq
		idiv	[bp+var_4]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		push	edx
		mov	eax, _score
		xor	edx, edx
		div	[bp+var_4]
		xor	edx, edx
		div	ebx
		pop	eax
		cmp	eax, edx
		jnz	short loc_186B5
		cmp	byte_35A96, 1
		jnz	short loc_1870F

loc_186B5:
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 14Ah
		push	ax
		push	0
		mov	ax, si
		shl	ax, 4
		add	ax, 100h
		push	ax
		call	sub_109B2
		add	sp, 8
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 14Ah
		push	ax
		push	0
		mov	ax, si
		shl	ax, 4
		add	ax, 100h
		push	ax
		call	sub_109B2
		add	sp, 8

loc_1870F:
		mov	ebx, 0Ah
		mov	eax, [bp+var_4]
		cdq
		idiv	ebx
		mov	[bp+var_4], eax
		inc	si

loc_18723:
		cmp	si, 7
		jl	loc_1867F
		push	1
		call	_graph_accesspage_func
		pop	cx
		push	1
		cmp	byte_35A96, 1
		jnz	short loc_18740
		xor	eax, eax
		jmp	short loc_18744
; ---------------------------------------------------------------------------

loc_18740:
		mov	eax, dword_35ABF

loc_18744:
		push	eax
		pushd	[_score]
		push	70027h
		pushd	100h
		call	sub_18589
		add	sp, 12h
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	1
		cmp	byte_35A96, 1
		jnz	short loc_18774
		xor	eax, eax
		jmp	short loc_18778
; ---------------------------------------------------------------------------

loc_18774:
		mov	eax, dword_35ABF

loc_18778:
		push	eax
		pushd	[_score]
		push	70027h
		pushd	100h
		call	sub_18589
		add	sp, 12h
		mov	eax, _score
		mov	dword_35ABF, eax
		les	bx, _resident
		mov	es:[bx+reiidenconfig_t.hiscore], eax

loc_187A3:
		pop	si
		leave
		retf
sub_18657	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_187A6	proc far
		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, 0Ah
		xor	si, si
		jmp	short loc_1881F
; ---------------------------------------------------------------------------

loc_187B2:
		mov	ax, word_39DA4
		cwd
		idiv	di
		mov	bx, 0Ah
		cwd
		idiv	bx
		mov	ax, word_34A84
		push	dx
		cwd
		idiv	di
		cwd
		idiv	bx
		pop	ax
		cmp	ax, dx
		jnz	short loc_187D4
		cmp	byte_35A96, 1
		jnz	short loc_18814

loc_187D4:
		push	1
		call	_graph_accesspage_func
		pop	cx
		push	si
		push	14C0000h
		mov	ax, si
		shl	ax, 4
		add	ax, 190h
		push	ax
		call	sub_109B2
		add	sp, 8
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	si
		push	14C0000h
		mov	ax, si
		shl	ax, 4
		add	ax, 190h
		push	ax
		call	sub_109B2
		add	sp, 8

loc_18814:
		mov	bx, 0Ah
		mov	ax, di
		cwd
		idiv	bx
		mov	di, ax
		inc	si

loc_1881F:
		cmp	si, 2
		jl	short loc_187B2
		push	1
		call	_graph_accesspage_func
		pop	cx
		push	1
		cmp	byte_35A96, 1
		jnz	short loc_18839
		xor	ax, ax
		jmp	short loc_1883C
; ---------------------------------------------------------------------------

loc_18839:
		mov	ax, word_39DA4

loc_1883C:
		cwde
		push	eax
		movsx	eax, word_34A84
		push	eax
		push	20027h
		pushd	190h
		call	sub_18589
		add	sp, 12h
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	1
		cmp	byte_35A96, 1
		jnz	short loc_18870
		xor	ax, ax
		jmp	short loc_18873
; ---------------------------------------------------------------------------

loc_18870:
		mov	ax, word_39DA4

loc_18873:
		cwde
		push	eax
		movsx	eax, word_34A84
		push	eax
		push	20027h
		pushd	190h
		call	sub_18589
		add	sp, 12h
		mov	ax, word_34A84
		mov	word_39DA4, ax
		pop	di
		pop	si
		pop	bp
		retf
sub_187A6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1889C	proc far

var_6		= dword	ptr -6
var_2		= word ptr -2

		enter	6, 0
		push	si
		push	di
		mov	[bp+var_6], 0F4240h
		mov	di, 0Ah
		mov	[bp+var_2], 1
		jmp	loc_189ED
; ---------------------------------------------------------------------------

loc_188B5:
		push	[bp+var_2]
		call	_graph_accesspage_func
		pop	cx
		mov	[bp+var_6], 0F4240h
		mov	di, 0Ah
		xor	si, si
		jmp	short loc_1893C
; ---------------------------------------------------------------------------

loc_188CD:
		mov	eax, dword_39DA6
		cdq
		idiv	[bp+var_6]
		mov	ebx, 0Ah
		cdq
		idiv	ebx
		push	edx
		mov	eax, _score
		xor	edx, edx
		div	[bp+var_6]
		xor	edx, edx
		div	ebx
		pop	eax
		cmp	eax, edx
		jnz	short loc_18903
		cmp	byte_35A96, 1
		jnz	short loc_18928

loc_18903:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 146h
		push	ax
		push	10h
		mov	ax, si
		shl	ax, 4
		add	ax, 100h
		push	ax
		call	sub_109B2
		add	sp, 8

loc_18928:
		mov	ebx, 0Ah
		mov	eax, [bp+var_6]
		cdq
		idiv	ebx
		mov	[bp+var_6], eax
		inc	si

loc_1893C:
		cmp	si, 7
		jl	short loc_188CD
		push	1
		cmp	byte_35A96, 1
		jnz	short loc_1894F
		xor	eax, eax
		jmp	short loc_18953
; ---------------------------------------------------------------------------

loc_1894F:
		mov	eax, dword_39DA6

loc_18953:
		push	eax
		pushd	[_score]
		push	70037h
		push	100100h
		call	sub_18589
		add	sp, 12h
		xor	si, si
		jmp	short loc_189B6
; ---------------------------------------------------------------------------

loc_18971:
		mov	ax, word_39DAA
		cwd
		idiv	di
		mov	bx, 0Ah
		cwd
		idiv	bx
		mov	ax, word_34A84
		push	dx
		cwd
		idiv	di
		cwd
		idiv	bx
		pop	ax
		cmp	ax, dx
		jnz	short loc_18993
		cmp	byte_35A96, 1
		jnz	short loc_189AB

loc_18993:
		push	si
		push	1480010h
		mov	ax, si
		shl	ax, 4
		add	ax, 190h
		push	ax
		call	sub_109B2
		add	sp, 8

loc_189AB:
		mov	bx, 0Ah
		mov	ax, di
		cwd
		idiv	bx
		mov	di, ax
		inc	si

loc_189B6:
		cmp	si, 2
		jl	short loc_18971
		push	1
		cmp	byte_35A96, 1
		jnz	short loc_189C8
		xor	ax, ax
		jmp	short loc_189CB
; ---------------------------------------------------------------------------

loc_189C8:
		mov	ax, word_39DAA

loc_189CB:
		cwde
		push	eax
		movsx	eax, word_34A84
		push	eax
		push	20037h
		push	100190h
		call	sub_18589
		add	sp, 12h
		dec	[bp+var_2]

loc_189ED:
		cmp	[bp+var_2], 0
		jge	loc_188B5
		mov	eax, _score
		mov	dword_39DA6, eax
		mov	ax, word_34A84
		mov	word_39DAA, ax
		call	sub_18657
		mov	al, byte_39DA1
		mov	ah, 0
		cmp	ax, word_34A84
		jge	short loc_18A1C
		mov	al, byte ptr word_34A84
		mov	byte_39DA1, al
		call	sub_187A6

loc_18A1C:
		pop	di
		pop	si
		leave
		retf
sub_1889C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18A20	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+arg_0]
		or	di, di
		jz	loc_18AB6
		push	1
		call	_graph_accesspage_func
		pop	cx
		xor	si, si
		jmp	short loc_18A60
; ---------------------------------------------------------------------------

loc_18A3A:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 146h
		push	ax
		push	10h
		mov	ax, si
		shl	ax, 4
		add	ax, 100h
		push	ax
		call	sub_10585
		add	sp, 8
		inc	si

loc_18A60:
		cmp	si, 7
		jl	short loc_18A3A
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	1
		pushd	0
		pushd	[_score]
		push	70037h
		push	100100h
		call	sub_18589
		add	sp, 12h
		push	1
		call	_graph_accesspage_func
		pop	cx
		xor	si, si
		jmp	short loc_18AAF
; ---------------------------------------------------------------------------

loc_18A96:
		push	si
		push	1480010h
		mov	ax, si
		shl	ax, 4
		add	ax, 190h
		push	ax
		call	sub_10585
		add	sp, 8
		inc	si

loc_18AAF:
		cmp	si, 2
		jl	short loc_18A96
		jmp	short loc_18AD8
; ---------------------------------------------------------------------------

loc_18AB6:
		xor	si, si
		jmp	short loc_18AD3
; ---------------------------------------------------------------------------

loc_18ABA:
		push	si
		push	1480010h
		mov	ax, si
		shl	ax, 4
		add	ax, 190h
		push	ax
		call	sub_109B2
		add	sp, 8
		inc	si

loc_18AD3:
		cmp	si, 2
		jl	short loc_18ABA

loc_18AD8:
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	1
		pushd	63h ; 'c'
		pushd	0
		push	20037h
		push	100190h
		call	sub_18589
		add	sp, 12h
		or	di, di
		jz	loc_18B95
		push	1
		call	_graph_accesspage_func
		pop	cx
		xor	si, si
		jmp	short loc_18B33
; ---------------------------------------------------------------------------

loc_18B0D:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 14Ah
		push	ax
		push	0
		mov	ax, si
		shl	ax, 4
		add	ax, 100h
		push	ax
		call	sub_10585
		add	sp, 8
		inc	si

loc_18B33:
		cmp	si, 7
		jl	short loc_18B0D
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	1
		pushd	0
		les	bx, _resident
		pushd	dword ptr es:[bx+reiidenconfig_t.hiscore]
		push	70027h
		pushd	100h
		call	sub_18589
		add	sp, 12h
		push	1
		call	_graph_accesspage_func
		pop	cx
		xor	si, si
		jmp	short loc_18B86
; ---------------------------------------------------------------------------

loc_18B6D:
		push	si
		push	14C0000h
		mov	ax, si
		shl	ax, 4
		add	ax, 190h
		push	ax
		call	sub_10585
		add	sp, 8
		inc	si

loc_18B86:
		cmp	si, 2
		jl	short loc_18B6D
		push	0
		call	_graph_accesspage_func
		pop	cx
		jmp	short loc_18BB7
; ---------------------------------------------------------------------------

loc_18B95:
		xor	si, si
		jmp	short loc_18BB2
; ---------------------------------------------------------------------------

loc_18B99:
		push	si
		push	14C0000h
		mov	ax, si
		shl	ax, 4
		add	ax, 190h
		push	ax
		call	sub_109B2
		add	sp, 8
		inc	si

loc_18BB2:
		cmp	si, 2
		jl	short loc_18B99

loc_18BB7:
		push	1
		pushd	63h ; 'c'
		pushd	0
		push	20027h
		pushd	190h
		call	sub_18589
		add	sp, 12h
		push	0B00000h
		push	100h
		nopcall	sub_18CD3
		add	sp, 6
		push	0B00010h
		push	100h
		nopcall	sub_18CD3
		add	sp, 6
		mov	byte_39DA1, 0
		pop	di
		pop	si
		pop	bp
		retf
sub_18A20	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18BFD	proc far

var_3		= byte ptr -3
var_2		= byte ptr -2
var_1		= byte ptr -1

		enter	4, 0
		push	si
		push	di
		xor	di, di
		mov	al, byte_39DA0
		mov	[bp+var_3], al
		cli
		push	0Ah
		call	_grcg_setcolor_rmw
		pop	cx
		xor	si, si
		jmp	short loc_18C7C
; ---------------------------------------------------------------------------

loc_18C18:
		les	bx, node
		add	bx, di
		mov	al, es:[bx]
		mov	[bp+var_1], al
		inc	di
		cmp	al, [bp+var_3]
		jnz	short loc_18C69
		mov	bx, word ptr node
		add	bx, di
		mov	al, es:[bx]
		mov	[bp+var_2], al
		inc	di
		cmp	[bp+var_2], 0
		jz	short loc_18C69
		mov	bx, word ptr node
		add	bx, di
		mov	al, es:[bx]
		mov	[bp+var_1], al
		inc	di
		jmp	short loc_18C5F
; ---------------------------------------------------------------------------

loc_18C4C:
		cmp	[bp+var_1], 0
		jz	short loc_18C5E
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	al, [bp+var_1]
		mov	es:[bx], al

loc_18C5E:
		inc	si

loc_18C5F:
		mov	al, [bp+var_2]
		dec	[bp+var_2]
		or	al, al
		jnz	short loc_18C4C

loc_18C69:
		cmp	[bp+var_1], 0
		jz	short loc_18C7B
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	al, [bp+var_1]
		mov	es:[bx], al

loc_18C7B:
		inc	si

loc_18C7C:
		cmp	si, 14A0h
		jb	short loc_18C18
		call	_grcg_off_func
		sti
		pop	di
		pop	si
		leave
		retf
sub_18BFD	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18C8C	proc far

var_40		= byte ptr -40h
var_3B		= byte ptr -3Bh
var_38		= word ptr -38h
arg_0		= dword	ptr  6

		enter	40h, 0
		push	si
		pushd	[bp+arg_0]
		call	file_ropen
		push	ss
		lea	ax, [bp+var_40]
		push	ax
		push	40h
		call	file_read
		mov	al, [bp+var_3B]
		mov	byte_39DA0, al
		mov	si, [bp+var_38]
		mov	word_39DA2, si
		push	si
		call	@$bnwa$qui
		pop	cx
		mov	word ptr node+2, dx
		mov	word ptr node, ax
		push	dx
		push	ax
		push	si
		call	file_read
		call	file_close
		xor	ax, ax
		pop	si
		leave
		retf
sub_18C8C	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18CD3	proc far

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	6, 0
		push	si
		push	di
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		mov	dx, [bp+arg_2]
		imul	dx, 50h
		add	ax, dx
		mov	[bp+var_4], ax
		mov	si, [bp+var_4]
		mov	[bp+var_2], 0
		jmp	loc_18D84
; ---------------------------------------------------------------------------

loc_18CF8:
		mov	si, [bp+var_4]
		mov	[bp+var_6], 0
		jmp	short loc_18D6F
; ---------------------------------------------------------------------------

loc_18D02:
		mov	dx, 0A6h
		xor	ax, ax
		out	dx, ax
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	di, es:[bx]
		mov	ax, 1
		out	dx, ax
		mov	bx, word ptr _VRAM_PLANE_B
		add	bx, si
		mov	es:[bx], di
		xor	ax, ax
		out	dx, ax
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	di, es:[bx]
		mov	ax, 1
		out	dx, ax
		mov	bx, word ptr _VRAM_PLANE_R
		add	bx, si
		mov	es:[bx], di
		xor	ax, ax
		out	dx, ax
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	di, es:[bx]
		mov	ax, 1
		out	dx, ax
		mov	bx, word ptr _VRAM_PLANE_G
		add	bx, si
		mov	es:[bx], di
		xor	ax, ax
		out	dx, ax
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	di, es:[bx]
		mov	ax, 1
		out	dx, ax
		mov	bx, word ptr _VRAM_PLANE_E
		add	bx, si
		mov	es:[bx], di
		add	si, 2
		inc	[bp+var_6]

loc_18D6F:
		mov	ax, [bp+arg_4]
		mov	bx, 10h
		cwd
		idiv	bx
		cmp	ax, [bp+var_6]
		jg	short loc_18D02
		add	[bp+var_4], 50h	; 'P'
		inc	[bp+var_2]

loc_18D84:
		cmp	[bp+var_2], 10h
		jl	loc_18CF8
		push	0
		call	_graph_accesspage_func
		pop	cx
		pop	di
		pop	si
		leave
		retf
sub_18CD3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18D98	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_18DF8
; ---------------------------------------------------------------------------

loc_18DA0:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 140h
		push	ax
		mov	ax, si
		mov	bx, 6
		cwd
		idiv	bx
		shl	ax, 4
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 4
		add	dx, 80h
		push	dx
		call	sub_10585
		add	sp, 8
		pushd	0
		mov	ax, si
		mov	bx, 6
		cwd
		idiv	bx
		shl	ax, 4
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 4
		add	dx, 80h
		push	dx
		call	sub_19A62
		add	sp, 8
		inc	si

loc_18DF8:
		cmp	si, _rem_lives
		jl	short loc_18DA0
		mov	ax, _rem_lives
		shl	ax, 4
		push	ax
		pushd	80h
		call	sub_18CD3
		add	sp, 6
		pop	si
		pop	bp
		retf
sub_18D98	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18E15	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+arg_0]
		cmp	di, _rem_lives
		jle	loc_18EA9
		mov	si, _rem_lives
		jmp	short loc_18EA2
; ---------------------------------------------------------------------------

loc_18E2B:
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 140h
		push	ax
		mov	ax, si
		mov	bx, 6
		cwd
		idiv	bx
		shl	ax, 4
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 4
		add	dx, 80h
		push	dx
		call	sub_109B2
		add	sp, 8
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 140h
		push	ax
		mov	ax, si
		mov	bx, 6
		cwd
		idiv	bx
		shl	ax, 4
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 4
		add	dx, 80h
		push	dx
		call	sub_109B2
		add	sp, 8
		inc	si

loc_18EA2:
		cmp	si, di
		jl	short loc_18E2B
		jmp	loc_18F2D
; ---------------------------------------------------------------------------

loc_18EA9:
		cmp	di, _rem_lives
		jge	short loc_18F2D
		mov	si, di
		jmp	short loc_18F13
; ---------------------------------------------------------------------------

loc_18EB3:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 140h
		push	ax
		mov	ax, si
		mov	bx, 6
		cwd
		idiv	bx
		shl	ax, 4
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 4
		add	dx, 80h
		push	dx
		call	sub_10585
		add	sp, 8
		push	0
		call	_graph_accesspage_func
		pop	cx
		pushd	0
		mov	ax, si
		mov	bx, 6
		cwd
		idiv	bx
		shl	ax, 4
		push	ax
		mov	ax, si
		cwd
		idiv	bx
		shl	dx, 4
		add	dx, 80h
		push	dx
		call	sub_19A62
		add	sp, 8
		inc	si

loc_18F13:
		cmp	si, _rem_lives
		jl	short loc_18EB3
		mov	ax, _rem_lives
		shl	ax, 4
		push	ax
		pushd	80h
		call	sub_18CD3
		add	sp, 6

loc_18F2D:
		pop	di
		pop	si
		pop	bp
		retf
sub_18E15	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18F31	proc far
		push	bp
		mov	bp, sp
		push	si
		xor	si, si
		jmp	short loc_18F78
; ---------------------------------------------------------------------------

loc_18F39:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 144h
		push	ax
		push	10h
		mov	ax, si
		shl	ax, 4
		add	ax, 80h
		push	ax
		call	sub_10585
		add	sp, 8
		push	10000h
		push	10h
		mov	ax, si
		shl	ax, 4
		add	ax, 80h
		push	ax
		call	sub_19A62
		add	sp, 8
		inc	si

loc_18F78:
		mov	al, _bombs
		cbw
		cmp	ax, si
		jg	short loc_18F39
		mov	al, _bombs
		cbw
		shl	ax, 4
		push	ax
		push	100080h
		call	sub_18CD3
		add	sp, 6
		pop	si
		pop	bp
		retf
sub_18F31	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_18F98	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		push	si
		push	di
		mov	di, [bp+arg_0]
		mov	al, _bombs
		cbw
		cmp	ax, di
		jge	short loc_19011
		mov	al, _bombs
		cbw
		mov	si, ax
		jmp	short loc_1900B
; ---------------------------------------------------------------------------

loc_18FB0:
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 144h
		push	ax
		push	10h
		mov	ax, si
		shl	ax, 4
		add	ax, 80h
		push	ax
		call	sub_109B2
		add	sp, 8
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 144h
		push	ax
		push	10h
		mov	ax, si
		shl	ax, 4
		add	ax, 80h
		push	ax
		call	sub_109B2
		add	sp, 8
		inc	si

loc_1900B:
		cmp	si, di
		jl	short loc_18FB0
		jmp	short loc_19081
; ---------------------------------------------------------------------------

loc_19011:
		mov	al, _bombs
		cbw
		cmp	ax, di
		jle	short loc_19081
		mov	si, di
		jmp	short loc_19064
; ---------------------------------------------------------------------------

loc_1901D:
		mov	ax, si
		mov	bx, 4
		cwd
		idiv	bx
		push	dx
		mov	ax, si
		cwd
		idiv	bx
		add	ax, 144h
		push	ax
		push	10h
		mov	ax, si
		shl	ax, 4
		add	ax, 80h
		push	ax
		call	sub_10585
		add	sp, 8
		push	0
		call	_graph_accesspage_func
		pop	cx
		push	10000h
		push	10h
		mov	ax, si
		shl	ax, 4
		add	ax, 80h
		push	ax
		call	sub_19A62
		add	sp, 8
		inc	si

loc_19064:
		mov	al, _bombs
		cbw
		cmp	ax, si
		jg	short loc_1901D
		mov	al, _bombs
		cbw
		shl	ax, 4
		push	ax
		push	100080h
		call	sub_18CD3
		add	sp, 6

loc_19081:
		pop	di
		pop	si
		pop	bp
		retf
sub_18F98	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_19085	proc far

var_4		= byte ptr -4

		enter	4, 0
		pushd	142h
		push	200260h
		call	sub_10585
		add	sp, 8
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		mov	al, byte_34A34
		cbw
		push	ax
		push	2
		call	sub_1FF8A
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	(27h shl 16) or 32
		push	608
		call	graph_putsa_fx
		add	sp, 0Ah
		push	100020h
		push	260h
		call	sub_18CD3
		add	sp, 6
		leave
		retf
sub_19085	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_190D6	proc far

var_4		= byte ptr -4

		enter	4, 0
		push	1
		call	_graph_accesspage_func
		pop	cx
		call	sub_18BFD
		push	0
		call	_graph_accesspage_func
		pop	cx
		call	sub_18BFD
		cmp	byte_34A47, 0
		jnz	short loc_1910C
		mov	al, _route
		cbw
		push	ax
		mov	al, byte_34A34
		cbw
		dec	ax
		push	ax
		call	sub_19243
		add	sp, 4

loc_1910C:
		cmp	byte_34A49, 1
		jnz	short loc_19124
		call	sub_18D98
		call	sub_18F31
		call	sub_19085
		call	sub_1926B

loc_19124:
		push	1
		call	_graph_accesspage_func
		pop	cx
		mov	al, _rank
		cbw
		shl	ax, 2
		mov	bx, ax
		pushd	aRANKS[bx]
		push	(27h shl 16) or 48
		mov	al, _rank
		cbw
		shl	ax, 2
		mov	bx, ax
		pushd	aRANKS[bx]
		push	7
		call	sub_F9D0
		add	sp, 6
		cwd
		sub	ax, dx
		sar	ax, 1
		mov	dx, 600
		sub	dx, ax
		push	dx
		call	graph_putsa_fx
		add	sp, 0Ah
		pushd	142h
		push	200260h
		call	sub_109B2
		add	sp, 8
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		mov	al, byte_34A34
		cbw
		push	ax
		push	2
		call	sub_1FF8A
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	(27h shl 16) or 32
		push	608
		call	graph_putsa_fx
		add	sp, 0Ah
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	al, _rank
		cbw
		shl	ax, 2
		mov	bx, ax
		pushd	aRANKS[bx]
		push	(27h shl 16) or 48
		mov	al, _rank
		cbw
		shl	ax, 2
		mov	bx, ax
		pushd	aRANKS[bx]
		push	7
		call	sub_F9D0
		add	sp, 6
		cwd
		sub	ax, dx
		sar	ax, 1
		mov	dx, 600
		sub	dx, ax
		push	dx
		call	graph_putsa_fx
		add	sp, 0Ah
		pushd	142h
		push	200260h
		call	sub_109B2
		add	sp, 8
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		push	(27h shl 16) or 32
		push	608
		call	graph_putsa_fx
		add	sp, 0Ah
		mov	byte_39DA1, 0
		cmp	byte_34A49, 1
		jnz	short loc_19227
		push	1
		jmp	short loc_19229
; ---------------------------------------------------------------------------

loc_19227:
		push	0

loc_19229:
		call	sub_18A20
		pop	cx
		call	sub_192D6
		mov	byte_35A96, 1
		call	sub_1889C
		mov	byte_35A96, 0
		leave
		retf
sub_190D6	endp

main_25_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_26_TEXT	segment	byte public 'CODE' use16
		assume cs:main_26_TEXT
		;org 3
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_19243	proc far

arg_0		= word ptr  6
arg_2		= word ptr  8

		push	bp

loc_19244:
		mov	bp, sp
		mov	dx, [bp+arg_0]
		cmp	dx, 5
		jge	short loc_19252
		mov	bx, dx
		jmp	short loc_1925A
; ---------------------------------------------------------------------------

loc_19252:
		mov	bx, [bp+arg_2]
		imul	bx, 0Fh
		add	bx, dx

loc_1925A:
		add	bx, bx
		mov	ax, [bx+1142h]
		mov	word_39DAC, ax
		mov	word_39DAE, 0
		pop	bp
		retf
sub_19243	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1926B	proc far

var_6		= byte ptr -6

		enter	6, 0
		push	si
		xor	si, si
		jmp	short loc_19287
; ---------------------------------------------------------------------------

loc_19274:
		push	si
		push	14D0000h
		push	200h
		call	sub_10585
		add	sp, 8
		inc	si

loc_19287:
		cmp	si, 2
		jl	short loc_19274
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	word_39DAC
		push	4
		call	sub_1FF8A
		push	1
		call	_graph_accesspage_func
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	(27h shl 16) or 0
		push	512
		call	graph_putsa_fx
		push	0
		call	_graph_accesspage_func
		push	ss
		lea	ax, [bp+var_6]
		push	ax
		push	(27h shl 16) or 0
		push	512
		call	graph_putsa_fx
		add	sp, 18h
		pop	si
		leave
		retf
sub_1926B	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_192D6	proc far

@@str		= byte ptr -6

		enter	6, 0
		push	si
		cmp	word_39DAC, 0C8h ; 'ﾈ'
		jnb	short loc_192E8
		mov	ax, 2Ah
		jmp	short loc_192EB
; ---------------------------------------------------------------------------

loc_192E8:
		mov	ax, 27h

loc_192EB:
		mov	si, ax
		push	1
		call	_graph_accesspage_func
		pushd	14Dh
		pushd	200h
		call	sub_109B2
		push	1014Dh
		pushd	210h
		call	sub_109B2
		push	ss
		lea	ax, [bp+@@str]
		push	ax
		push	word_39DAC
		push	4
		call	sub_1FF8A
		push	ss
		lea	ax, [bp+@@str]
		push	ax
		push	si
		pushd	(0 shl 16) or 512
		call	graph_putsa_fx
		push	0
		call	_graph_accesspage_func
		pushd	14Dh
		pushd	200h
		call	sub_109B2
		push	1014Dh
		pushd	210h
		call	sub_109B2
		add	sp, 2Eh
		push	ss
		lea	ax, [bp+@@str]
		push	ax
		push	word_39DAC
		push	4
		call	sub_1FF8A
		push	ss
		lea	ax, [bp+@@str]
		push	ax
		push	si
		pushd	(0 shl 16) or 512
		call	graph_putsa_fx
		add	sp, 0Ah
		pop	si
		leave
		retf
sub_192D6	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1938A	proc far
		push	bp
		mov	bp, sp
		cmp	word_39DAC, 0
		jbe	short loc_193B3
		sub	word_39DAC, 2
		call	sub_192D6
		cmp	word_39DAC, 0
		jnz	short loc_193B8
		push	2
		call	sub_CBF2
		pop	cx
		nopcall	sub_193DE
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_193B3:
		nopcall	sub_195AD

loc_193B8:
		pop	bp
		retf
sub_1938A	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_193BA	proc far
		push	bp
		mov	bp, sp
		cmp	word_39DAC, 0
		jz	short loc_193CC
		add	word_39DAC, 0C8h ; 'ﾈ'
		jmp	short loc_193D2
; ---------------------------------------------------------------------------

loc_193CC:
		add	word_39DAC, 3E8h

loc_193D2:
		call	sub_192D6
		mov	word_39DAE, 0
		pop	bp
		retf
sub_193BA	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_193DE	proc far

var_94		= word ptr -94h
var_82		= word ptr -82h
var_70		= word ptr -70h
var_5E		= word ptr -5Eh
var_4C		= word ptr -4Ch
var_3A		= word ptr -3Ah
var_28		= word ptr -28h
inregs		= REGS ptr -16h
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= byte ptr -2
var_1		= byte ptr -1

		enter	94h, 0
		push	si
		push	di
		push	11h
		call	_mdrv2_se_play
		push	8048h		; int
		push	ss		; int
		lea	ax, [bp+var_94]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8041h		; int
		push	ss		; int
		lea	ax, [bp+var_82]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8052h		; int
		push	ss		; int
		lea	ax, [bp+var_70]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8052h		; int
		push	ss		; int
		lea	ax, [bp+var_5E]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		add	sp, 2Ah
		push	8059h		; int
		push	ss		; int
		lea	ax, [bp+var_4C]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8055h		; int
		push	ss		; int
		lea	ax, [bp+var_3A]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		push	8050h		; int
		push	ss		; int
		lea	ax, [bp+var_28]
		push	ax		; int
		push	ss
		lea	ax, [bp+inregs]
		push	ax		; inregs
		call	sub_BA53
		mov	[bp+var_4], 0
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B933
		add	sp, 26h
		mov	di, 2
		jmp	short loc_194DE
; ---------------------------------------------------------------------------

loc_1948B:
		mov	[bp+var_6], 0
		jmp	short loc_194D7
; ---------------------------------------------------------------------------

loc_19492:
		mov	bx, [bp+var_6]
		imul	bx, 12h
		add	bx, di
		lea	ax, [bp+var_94]
		add	bx, ax
		mov	al, ss:[bx]
		mov	[bp+var_1], al
		mov	[bp+var_2], 80h
		xor	si, si
		jmp	short loc_194CF
; ---------------------------------------------------------------------------

loc_194AE:
		mov	al, [bp+var_2]
		test	[bp+var_1], al
		jnz	short loc_194BA
		push	1
		jmp	short loc_194BC
; ---------------------------------------------------------------------------

loc_194BA:
		push	45h ; 'E'

loc_194BC:
		push	20h ; ' '
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B8B5
		add	sp, 8
		shr	[bp+var_2], 1
		inc	si

loc_194CF:
		cmp	si, 8
		jb	short loc_194AE
		inc	[bp+var_6]

loc_194D7:
		cmp	[bp+var_6], 5
		jb	short loc_19492
		inc	di

loc_194DE:
		cmp	di, 11h
		jbe	short loc_1948B
		push	1Bh
		call	_frame_delay
		mov	[bp+var_4], 0
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B933
		add	sp, 0Ah
		mov	di, 2
		jmp	loc_19595
; ---------------------------------------------------------------------------

loc_19508:
		xor	si, si
		jmp	short loc_19520
; ---------------------------------------------------------------------------

loc_1950C:
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B8B5
		add	sp, 8
		inc	si

loc_19520:
		cmp	si, 0Ch
		jb	short loc_1950C
		mov	[bp+var_6], 5
		jmp	short loc_19571
; ---------------------------------------------------------------------------

loc_1952C:
		mov	bx, [bp+var_6]
		imul	bx, 12h
		add	bx, di
		lea	ax, [bp+var_94]
		add	bx, ax
		mov	al, ss:[bx]
		mov	[bp+var_1], al
		mov	[bp+var_2], 80h
		xor	si, si
		jmp	short loc_19569
; ---------------------------------------------------------------------------

loc_19548:
		mov	al, [bp+var_2]
		test	[bp+var_1], al
		jnz	short loc_19554
		push	1
		jmp	short loc_19556
; ---------------------------------------------------------------------------

loc_19554:
		push	45h ; 'E'

loc_19556:
		push	20h ; ' '
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B8B5
		add	sp, 8
		shr	[bp+var_2], 1
		inc	si

loc_19569:
		cmp	si, 8
		jb	short loc_19548
		inc	[bp+var_6]

loc_19571:
		cmp	[bp+var_6], 7
		jb	short loc_1952C
		xor	si, si
		jmp	short loc_1958F
; ---------------------------------------------------------------------------

loc_1957B:
		push	10020h
		push	ss
		lea	ax, [bp+var_4]
		push	ax
		call	sub_B8B5
		add	sp, 8
		inc	si

loc_1958F:
		cmp	si, 0Ch
		jb	short loc_1957B
		inc	di

loc_19595:
		cmp	di, 11h
		jbe	loc_19508
		push	1Bh
		call	_frame_delay
		pop	cx
		call	text_clear
		pop	di
		pop	si
		leave
		retf
sub_193DE	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_195AD	proc far

var_2		= byte ptr -2
var_1		= byte ptr -1

		enter	2, 0
		inc	word_39DAE
		inc	byte_39DB0
		cmp	word_39DAE, 0C8h ; 'ﾈ'
		jnb	short loc_195D9
		mov	al, byte_39DB0
		mov	ah, 0
		mov	bx, 5
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_195D5
		mov	ax, 1
		jmp	short loc_1963B
; ---------------------------------------------------------------------------

loc_195D5:
		xor	ax, ax
		jmp	short loc_1963B
; ---------------------------------------------------------------------------

loc_195D9:
		cmp	word_39DAE, 12Ch
		jnb	short loc_195F9
		mov	al, byte_39DB0
		mov	ah, 0
		mov	bx, 4
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_195F5
		mov	ax, 1
		jmp	short loc_1963B
; ---------------------------------------------------------------------------

loc_195F5:
		xor	ax, ax
		jmp	short loc_1963B
; ---------------------------------------------------------------------------

loc_195F9:
		cmp	word_39DAE, 190h
		jnb	short loc_19619
		mov	al, byte_39DB0
		mov	ah, 0
		mov	bx, 3
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_19615
		mov	ax, 1
		jmp	short loc_1963B
; ---------------------------------------------------------------------------

loc_19615:
		xor	ax, ax
		jmp	short loc_1963B
; ---------------------------------------------------------------------------

loc_19619:
		cmp	word_39DAE, 1F4h
		jnb	short loc_19639
		mov	al, byte_39DB0
		mov	ah, 0
		mov	bx, 2
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_19635
		mov	ax, 1
		jmp	short loc_19637
; ---------------------------------------------------------------------------

loc_19635:
		xor	ax, ax

loc_19637:
		jmp	short loc_1963B
; ---------------------------------------------------------------------------

loc_19639:
		mov	al, 1

loc_1963B:
		mov	[bp+var_1], al
		cmp	[bp+var_1], 0
		jz	short locret_1967C
		mov	[bp+var_2], 0
		jmp	short loc_1966D
; ---------------------------------------------------------------------------

loc_1964A:
		push	30001Eh
		push	40h
		call	IRand
		mov	bx, 280h
		cwd
		idiv	bx
		push	dx
		push	ds
		push	offset unk_37635
		call	sub_30368
		add	sp, 0Ch
		inc	[bp+var_2]

loc_1966D:
		mov	al, [bp+var_2]

loc_19670:
		mov	ah, 0
		push	ax

loc_19673:
		mov	al, _rank
		cbw
		pop	dx
		cmp	dx, ax
		jle	short loc_1964A

locret_1967C:
		leave
		retf
sub_195AD	endp

main_26_TEXT	ends

; ===========================================================================

; Segment type:	Pure code
main_27_TEXT	segment	byte public 'CODE' use16
		assume cs:main_27_TEXT
		;org 0Eh
		assume es:nothing, ss:nothing, ds:_DATA, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1967E	proc far

arg_0		= word ptr  6

		push	bp
		mov	bp, sp
		mov	ax, [bp+arg_0]
		add	x_36C26, ax
		cmp	x_36C26, 0
		jge	short loc_19697
		mov	x_36C26, 0
		pop	bp
		retf
; ---------------------------------------------------------------------------

loc_19697:
		cmp	x_36C26, 608
		jl	short loc_196A5
		mov	x_36C26, 608

loc_196A5:
		pop	bp
		retf
sub_1967E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_196A7	proc far

var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	18h, 0
		push	si
		push	di
		mov	[bp+var_4], 0
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	si, ax
		mov	bx, [bp+arg_4]
		sar	bx, 6
		shl	bx, 2
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		xor	di, di
		jmp	loc_197D6
; ---------------------------------------------------------------------------

loc_196FC:
		mov	ax, di
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+201h]
		mov	[bp+var_4], eax
		push	0
		call	_graph_accesspage_func
		pop	cx
		cmp	[bp+var_4], 0
		jz	loc_197CC
		push	0
		call	_grcg_setcolor_rmw
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	eax, [bp+var_4]
		mov	es:[bx], eax
		call	_grcg_off_func
		push	1
		call	_graph_accesspage_func
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	eax, es:[bx]
		and	eax, [bp+var_4]
		mov	[bp+var_18], eax
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	eax, es:[bx]
		and	eax, [bp+var_4]
		mov	[bp+var_14], eax
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	eax, es:[bx]
		and	eax, [bp+var_4]
		mov	[bp+var_10], eax
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	eax, es:[bx]
		and	eax, [bp+var_4]
		mov	[bp+var_C], eax
		push	0
		call	_graph_accesspage_func
		add	sp, 6
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	eax, [bp+var_18]
		or	es:[bx], eax
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	eax, [bp+var_14]
		or	es:[bx], eax
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	eax, [bp+var_10]
		or	es:[bx], eax
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	eax, [bp+var_C]
		or	es:[bx], eax

loc_197CC:
		add	si, 50h	; 'P'
		cmp	si, 7D00h
		ja	short loc_197DD
		inc	di

loc_197D6:
		cmp	di, 20h	; ' '
		jb	loc_196FC

loc_197DD:
		pop	di
		pop	si
		leave
		retf
sub_196A7	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_197E1	proc far

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah

		enter	8, 0
		push	si
		push	di
		mov	[bp+var_4], 0
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	di, ax
		mov	bx, [bp+arg_4]
		sar	bx, 6
		shl	bx, 2
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_8+2], dx
		mov	word ptr [bp+var_8], ax
		cmp	byte_35B29, 0
		jz	short loc_1984C
		push	200020h
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	_egc_copy_rect_1_to_0
		add	sp, 8

loc_1984C:
		xor	si, si
		jmp	loc_1990A
; ---------------------------------------------------------------------------

loc_19851:
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+201h]
		mov	[bp+var_4], eax
		cmp	[bp+var_4], 0
		jz	loc_19900
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	eax, [bp+var_4]
		mov	es:[bx], eax
		call	_grcg_off_func
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+1]
		and	eax, [bp+var_4]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		or	es:[bx], eax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+81h]
		and	eax, [bp+var_4]
		les	bx, _VRAM_PLANE_R
		add	bx, di
		or	es:[bx], eax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+101h]
		and	eax, [bp+var_4]
		les	bx, _VRAM_PLANE_G
		add	bx, di
		or	es:[bx], eax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_8]
		add	bx, ax
		mov	eax, es:[bx+181h]
		and	eax, [bp+var_4]
		les	bx, _VRAM_PLANE_E
		add	bx, di
		or	es:[bx], eax

loc_19900:
		add	di, 50h	; 'P'
		cmp	di, 7D00h
		ja	short loc_19911
		inc	si

loc_1990A:
		cmp	si, 20h	; ' '
		jb	loc_19851

loc_19911:
		pop	di
		pop	si
		leave
		retf
sub_197E1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_19915	proc far

var_16		= dword	ptr -16h
var_12		= dword	ptr -12h
var_E		= word ptr -0Eh
var_C		= word ptr -0Ch
var_A		= word ptr -0Ah
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= byte ptr  0Ch

		enter	16h, 0
		push	si
		push	di
		mov	[bp+var_12], 0
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	si, ax
		mov	bx, [bp+arg_4]
		sar	bx, 6
		shl	bx, 2
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_16+2],	dx
		mov	word ptr [bp+var_16], ax
		test	[bp+arg_6], 2
		jz	short loc_19970
		mov	ax, 10h
		jmp	short loc_19972
; ---------------------------------------------------------------------------

loc_19970:
		xor	ax, ax

loc_19972:
		mov	[bp+var_4], ax
		test	[bp+arg_6], 1
		jz	short loc_19980
		mov	ax, 10h
		jmp	short loc_19982
; ---------------------------------------------------------------------------

loc_19980:
		xor	ax, ax

loc_19982:
		mov	[bp+var_6], ax
		mov	ax, [bp+var_4]
		mov	[bp+var_2], ax
		jmp	loc_19A51
; ---------------------------------------------------------------------------

loc_1998E:
		mov	ax, [bp+var_2]
		shl	ax, 2
		les	bx, [bp+var_16]
		add	bx, ax
		mov	eax, es:[bx+201h]
		mov	[bp+var_12], eax
		push	0
		call	_graph_accesspage_func
		pop	cx
		mov	eax, [bp+var_12]
		mov	cl, byte ptr [bp+var_6]
		sar	eax, cl
		mov	di, ax
		or	di, di
		jz	loc_19A4B
		push	0
		call	_grcg_setcolor_rmw
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	es:[bx], di
		call	_grcg_off_func
		push	1
		call	_graph_accesspage_func
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	ax, es:[bx]
		and	ax, di
		mov	[bp+var_E], ax
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	ax, es:[bx]
		and	ax, di
		mov	[bp+var_C], ax
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	ax, es:[bx]
		and	ax, di
		mov	[bp+var_A], ax
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	ax, es:[bx]
		and	ax, di
		mov	[bp+var_8], ax
		push	0
		call	_graph_accesspage_func
		add	sp, 6
		les	bx, _VRAM_PLANE_B
		add	bx, si
		mov	ax, [bp+var_E]
		or	es:[bx], ax
		les	bx, _VRAM_PLANE_R
		add	bx, si
		mov	ax, [bp+var_C]
		or	es:[bx], ax
		les	bx, _VRAM_PLANE_G
		add	bx, si
		mov	ax, [bp+var_A]
		or	es:[bx], ax
		les	bx, _VRAM_PLANE_E
		add	bx, si
		mov	ax, [bp+var_8]
		or	es:[bx], ax

loc_19A4B:
		add	si, 50h	; 'P'
		inc	[bp+var_2]

loc_19A51:
		mov	ax, [bp+var_4]
		add	ax, 10h
		cmp	ax, [bp+var_2]
		ja	loc_1998E
		pop	di
		pop	si
		leave
		retf
sub_19915	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_19A62	proc far

var_E		= dword	ptr -0Eh
var_A		= dword	ptr -0Ah
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= byte ptr  0Ch

		enter	0Eh, 0
		push	si
		push	di
		mov	[bp+var_A], 0
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	di, ax
		mov	bx, [bp+arg_4]
		sar	bx, 6
		shl	bx, 2
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_E+2], dx
		mov	word ptr [bp+var_E], ax
		test	[bp+arg_6], 2
		jz	short loc_19ABD
		mov	ax, 10h
		jmp	short loc_19ABF
; ---------------------------------------------------------------------------

loc_19ABD:
		xor	ax, ax

loc_19ABF:
		mov	[bp+var_4], ax
		test	[bp+arg_6], 1
		jz	short loc_19ACD
		mov	ax, 10h
		jmp	short loc_19ACF
; ---------------------------------------------------------------------------

loc_19ACD:
		xor	ax, ax

loc_19ACF:
		mov	[bp+var_6], ax
		cmp	byte_35B29, 0
		jz	short loc_19AED
		push	100010h
		push	[bp+arg_2]
		push	[bp+arg_0]
		call	_egc_copy_rect_1_to_0
		add	sp, 8

loc_19AED:
		mov	si, [bp+var_4]
		jmp	loc_19BB3
; ---------------------------------------------------------------------------

loc_19AF3:
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_E]
		add	bx, ax
		mov	eax, es:[bx+201h]
		mov	[bp+var_A], eax
		mov	cl, byte ptr [bp+var_6]
		sar	eax, cl
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 0
		jz	loc_19BAF
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	ax, [bp+var_2]
		mov	es:[bx], ax
		call	_grcg_off_func
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_E]
		add	bx, ax
		mov	eax, es:[bx+1]
		mov	cl, byte ptr [bp+var_6]
		shr	eax, cl
		and	ax, [bp+var_2]
		les	bx, _VRAM_PLANE_B
		add	bx, di
		or	es:[bx], ax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_E]
		add	bx, ax
		mov	eax, es:[bx+81h]
		shr	eax, cl
		and	ax, [bp+var_2]
		les	bx, _VRAM_PLANE_R
		add	bx, di
		or	es:[bx], ax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_E]
		add	bx, ax
		mov	eax, es:[bx+101h]
		shr	eax, cl
		and	ax, [bp+var_2]
		les	bx, _VRAM_PLANE_G
		add	bx, di
		or	es:[bx], ax
		mov	ax, si
		shl	ax, 2
		les	bx, [bp+var_E]
		add	bx, ax
		mov	eax, es:[bx+181h]
		shr	eax, cl
		and	ax, [bp+var_2]
		les	bx, _VRAM_PLANE_E
		add	bx, di
		or	es:[bx], ax

loc_19BAF:
		add	di, 50h	; 'P'
		inc	si

loc_19BB3:
		mov	ax, [bp+var_4]
		add	ax, 10h
		cmp	ax, si
		ja	loc_19AF3
		pop	di
		pop	si
		leave
		retf
sub_19A62	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_19BC3	proc far

var_30		= byte ptr -30h
var_20		= dword	ptr -20h
var_1C		= word ptr -1Ch
var_1A		= word ptr -1Ah
var_18		= word ptr -18h
var_16		= word ptr -16h
var_14		= word ptr -14h
var_12		= dword	ptr -12h
var_E		= dword	ptr -0Eh
var_9		= byte ptr -9
var_8		= word ptr -8
var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6
arg_2		= word ptr  8
arg_4		= word ptr  0Ah
arg_6		= byte ptr  0Ch

		enter	30h, 0
		push	si
		push	di
		mov	ax, [bp+arg_0]
		mov	bx, 8
		cwd
		idiv	bx
		mov	[bp+var_9], dl
		mov	eax, dword_35B2A
		mov	[bp+var_E], eax
		mov	eax, dword_35B2E
		mov	[bp+var_12], eax
		mov	ax, [bp+arg_0]
		sar	ax, 3
		mov	dx, [bp+arg_2]
		shl	dx, 6
		add	ax, dx
		mov	dx, [bp+arg_2]
		shl	dx, 4
		add	ax, dx
		mov	di, ax
		mov	bx, [bp+arg_4]
		sar	bx, 6
		shl	bx, 2
		mov	ax, [bx+401Ah]
		mov	dx, [bx+4018h]
		push	ax
		mov	ax, [bp+arg_4]
		mov	bx, 40h
		push	dx
		cwd
		idiv	bx
		imul	dx, 281h
		pop	ax
		add	ax, dx
		pop	dx
		mov	word ptr [bp+var_20+2],	dx
		mov	word ptr [bp+var_20], ax
		mov	eax, _VRAM_PLANE_B
		mov	dword_35B32, eax
		mov	eax, _VRAM_PLANE_R
		mov	dword_35B36, eax
		mov	eax, _VRAM_PLANE_G
		mov	dword_35B3A, eax
		mov	eax, _VRAM_PLANE_E
		mov	dword_35B3E, eax
		lea	ax, [bp+var_30]
		push	ss
		push	ax
		push	ds
		push	offset dword_35B32
		mov	cx, 10h
		call	SCOPY@
		cmp	[bp+arg_0], 0
		jge	short loc_19C67
		cmp	[bp+arg_0], 270h
		jg	loc_19E44

loc_19C67:
		test	[bp+arg_6], 2
		jz	short loc_19C72
		mov	ax, 10h
		jmp	short loc_19C74
; ---------------------------------------------------------------------------

loc_19C72:
		xor	ax, ax

loc_19C74:
		mov	[bp+var_6], ax
		test	[bp+arg_6], 1
		jz	short loc_19C82
		mov	ax, 10h
		jmp	short loc_19C84
; ---------------------------------------------------------------------------

loc_19C82:
		xor	ax, ax

loc_19C84:
		mov	[bp+var_8], ax
		mov	ax, [bp+var_6]
		mov	[bp+var_2], ax
		jmp	loc_19E37
; ---------------------------------------------------------------------------

loc_19C90:
		xor	si, si
		jmp	short loc_19CBE
; ---------------------------------------------------------------------------

loc_19C94:
		mov	ax, si
		shl	ax, 7
		les	bx, [bp+var_20]
		add	bx, ax
		mov	ax, [bp+var_2]
		shl	ax, 2
		add	bx, ax
		mov	eax, es:[bx+1]
		mov	cl, byte ptr [bp+var_8]
		shr	eax, cl
		mov	bx, si
		add	bx, bx
		lea	dx, [bp+var_1A]
		add	bx, dx
		mov	ss:[bx], ax
		inc	si

loc_19CBE:
		cmp	si, 4
		jb	short loc_19C94
		mov	ax, [bp+var_1A]
		and	ax, [bp+var_18]
		and	ax, [bp+var_16]
		and	ax, [bp+var_14]
		not	ax
		mov	[bp+var_4], ax
		cmp	[bp+var_9], 0
		jnz	short loc_19D54
		cmp	[bp+var_4], 0
		jz	loc_19E2B
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	ax, [bp+var_4]
		mov	es:[bx], ax
		call	_grcg_off_func
		cmp	[bp+var_1A], 0
		jz	short loc_19D10
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	ax, [bp+var_1A]
		and	ax, [bp+var_4]
		or	es:[bx], ax

loc_19D10:
		cmp	[bp+var_18], 0
		jz	short loc_19D25
		les	bx, _VRAM_PLANE_R
		add	bx, di
		mov	ax, [bp+var_18]
		and	ax, [bp+var_4]
		or	es:[bx], ax

loc_19D25:
		cmp	[bp+var_16], 0
		jz	short loc_19D3A
		les	bx, _VRAM_PLANE_G
		add	bx, di
		mov	ax, [bp+var_16]
		and	ax, [bp+var_4]
		or	es:[bx], ax

loc_19D3A:
		cmp	[bp+var_14], 0
		jz	loc_19E2B
		les	bx, _VRAM_PLANE_E
		add	bx, di
		mov	ax, [bp+var_14]
		and	ax, [bp+var_4]
		or	es:[bx], ax
		jmp	loc_19E2B
; ---------------------------------------------------------------------------

loc_19D54:
		cmp	[bp+var_4], 0
		jz	loc_19E2B
		mov	ax, [bp+var_4]
		and	ax, 0FFh
		mov	cl, [bp+var_9]
		shr	ax, cl
		mov	byte ptr [bp+var_E], al
		mov	al, byte ptr [bp+var_4]
		and	al, 0FFh
		mov	cl, 8
		sub	cl, [bp+var_9]
		shl	al, cl
		mov	dx, [bp+var_4]
		and	dx, 0FF00h
		mov	cl, [bp+var_9]
		add	cl, 8
		shr	dx, cl
		or	al, dl
		mov	byte ptr [bp+var_E+1], al
		mov	ax, [bp+var_4]
		and	ax, 0FF00h
		mov	cl, [bp+var_9]
		shr	ax, cl
		mov	byte ptr [bp+var_E+2], al
		push	0
		call	_grcg_setcolor_rmw
		pop	cx
		les	bx, _VRAM_PLANE_B
		add	bx, di
		mov	eax, [bp+var_E]
		mov	es:[bx], eax
		call	_grcg_off_func
		xor	si, si
		jmp	short loc_19E26
; ---------------------------------------------------------------------------

loc_19DB7:
		mov	bx, si
		add	bx, bx
		lea	ax, [bp+var_1A]
		add	bx, ax
		mov	ax, ss:[bx]
		mov	[bp+var_1C], ax
		cmp	[bp+var_1C], 0
		jz	short loc_19E25
		and	ax, 0FFh
		mov	cl, [bp+var_9]
		shr	ax, cl
		and	al, byte ptr [bp+var_E]
		mov	byte ptr [bp+var_12], al
		mov	al, byte ptr [bp+var_1C]
		and	al, 0FFh
		mov	cl, 8
		sub	cl, [bp+var_9]
		shl	al, cl
		mov	dx, [bp+var_1C]
		and	dx, 0FF00h
		mov	cl, [bp+var_9]
		add	cl, 8
		shr	dx, cl
		or	al, dl
		and	al, byte ptr [bp+var_E+1]
		mov	byte ptr [bp+var_12+1],	al
		mov	ax, [bp+var_1C]
		and	ax, 0FF00h
		mov	cl, [bp+var_9]
		shr	ax, cl
		and	al, byte ptr [bp+var_E+2]
		mov	byte ptr [bp+var_12+2],	al
		mov	bx, si
		shl	bx, 2
		lea	ax, [bp+var_30]
		add	bx, ax
		les	bx, ss:[bx]
		add	bx, di
		mov	eax, [bp+var_12]
		or	es:[bx], eax

loc_19E25:
		inc	si

loc_19E26:
		cmp	si, 4
		jb	short loc_19DB7

loc_19E2B:
		add	di, 50h	; 'P'
		cmp	di, 7D00h
		ja	short loc_19E44
		inc	[bp+var_2]

loc_19E37:
		mov	ax, [bp+var_6]
		add	ax, 10h
		cmp	ax, [bp+var_2]
		ja	loc_19C90

loc_19E44:
		pop	di
		pop	si
		leave
		retf
sub_19BC3	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_19E48	proc far

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	6, 0
		push	si
		push	di
		cmp	[bp+arg_0], 0
		jnz	loc_19ED6
		mov	byte_35B42, 0
		mov	byte_35B43, 0
		mov	byte_35B44, 0
		mov	byte_39DB2, 0FFh
		mov	byte_35B45, 1
		mov	byte_35B46, 0
		mov	byte_34A58, 0
		mov	byte_34A59, 0
		mov	byte_34A57, 0
		mov	byte_39DB3, 40h
		cmp	_rank, RANK_EASY
		jnz	short loc_19E93
		mov	al, 0Fh
		jmp	short loc_19EBC
; ---------------------------------------------------------------------------

loc_19E93:
		mov	al, _rank
		cbw
		cmp	ax, RANK_NORMAL
		jnz	short loc_19EA0
		mov	al, 0Ch
		jmp	short loc_19EBC
; ---------------------------------------------------------------------------

loc_19EA0:
		mov	al, _rank
		cbw
		cmp	ax, RANK_HARD
		jnz	short loc_19EAD
		mov	al, 0Ah
		jmp	short loc_19EBC
; ---------------------------------------------------------------------------

loc_19EAD:
		mov	al, _rank
		cbw
		cmp	ax, RANK_LUNATIC
		jnz	short loc_19EBA
		mov	al, 8
		jmp	short loc_19EBC
; ---------------------------------------------------------------------------

loc_19EBA:
		mov	al, 0Ch

loc_19EBC:
		mov	byte_36C15, al
		mov	byte_35B47, 0
		mov	byte_35B48, 0
		mov	byte_34A50, 0
		mov	byte_35B28, 0
		jmp	loc_1AC2A
; ---------------------------------------------------------------------------

loc_19ED6:
		inc	byte_35B42
		and	byte_35B42, 7
		cmp	_bombs, 0
		jnz	short loc_19EEF
		cmp	byte_35B47, 0
		jz	loc_19FB0

loc_19EEF:
		mov	al, byte_35B46
		cbw
		cmp	ax, 2
		jl	loc_19FB0
		mov	al, byte_35B46
		cbw
		cmp	ax, 2
		jnz	short loc_19F2B
		mov	dword_34A62, 0
		mov	byte_35B46, 3
		mov	byte_34A57, 1
		mov	byte_35B47, 1
		dec	_bombs
		mov	al, _bombs
		cbw
		inc	ax
		push	ax
		call	sub_18F98
		pop	cx

loc_19F2B:
		push	1
		nopcall	sub_1AC6E
		pop	cx
		push	word ptr dword_34A62
		call	sub_BECF
		pop	cx
		mov	[bp+var_4], ax
		cmp	[bp+var_4], 0
		jnz	short loc_19F4A
		mov	al, 3
		jmp	short loc_19F4C
; ---------------------------------------------------------------------------

loc_19F4A:
		mov	al, 0

loc_19F4C:
		mov	byte_35B46, al
		cmp	[bp+var_4], 0
		jz	short loc_19F77
		mov	byte_35B47, 0
		mov	byte_34A50, 0
		push	400170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	byte_39DB3, 40h
		jmp	short loc_19F90
; ---------------------------------------------------------------------------

loc_19F77:
		cmp	dword_34A62, 3Ch ; '<'
		jbe	short loc_19F90
		push	430170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6

loc_19F90:
		mov	byte_34A4E, 0
		mov	byte_34A53, 0
		mov	byte_35B44, 0
		cmp	byte_35B46, 0
		jnz	loc_1AC2A
		mov	byte_34A57, 0
		jmp	loc_1AC2A
; ---------------------------------------------------------------------------

loc_19FB0:
		cmp	byte_34A50, 1
		jnz	short loc_19FDB
		mov	al, byte_35B44
		cbw
		cmp	ax, 3
		jz	short loc_19FDB
		cmp	_bombs, 0
		jz	short loc_19FDB
		mov	byte_35B46, 2
		mov	byte_34A50, 0
		push	1
		call	sub_CBF2
		jmp	loc_1AC29
; ---------------------------------------------------------------------------

loc_19FDB:
		cmp	byte_35B44, 0
		jnz	loc_1A26C
		mov	al, byte_34A4B
		mov	ah, 0
		cmp	ax, 1
		jz	short loc_1A04A
		cmp	ax, 2
		jz	loc_1A0BA
		cmp	byte_39DB2, 0
		jnz	short loc_1A042
		cmp	byte_35B45, 0
		jz	short loc_1A00A
		mov	[bp+var_2], 40h
		jmp	short loc_1A00F
; ---------------------------------------------------------------------------

loc_1A00A:
		mov	[bp+var_2], 4Ah	; 'J'

loc_1A00F:
		mov	al, byte_39DB3
		cbw
		cmp	ax, [bp+var_2]
		jz	short loc_1A02B
		mov	al, byte_39DB3
		cbw
		push	ax
		push	368
		push	x_36C26
		call	sub_196A7
		add	sp, 6

loc_1A02B:
		push	[bp+var_2]
		push	368
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	al, byte ptr [bp+var_2]
		mov	byte_39DB3, al

loc_1A042:
		mov	byte_39DB2, 0
		jmp	loc_1A127
; ---------------------------------------------------------------------------

loc_1A04A:
		mov	byte_35B45, 0
		mov	al, byte_39DB3
		cbw
		push	ax
		push	368
		push	x_36C26
		call	sub_196A7
		add	sp, 6
		add	x_36C26, 4
		cmp	x_36C26, 608
		jl	short loc_1A075
		mov	x_36C26, 608

loc_1A075:
		mov	al, byte_35B42
		cbw
		mov	bx, 8
		cwd
		idiv	bx
		cmp	dx, 4
		jge	short loc_1A089
		mov	ax, 4Bh	; 'K'
		jmp	short loc_1A08C
; ---------------------------------------------------------------------------

loc_1A089:
		mov	ax, 4Ch	; 'L'

loc_1A08C:
		push	ax
		push	170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	al, byte_35B42
		cbw
		mov	bx, 8
		cwd
		idiv	bx
		cmp	dx, 4
		jge	short loc_1A0AE
		mov	al, 4Bh	; 'K'
		jmp	short loc_1A0B0
; ---------------------------------------------------------------------------

loc_1A0AE:
		mov	al, 4Ch	; 'L'

loc_1A0B0:
		mov	byte_39DB3, al
		mov	byte_39DB2, 1
		jmp	short loc_1A127
; ---------------------------------------------------------------------------

loc_1A0BA:
		mov	byte_35B45, 1
		mov	al, byte_39DB3
		cbw
		push	ax
		push	170h
		push	x_36C26
		call	sub_196A7
		add	sp, 6
		sub	x_36C26, 4
		cmp	x_36C26, 0
		jg	short loc_1A0E4
		mov	x_36C26, 0

loc_1A0E4:
		mov	al, byte_35B42
		cbw
		mov	bx, 8
		cwd
		idiv	bx
		cmp	dx, 4
		jge	short loc_1A0F8
		mov	ax, 41h	; 'A'
		jmp	short loc_1A0FB
; ---------------------------------------------------------------------------

loc_1A0F8:
		mov	ax, 42h	; 'B'

loc_1A0FB:
		push	ax
		push	170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	al, byte_35B42
		cbw
		mov	bx, 8
		cwd
		idiv	bx
		cmp	dx, 4
		jge	short loc_1A11D
		mov	al, 41h	; 'A'
		jmp	short loc_1A11F
; ---------------------------------------------------------------------------

loc_1A11D:
		mov	al, 42h	; 'B'

loc_1A11F:
		mov	byte_39DB3, al
		mov	byte_39DB2, 2

loc_1A127:
		cmp	byte_34A4E, 1
		jnz	loc_1A1D1
		mov	al, byte_39DB3
		cbw
		push	ax
		push	170h
		push	x_36C26
		call	sub_196A7
		add	sp, 6
		mov	byte_35B44, 1
		mov	byte_35B43, 0
		mov	al, byte_34A4B
		mov	byte_39DB2, al
		cbw
		cmp	ax, 3
		jnz	short loc_1A15E
		mov	byte_39DB2, 0

loc_1A15E:
		cmp	byte_39DB2, 0
		jnz	short loc_1A191
		cmp	byte_35B45, 0
		jz	short loc_1A173
		mov	[bp+var_2], 43h	; 'C'
		jmp	short loc_1A178
; ---------------------------------------------------------------------------

loc_1A173:
		mov	[bp+var_2], 4Dh	; 'M'

loc_1A178:
		push	[bp+var_2]
		push	170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	al, byte ptr [bp+var_2]
		mov	byte_39DB3, al
		jmp	short loc_1A1D1
; ---------------------------------------------------------------------------

loc_1A191:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 1
		jnz	short loc_1A1B2
		push	4E0170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	byte_39DB3, 4Eh	; 'N'
		jmp	short loc_1A1D1
; ---------------------------------------------------------------------------

loc_1A1B2:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 2
		jnz	short loc_1A1D1
		push	440170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	byte_39DB3, 44h	; 'D'

loc_1A1D1:
		cmp	byte_34A53, 1
		jnz	loc_1AC2A
		mov	al, byte_39DB3
		cbw
		push	ax
		push	170h
		push	x_36C26
		call	sub_196A7
		add	sp, 6
		cmp	byte_34A4B, 0
		jz	short loc_1A1FB
		cmp	byte_34A4B, 3
		jnz	short loc_1A211

loc_1A1FB:
		mov	byte_35B43, 0
		mov	byte_35B44, 2
		mov	byte_39DB2, 0
		mov	byte_34A57, 1
		jmp	short loc_1A264
; ---------------------------------------------------------------------------

loc_1A211:
		push	0Bh
		call	_mdrv2_se_play
		pop	cx
		mov	byte_35B43, 0
		mov	byte_35B44, 2
		mov	al, byte_34A4B
		mov	ah, 0
		mov	bx, 3
		cwd
		idiv	bx
		mov	byte_39DB2, dl
		mov	byte_34A59, 1
		mov	byte_35B48, 0
		mov	al, byte_39DB2
		cbw
		cmp	ax, 1
		jnz	short loc_1A24A
		mov	ax, 3
		jmp	short loc_1A24D
; ---------------------------------------------------------------------------

loc_1A24A:
		mov	ax, 1

loc_1A24D:
		push	ax
		push	170h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_373AF
		call	sub_15038
		add	sp, 0Ah

loc_1A264:
		mov	byte_35B28, 1
		jmp	loc_1AC2A
; ---------------------------------------------------------------------------

loc_1A26C:
		mov	al, byte_35B44
		cbw
		cmp	ax, 1
		jnz	loc_1A3C0
		cmp	byte_39DB2, 0
		jnz	short loc_1A2C4
		cmp	byte_35B43, 0
		jnz	short loc_1A29E
		push	170h
		mov	ax, x_36C26
		add	ax, 8
		push	ax
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8
		jmp	loc_1A3B9
; ---------------------------------------------------------------------------

loc_1A29E:
		mov	al, byte_35B43
		cbw
		cmp	ax, 2
		jl	loc_1A3B9
		mov	dword_34A62, 0
		mov	byte_35B44, 0
		mov	byte_34A4E, 0
		mov	byte_39DB2, 3
		jmp	loc_1A3B9
; ---------------------------------------------------------------------------

loc_1A2C4:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 1
		jnz	short loc_1A32F
		mov	byte_35B45, 0
		mov	al, byte_39DB3
		cbw
		push	ax
		push	170h
		push	x_36C26
		call	sub_196A7
		add	sp, 6
		add	x_36C26, 4
		cmp	x_36C26, 608
		jl	short loc_1A2F8
		mov	x_36C26, 608

loc_1A2F8:
		mov	al, byte_35B43
		cbw
		and	ax, 3
		add	ax, 4Eh	; 'N'
		push	ax
		push	170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	al, byte_35B43
		cbw
		mov	bx, 3
		cwd
		idiv	bx
		add	dl, 4Eh	; 'N'
		mov	byte_39DB3, dl
		mov	al, byte_35B43
		cbw
		cmp	ax, 1
		jl	loc_1A3B9
		jmp	short loc_1A390
; ---------------------------------------------------------------------------

loc_1A32F:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 2
		; Hack (jnz loc_1A3B9)
		db 00fh
		db 085h
		db 07fh
		db 000h
		mov	byte_35B45, 1
		mov	al, byte_39DB3
		cbw
		push	ax
		push	170h
		push	x_36C26
		call	sub_196A7
		add	sp, 6
		sub	x_36C26, 4
		cmp	x_36C26, 0
		jge	short loc_1A364
		mov	x_36C26, 0

loc_1A364:
		mov	al, byte_35B43
		cbw
		and	ax, 3
		add	ax, 44h	; 'D'
		push	ax
		push	170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	al, byte_35B43
		and	al, 3
		add	al, 44h	; 'D'
		mov	byte_39DB3, al
		mov	al, byte_35B43
		cbw
		cmp	ax, 1
		jl	short loc_1A3B9

loc_1A390:
		push	170h
		mov	ax, x_36C26
		add	ax, 8
		push	ax
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8
		mov	dword_34A62, 0
		mov	byte_34A4E, 0
		mov	byte_35B44, 0

loc_1A3B9:
		inc	byte_35B43
		jmp	loc_1AC2A
; ---------------------------------------------------------------------------

loc_1A3C0:
		mov	al, byte_35B44
		cbw
		cmp	ax, 2
		jnz	loc_1A745
		cmp	byte_39DB2, 0
		jnz	loc_1A4C9
		mov	al, byte_35B43
		cbw
		cmp	ax, 1
		jge	short loc_1A41D
		mov	al, byte_34A4B
		mov	ah, 0
		mov	bx, 3
		cwd
		idiv	bx
		mov	byte_39DB2, dl
		cmp	byte_39DB2, 0
		jz	loc_1A70B
		mov	al, byte_39DB2
		cbw
		cmp	ax, 3
		jnz	short loc_1A403
		mov	byte_39DB2, 0

loc_1A403:
		mov	byte_35B43, 0
		mov	byte_34A57, 0
		push	0Bh
		call	_mdrv2_se_play
		pop	cx
		mov	byte_34A59, 1
		jmp	loc_1A70B
; ---------------------------------------------------------------------------

loc_1A41D:
		mov	al, byte_35B43
		cbw
		mov	bx, 3
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_1A46F
		mov	al, byte_35B43
		cbw
		inc	ax
		cmp	ax, 17h
		jl	short loc_1A43A
		mov	ax, 15h
		jmp	short loc_1A43F
; ---------------------------------------------------------------------------

loc_1A43A:
		mov	al, byte_35B43
		cbw
		inc	ax

loc_1A43F:
		mov	bx, 3
		cwd
		idiv	bx
		mov	[bp+var_2], ax
		dec	ax
		mov	si, ax
		push	ax
		push	[bp+var_2]
		push	160h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	160h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_37129
		call	sub_1520E
		add	sp, 10h

loc_1A46F:
		mov	al, byte_35B43
		cmp	al, byte_36C15
		jnz	short loc_1A47D
		mov	byte_34A57, 0

loc_1A47D:
		mov	al, byte_35B43
		cbw
		cmp	ax, 17h
		jl	loc_1A70B
		mov	byte_35B44, 0
		mov	al, byte_35B43
		cbw
		cmp	ax, 17h
		jl	short loc_1A49B
		mov	ax, 15h
		jmp	short loc_1A49F
; ---------------------------------------------------------------------------

loc_1A49B:
		mov	al, byte_35B43
		cbw

loc_1A49F:
		mov	bx, 3
		cwd
		idiv	bx
		push	ax
		push	160h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_37129
		call	sub_14E37
		add	sp, 0Ah
		mov	byte_39DB2, 3
		mov	byte_35B43, 0
		jmp	loc_1A6F8
; ---------------------------------------------------------------------------

loc_1A4C9:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 1
		jnz	loc_1A5EE
		mov	si, x_36C26
		add	x_36C26, 6
		cmp	x_36C26, 608
		jl	short loc_1A4EB
		mov	x_36C26, 608

loc_1A4EB:
		mov	al, byte_35B43
		cbw
		mov	bx, 2
		cwd
		idiv	bx
		mov	ax, 1
		sub	ax, dx
		add	ax, 2
		push	ax
		mov	al, byte_35B43
		cbw
		cwd
		idiv	bx
		add	dx, 2
		push	dx
		push	170h
		lea	ax, [si-8]
		push	ax
		push	170h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_373AF
		call	sub_1520E
		add	sp, 10h
		mov	al, byte_35B43
		cbw
		cmp	ax, 5
		jl	short loc_1A542
		cmp	byte_34A53, 0
		jnz	short loc_1A542
		cmp	byte_34A4E, 0
		jnz	short loc_1A542
		mov	byte_35B48, 1

loc_1A542:
		mov	al, byte_35B43
		cbw
		cmp	ax, 0Ch
		jl	loc_1A70B
		mov	byte_35B44, 0
		mov	al, byte_35B43
		cbw
		mov	bx, 2
		cwd
		idiv	bx
		add	dx, 2
		push	dx
		push	170h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_373AF
		call	sub_14E37
		add	sp, 0Ah
		mov	byte_39DB2, 3
		mov	byte_35B43, 0
		mov	byte_34A59, 0
		mov	al, byte_35B48
		cbw
		cmp	ax, 1
		jnz	short loc_1A5C0
		cmp	byte_34A53, 1
		jnz	short loc_1A5C0
		cmp	byte_34A4B, 2
		jnz	short loc_1A5A0
		mov	al, 2
		jmp	short loc_1A5AD
; ---------------------------------------------------------------------------

loc_1A5A0:
		cmp	byte_34A4B, 1
		jnz	short loc_1A5AB
		mov	al, 4
		jmp	short loc_1A5AD
; ---------------------------------------------------------------------------

loc_1A5AB:
		mov	al, 0

loc_1A5AD:
		mov	byte_39DB2, al
		mov	byte_35B44, 3
		cbw
		cmp	ax, 4
		jge	loc_1ABD6
		jmp	loc_1ABD1
; ---------------------------------------------------------------------------

loc_1A5C0:
		mov	al, byte_35B48
		cbw
		cmp	ax, 1
		jnz	short loc_1A5D8
		cmp	byte_34A4E, 1
		jnz	short loc_1A5D8
		mov	byte_39DB2, 6
		jmp	loc_1A6F0
; ---------------------------------------------------------------------------

loc_1A5D8:
		mov	byte_34A53, 0
		mov	dword_34A62, 0
		mov	byte_35B48, 0
		jmp	loc_1A706
; ---------------------------------------------------------------------------

loc_1A5EE:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 2
		jnz	loc_1A70B
		mov	si, x_36C26
		sub	x_36C26, 6
		cmp	x_36C26, 0
		jge	short loc_1A60F
		mov	x_36C26, 0

loc_1A60F:
		mov	al, byte_35B43
		cbw
		mov	bx, 2
		cwd
		idiv	bx
		mov	ax, 1
		sub	ax, dx
		push	ax
		mov	al, byte_35B43
		cbw
		cwd
		idiv	bx
		push	dx
		push	170h
		lea	ax, [si-8]
		push	ax
		push	170h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_373AF
		call	sub_1520E
		add	sp, 10h
		mov	al, byte_35B43
		cbw
		cmp	ax, 5
		jl	short loc_1A660
		cmp	byte_34A53, 0
		jnz	short loc_1A660
		cmp	byte_34A4E, 0
		jnz	short loc_1A660
		mov	byte_35B48, 1

loc_1A660:
		mov	al, byte_35B43
		cbw
		cmp	ax, 0Ch
		jl	loc_1A70B
		mov	byte_35B44, 0
		mov	al, byte_35B43
		cbw
		mov	bx, 2
		cwd
		idiv	bx
		push	dx
		push	170h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_373AF
		call	sub_14E37
		add	sp, 0Ah
		mov	byte_39DB2, 3
		mov	byte_35B43, 0
		mov	byte_34A59, 0
		mov	al, byte_35B48
		cbw
		cmp	ax, 1
		jnz	short loc_1A6DB
		cmp	byte_34A53, 1
		jnz	short loc_1A6DB
		cmp	byte_34A4B, 1
		jnz	short loc_1A6BB
		mov	al, 3
		jmp	short loc_1A6C8
; ---------------------------------------------------------------------------

loc_1A6BB:
		cmp	byte_34A4B, 2
		jnz	short loc_1A6C6
		mov	al, 5
		jmp	short loc_1A6C8
; ---------------------------------------------------------------------------

loc_1A6C6:
		mov	al, 1

loc_1A6C8:
		mov	byte_39DB2, al
		mov	byte_35B44, 3
		cbw
		cmp	ax, 4
		jge	loc_1ABD6
		jmp	loc_1ABD1
; ---------------------------------------------------------------------------

loc_1A6DB:
		mov	al, byte_35B48
		cbw
		cmp	ax, 1
		jnz	short loc_1A6F8
		cmp	byte_34A4E, 1
		jnz	short loc_1A6F8
		mov	byte_39DB2, 7

loc_1A6F0:
		mov	byte_35B44, 3
		jmp	loc_1ABD1
; ---------------------------------------------------------------------------

loc_1A6F8:
		mov	byte_34A53, 0
		mov	dword_34A62, 0

loc_1A706:
		mov	byte_35B28, 0

loc_1A70B:
		inc	byte_35B43
		cmp	byte_39DB2, 0
		jnz	short loc_1A724
		mov	al, byte_35B43
		cbw
		cmp	ax, 15h
		jge	loc_1AC2A
		jmp	loc_1AC1F
; ---------------------------------------------------------------------------

loc_1A724:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 1
		jnz	short loc_1A735
		push	66h ; 'f'
		nopcall	sub_1AC6E
		pop	cx

loc_1A735:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 2
		jnz	loc_1AC2A
		push	65h ; 'e'
		jmp	loc_1AC24
; ---------------------------------------------------------------------------

loc_1A745:
		mov	al, byte_35B44
		cbw
		cmp	ax, 3
		jz	short loc_1A762
		mov	al, byte_35B44
		cbw
		cmp	ax, 4
		jz	short loc_1A762
		mov	al, byte_35B44
		cbw
		cmp	ax, 5
		jnz	loc_1AC2A

loc_1A762:
		mov	al, byte_39DB2
		cbw
		mov	bx, ax
		cmp	bx, 7
		ja	loc_1A972
		add	bx, bx
		jmp	cs:off_1AC5E[bx]

loc_1A776:
		mov	al, byte_35B43
		cbw
		dec	ax
		cmp	ax, 4
		jge	short loc_1A785
		mov	ax, 0Eh
		jmp	short loc_1A795
; ---------------------------------------------------------------------------

loc_1A785:
		mov	al, byte_35B43
		cbw
		add	ax, 0FFF8h
		mov	bx, 4
		cwd
		idiv	bx
		add	ax, 0Eh

loc_1A795:
		mov	si, ax
		mov	al, byte_35B43
		cbw
		cmp	ax, 4
		jge	short loc_1A7A5
		mov	ax, 0Eh
		jmp	short loc_1A7B5
; ---------------------------------------------------------------------------

loc_1A7A5:
		mov	al, byte_35B43
		cbw
		add	ax, 0FFF9h
		mov	bx, 4
		cwd
		idiv	bx
		add	ax, 0Eh

loc_1A7B5:
		mov	[bp+var_2], ax
		cmp	si, [bp+var_2]
		jz	short loc_1A80A
		jmp	short loc_1A806
; ---------------------------------------------------------------------------

loc_1A7BF:
		mov	al, byte_35B43
		cbw
		dec	ax
		cmp	ax, 4
		jge	short loc_1A7CE
		mov	ax, 8
		jmp	short loc_1A7DE
; ---------------------------------------------------------------------------

loc_1A7CE:
		mov	al, byte_35B43
		cbw
		add	ax, 0FFF8h
		mov	bx, 4
		cwd
		idiv	bx
		add	ax, 8

loc_1A7DE:
		mov	si, ax
		mov	al, byte_35B43
		cbw
		cmp	ax, 4
		jge	short loc_1A7EE
		mov	ax, 8
		jmp	short loc_1A7FE
; ---------------------------------------------------------------------------

loc_1A7EE:
		mov	al, byte_35B43
		cbw
		add	ax, 0FFF9h
		mov	bx, 4
		cwd
		idiv	bx
		add	ax, 8

loc_1A7FE:
		mov	[bp+var_2], ax
		cmp	si, [bp+var_2]
		jz	short loc_1A80A

loc_1A806:
		push	si
		jmp	loc_1A94F
; ---------------------------------------------------------------------------

loc_1A80A:
		push	[bp+var_2]
		push	160h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_37129
		call	sub_15038
		add	sp, 0Ah
		jmp	loc_1A972
; ---------------------------------------------------------------------------

loc_1A826:
		mov	al, byte_35B43
		cbw
		dec	ax
		cmp	ax, 4
		jge	short loc_1A835
		mov	ax, 0Eh
		jmp	short loc_1A845
; ---------------------------------------------------------------------------

loc_1A835:
		mov	al, byte_35B43
		cbw
		add	ax, 0FFF8h
		mov	bx, 4
		cwd
		idiv	bx
		add	ax, 0Eh

loc_1A845:
		mov	di, ax
		mov	al, byte_35B43
		cbw
		cmp	ax, 4
		jge	short loc_1A855
		mov	ax, 0Eh
		jmp	short loc_1A865
; ---------------------------------------------------------------------------

loc_1A855:
		mov	al, byte_35B43
		cbw
		add	ax, 0FFF9h
		mov	bx, 4
		cwd
		idiv	bx
		add	ax, 0Eh

loc_1A865:
		mov	[bp+var_2], ax
		mov	ax, x_36C26
		add	ax, -8
		mov	si, ax
		push	2
		jmp	short loc_1A8C0
; ---------------------------------------------------------------------------

loc_1A874:
		mov	al, byte_35B43
		cbw
		dec	ax
		cmp	ax, 4
		jge	short loc_1A883
		mov	ax, 8
		jmp	short loc_1A893
; ---------------------------------------------------------------------------

loc_1A883:
		mov	al, byte_35B43
		cbw
		add	ax, 0FFF8h
		mov	bx, 4
		cwd
		idiv	bx
		add	ax, 8

loc_1A893:
		mov	di, ax
		mov	al, byte_35B43
		cbw
		cmp	ax, 4
		jge	short loc_1A8A3
		mov	ax, 8
		jmp	short loc_1A8B3
; ---------------------------------------------------------------------------

loc_1A8A3:
		mov	al, byte_35B43
		cbw
		add	ax, 0FFF9h
		mov	bx, 4
		cwd
		idiv	bx
		add	ax, 8

loc_1A8B3:
		mov	[bp+var_2], ax
		mov	ax, x_36C26
		add	ax, -8
		mov	si, ax
		push	0FFFEh

loc_1A8C0:
		call	sub_1967E
		pop	cx
		push	di
		push	[bp+var_2]
		push	160h
		push	si
		jmp	loc_1A95C
; ---------------------------------------------------------------------------

loc_1A8D0:
		mov	[bp+var_2], 5
		mov	si, x_36C26
		push	6
		call	sub_1967E
		pop	cx
		push	50005h
		jmp	short loc_1A8FE
; ---------------------------------------------------------------------------

loc_1A8E8:
		mov	[bp+var_2], 4
		mov	si, x_36C26
		push	-6
		call	sub_1967E
		pop	cx
		push	40004h

loc_1A8FE:
		push	170h
		lea	ax, [si-8]
		push	ax
		push	170h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_373AF
		jmp	short loc_1A96A
; ---------------------------------------------------------------------------

loc_1A915:
		mov	al, byte_35B43
		cbw
		dec	ax
		mov	bx, 6
		cwd
		idiv	bx
		add	ax, 18h
		mov	di, ax
		mov	al, byte_35B43
		cbw
		cwd
		idiv	bx
		add	ax, 18h
		jmp	short loc_1A94B
; ---------------------------------------------------------------------------

loc_1A931:
		mov	al, byte_35B43
		cbw
		dec	ax
		mov	bx, 6
		cwd
		idiv	bx
		add	ax, 14h
		mov	di, ax
		mov	al, byte_35B43
		cbw
		cwd
		idiv	bx
		add	ax, 14h

loc_1A94B:
		mov	[bp+var_2], ax
		push	di

loc_1A94F:
		push	[bp+var_2]
		push	160h
		mov	ax, x_36C26
		add	ax, -8
		push	ax

loc_1A95C:
		push	160h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_37129

loc_1A96A:
		call	sub_1520E
		add	sp, 10h

loc_1A972:
		mov	al, byte_39DB2
		cbw
		mov	bx, ax
		cmp	bx, 7
		ja	loc_1AAA9
		add	bx, bx
		jmp	cs:off_1AC4E[bx]

loc_1A986:
		mov	al, byte_35B43
		cbw
		cmp	ax, 14h
		jnz	short loc_1A994
		mov	byte_34A57, 0

loc_1A994:
		mov	al, byte_35B43
		cbw
		cmp	ax, 14h
		jl	short loc_1A9B0
		cmp	byte_34A53, 0
		jnz	short loc_1A9B0
		cmp	byte_34A4E, 0
		jnz	short loc_1A9B0
		mov	byte_35B48, 1

loc_1A9B0:
		mov	[bp+var_6], 1Ch
		jmp	loc_1AAA9
; ---------------------------------------------------------------------------

loc_1A9B8:
		mov	[bp+var_6], 0Dh
		jmp	loc_1AAA9
; ---------------------------------------------------------------------------

loc_1A9C0:
		mov	al, byte_35B43
		cbw
		cmp	ax, 1
		jnz	short loc_1A9DC
		push	170h
		push	x_36C26
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8

loc_1A9DC:
		mov	al, byte_35B43
		cbw
		cmp	ax, 4
		jnz	short loc_1A9FB
		push	170h
		mov	ax, x_36C26
		add	ax, 16
		push	ax
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8

loc_1A9FB:
		mov	al, byte_35B43
		cbw
		cmp	ax, 7
		jnz	short loc_1AA1A
		push	170h
		mov	ax, x_36C26
		add	ax, 8
		push	ax
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8

loc_1AA1A:
		mov	al, byte_35B43
		cbw
		cmp	ax, 0Ah
		jnz	short loc_1AA39
		push	170h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8

loc_1AA39:
		mov	al, byte_35B43
		cbw
		cmp	ax, 0Dh
		jnz	short loc_1AA58
		push	170h
		mov	ax, x_36C26
		add	ax, 8
		push	ax
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8

loc_1AA58:
		mov	al, byte_35B43
		cbw
		cmp	ax, 10h
		jnz	short loc_1AA77
		push	170h
		mov	ax, x_36C26
		add	ax, 24
		push	ax
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8

loc_1AA77:
		mov	al, byte_35B43
		cbw
		cmp	ax, 13h
		jnz	short loc_1AA96
		push	170h
		mov	ax, x_36C26
		add	ax, 8
		push	ax
		push	ds
		push	offset unk_386B8
		call	sub_2FC44
		add	sp, 8

loc_1AA96:
		mov	al, byte_35B43
		cbw
		cmp	ax, 4
		jnz	short loc_1AAA4
		mov	byte_34A57, 0

loc_1AAA4:
		mov	[bp+var_6], 13h

loc_1AAA9:
		inc	byte_35B43
		mov	al, byte_35B43
		cbw
		cmp	ax, [bp+var_6]
		jle	loc_1ABF1
		mov	al, byte_39DB2
		cbw
		mov	bx, ax
		cmp	bx, 7
		ja	short loc_1AAF6
		add	bx, bx
		jmp	cs:off_1AC3E[bx]

loc_1AACA:
		push	[bp+var_2]
		push	160h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_37129
		jmp	short loc_1AAEE
; ---------------------------------------------------------------------------

loc_1AADD:
		push	[bp+var_2]
		push	170h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		push	ds
		push	offset unk_373AF

loc_1AAEE:
		call	sub_14E37
		add	sp, 0Ah

loc_1AAF6:
		mov	dword_34A62, 0
		mov	byte_35B43, 0
		mov	byte_34A59, 0
		mov	byte_34A57, 0
		mov	al, byte_35B44
		cbw
		cmp	ax, 5
		jge	loc_1ABE5
		mov	al, byte_35B48
		cbw
		cmp	ax, 1
		jnz	short loc_1AB8F
		cmp	byte_34A53, 1
		jnz	short loc_1AB8F
		mov	al, byte_39DB2
		cbw
		cmp	ax, 3
		jz	short loc_1AB3B
		mov	al, byte_39DB2
		cbw
		cmp	ax, 1
		jnz	short loc_1AB55

loc_1AB3B:
		cmp	byte_34A4B, 1
		jnz	short loc_1AB46
		mov	al, 3
		jmp	short loc_1AB7D
; ---------------------------------------------------------------------------

loc_1AB46:
		cmp	byte_34A4B, 2
		jnz	short loc_1AB51
		mov	al, 5
		jmp	short loc_1AB7D
; ---------------------------------------------------------------------------

loc_1AB51:
		mov	al, 1
		jmp	short loc_1AB7D
; ---------------------------------------------------------------------------

loc_1AB55:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 2
		jz	short loc_1AB65
		cmp	byte_39DB2, 0
		jnz	short loc_1AB80

loc_1AB65:
		cmp	byte_34A4B, 2
		jnz	short loc_1AB70
		mov	al, 2
		jmp	short loc_1AB7D
; ---------------------------------------------------------------------------

loc_1AB70:
		cmp	byte_34A4B, 1
		jnz	short loc_1AB7B
		mov	al, 4
		jmp	short loc_1AB7D
; ---------------------------------------------------------------------------

loc_1AB7B:
		mov	al, 0

loc_1AB7D:
		mov	byte_39DB2, al

loc_1AB80:
		inc	byte_35B44
		mov	al, byte_39DB2
		cbw
		cmp	ax, 4
		jge	short loc_1ABD6
		jmp	short loc_1ABD1
; ---------------------------------------------------------------------------

loc_1AB8F:
		mov	al, byte_35B48
		cbw
		cmp	ax, 1
		jnz	short loc_1ABE5
		cmp	byte_34A4E, 1
		jnz	short loc_1ABE5
		mov	al, byte_39DB2
		cbw
		cmp	ax, 3
		jz	short loc_1ABB1
		mov	al, byte_39DB2
		cbw
		cmp	ax, 1
		jnz	short loc_1ABB8

loc_1ABB1:
		mov	byte_39DB2, 7
		jmp	short loc_1ABCD
; ---------------------------------------------------------------------------

loc_1ABB8:
		mov	al, byte_39DB2
		cbw
		cmp	ax, 2
		jz	short loc_1ABC8
		cmp	byte_39DB2, 0
		jnz	short loc_1ABCD

loc_1ABC8:
		mov	byte_39DB2, 6

loc_1ABCD:
		inc	byte_35B44

loc_1ABD1:
		mov	byte_34A57, 1

loc_1ABD6:
		push	0Bh
		call	_mdrv2_se_play
		pop	cx
		mov	byte_35B48, 0
		jmp	short loc_1AC2A
; ---------------------------------------------------------------------------

loc_1ABE5:
		mov	byte_35B28, 0
		mov	byte_35B44, 0
		jmp	short loc_1AC2A
; ---------------------------------------------------------------------------

loc_1ABF1:
		mov	al, byte_39DB2
		cbw
		mov	bx, ax
		cmp	bx, 7
		ja	short loc_1AC2A
		add	bx, bx
		jmp	cs:off_1AC2E[bx]

loc_1AC03:
		mov	al, byte_35B43
		cbw
		cwd
		sub	ax, dx
		sar	ax, 1
		jmp	short loc_1AC23
; ---------------------------------------------------------------------------

loc_1AC0E:
		push	67h ; 'g'
		jmp	short loc_1AC24
; ---------------------------------------------------------------------------

loc_1AC12:
		push	68h ; 'h'
		jmp	short loc_1AC24
; ---------------------------------------------------------------------------

loc_1AC16:
		mov	al, byte_35B43
		cbw
		cmp	ax, 10h
		jge	short loc_1AC2A

loc_1AC1F:
		mov	al, byte_35B43
		cbw

loc_1AC23:
		push	ax

loc_1AC24:
		nopcall	sub_1AC6E

loc_1AC29:
		pop	cx

loc_1AC2A:
		pop	di
		pop	si
		leave
		retf
sub_19E48	endp

; ---------------------------------------------------------------------------
off_1AC2E	dw offset loc_1AC03
		dw offset loc_1AC03
		dw offset loc_1AC03
		dw offset loc_1AC03
		dw offset loc_1AC0E
		dw offset loc_1AC12
		dw offset loc_1AC16
		dw offset loc_1AC16
off_1AC3E	dw offset loc_1AACA
		dw offset loc_1AACA
		dw offset loc_1AACA
		dw offset loc_1AACA
		dw offset loc_1AADD
		dw offset loc_1AADD
		dw offset loc_1AACA
		dw offset loc_1AACA
off_1AC4E	dw offset loc_1A986
		dw offset loc_1A986
		dw offset loc_1A986
		dw offset loc_1A986
		dw offset loc_1A9B8
		dw offset loc_1A9B8
		dw offset loc_1A9C0
		dw offset loc_1A9C0
off_1AC5E	dw offset loc_1A826
		dw offset loc_1A874
		dw offset loc_1A776
		dw offset loc_1A7BF
		dw offset loc_1A8D0
		dw offset loc_1A8E8
		dw offset loc_1A915
		dw offset loc_1A931

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1AC6E	proc far

var_E		= qword	ptr -0Eh
var_2		= word ptr -2
arg_0		= word ptr  6

		enter	2, 0
		push	si
		mov	si, [bp+arg_0]
		or	si, si
		jnz	short loc_1ACD7
		cmp	word_34A78, 0
		jnz	loc_1AE0A
		cmp	byte_35B28, 0
		jnz	loc_1AE0A
		mov	ax, word_36C28
		sub	ax, x_36C26
		jge	short loc_1ACA1
		mov	ax, word_36C28
		sub	ax, x_36C26
		imul	ax, -1
		jmp	short loc_1ACA8
; ---------------------------------------------------------------------------

loc_1ACA1:
		mov	ax, word_36C28
		sub	ax, x_36C26

loc_1ACA8:
		cmp	ax, 18h
		jge	loc_1AE0A
		mov	ax, word_36C2A
		add	ax, 0FE90h
		jge	short loc_1ACC2
		mov	ax, word_36C2A
		add	ax, 0FE90h
		imul	ax, -1
		jmp	short loc_1ACC8
; ---------------------------------------------------------------------------

loc_1ACC2:
		mov	ax, word_36C2A
		add	ax, 0FE90h

loc_1ACC8:
		cmp	ax, 10h
		jge	loc_1AE0A
		mov	_player_is_hit, 1
		jmp	loc_1AE0A
; ---------------------------------------------------------------------------

loc_1ACD7:
		cmp	si, 64h	; 'd'
		jge	loc_1AD81
		mov	ax, word_36C28
		sub	ax, x_36C26
		jge	short loc_1ACF3
		mov	ax, word_36C28
		sub	ax, x_36C26
		imul	ax, -1
		jmp	short loc_1ACFA
; ---------------------------------------------------------------------------

loc_1ACF3:
		mov	ax, word_36C28
		sub	ax, x_36C26

loc_1ACFA:
		cmp	ax, 40
		jge	loc_1AE0A
		mov	ax, word_36C2A
		add	ax, 0FE90h
		jge	short loc_1AD14
		mov	ax, word_36C2A
		add	ax, 0FE90h
		imul	ax, -1
		jmp	short loc_1AD1A
; ---------------------------------------------------------------------------

loc_1AD14:
		mov	ax, word_36C2A
		add	ax, 0FE90h

loc_1AD1A:
		cmp	ax, 20h	; ' '
		jge	loc_1AE0A
		mov	ax, x_36C26
		sub	ax, word_36C28
		jg	short loc_1AD5E
		mov	ax, x_36C26
		sub	ax, word_36C28
		jnz	short loc_1AD66
		mov	word_34A7C, 0
		call	IRand
		mov	bx, 8
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_1AD4E
		mov	word_34A7C, 1

loc_1AD4E:
		call	IRand
		mov	bx, 8
		cwd
		idiv	bx
		cmp	dx, 4
		jnz	short loc_1AD6C

loc_1AD5E:
		mov	word_34A7C, 1
		jmp	short loc_1AD6C
; ---------------------------------------------------------------------------

loc_1AD66:
		mov	word_34A7C, 2

loc_1AD6C:
		push	3
		mov	ax, si
		cwd
		sub	ax, dx
		sar	ax, 1
		add	ax, 0FFF3h
		mov	[bp+var_2], ax
		fild	[bp+var_2]
		jmp	short loc_1ADF9
; ---------------------------------------------------------------------------

loc_1AD81:
		mov	ax, word_36C28
		sub	ax, x_36C26
		jge	short loc_1AD96
		mov	ax, word_36C28
		sub	ax, x_36C26
		imul	ax, -1
		jmp	short loc_1AD9D
; ---------------------------------------------------------------------------

loc_1AD96:
		mov	ax, word_36C28
		sub	ax, x_36C26

loc_1AD9D:
		cmp	ax, 40
		jge	short loc_1AE0A
		mov	ax, word_36C2A
		add	ax, 0FE90h
		jge	short loc_1ADB5
		mov	ax, word_36C2A
		add	ax, 0FE90h
		imul	ax, -1
		jmp	short loc_1ADBB
; ---------------------------------------------------------------------------

loc_1ADB5:
		mov	ax, word_36C2A
		add	ax, 0FE90h

loc_1ADBB:
		cmp	ax, 20h	; ' '
		jge	short loc_1AE0A
		cmp	si, 65h	; 'e'
		jnz	short loc_1ADCD
		mov	word_34A7C, 1
		jmp	short loc_1ADF2
; ---------------------------------------------------------------------------

loc_1ADCD:
		cmp	si, 66h	; 'f'
		jnz	short loc_1ADDA
		mov	word_34A7C, 2
		jmp	short loc_1ADF2
; ---------------------------------------------------------------------------

loc_1ADDA:
		cmp	si, 67h	; 'g'
		jnz	short loc_1ADE7
		mov	word_34A7C, 4
		jmp	short loc_1ADF2
; ---------------------------------------------------------------------------

loc_1ADE7:
		cmp	si, 68h	; 'h'
		jnz	short loc_1ADF2
		mov	word_34A7C, 3

loc_1ADF2:
		push	3		; int
		fld	dbl_35B49

loc_1ADF9:
		sub	sp, 8
		fstp	[bp+var_E]
		fwait
		call	sub_C62D
		add	sp, 0Ah

loc_1AE0A:
		pop	si
		leave
		retf
sub_1AC6E	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_1AE0D	proc far

var_6		= word ptr -6
var_4		= word ptr -4
var_2		= word ptr -2

		enter	6, 0
		push	si
		push	di
		push	200020h
		push	170h
		push	x_36C26
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		push	3
		push	word_36C2A
		push	word_36C28
		call	sub_197E1
		add	sp, 6
		call	IRand
		mov	bx, 8
		cwd
		idiv	bx
		or	dx, dx
		jnz	short loc_1AE4D
		mov	ax, 1
		jmp	short loc_1AE4F
; ---------------------------------------------------------------------------

loc_1AE4D:
		xor	ax, ax

loc_1AE4F:
		add	ax, 56h	; 'V'
		push	ax
		push	170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		xor	si, si
		jmp	short loc_1AE85
; ---------------------------------------------------------------------------

loc_1AE65:
		mov	ax, si
		mov	bx, 2
		cwd
		idiv	bx
		shl	dx, 3
		mov	ax, 190h
		sub	ax, dx
		push	ax
		call	sub_11738
		pop	cx
		push	2
		call	_frame_delay
		pop	cx
		inc	si

loc_1AE85:
		cmp	si, 10h
		jl	short loc_1AE65
		push	0
		call	sub_11738
		pop	cx
		push	300030h
		push	160h
		mov	ax, x_36C26
		add	ax, -8
		push	ax
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		push	ds
		push	offset unk_386B8
		call	sub_2FCAD
		add	sp, 4
		push	ds
		push	offset unk_37635
		call	sub_30E54
		add	sp, 4
		push	0
		call	sub_19E48
		pop	cx
		mov	ax, x_36C26
		add	ax, 160
		mov	[bp+var_2], ax
		cmp	[bp+var_2], 608
		jl	short loc_1AEDE
		mov	[bp+var_2], 608

loc_1AEDE:
		mov	ax, x_36C26
		add	ax, -160
		mov	[bp+var_4], ax
		cmp	[bp+var_4], 0
		jge	short loc_1AEF2
		mov	[bp+var_4], 0

loc_1AEF2:
		mov	di, x_36C26
		xor	si, si
		jmp	loc_1AFC8
; ---------------------------------------------------------------------------

loc_1AEFB:
		push	200020h
		push	170h
		push	x_36C26
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		push	200020h
		push	170h
		push	di
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		cmp	si, 0Ah
		jge	short loc_1AF2C
		mov	ax, 10h
		jmp	short loc_1AF38
; ---------------------------------------------------------------------------

loc_1AF2C:
		mov	ax, 130h
		sub	ax, [bp+var_2]
		mov	bx, 14h
		cwd
		idiv	bx

loc_1AF38:
		add	x_36C26, ax
		cmp	si, 0Ah
		jge	short loc_1AF46
		mov	ax, 0FFF0h
		jmp	short loc_1AF52
; ---------------------------------------------------------------------------

loc_1AF46:
		mov	ax, 130h
		sub	ax, [bp+var_4]
		mov	bx, 14h
		cwd
		idiv	bx

loc_1AF52:
		add	di, ax
		cmp	x_36C26, 608
		jl	short loc_1AF62
		mov	x_36C26, 608

loc_1AF62:
		or	di, di
		jge	short loc_1AF68
		xor	di, di

loc_1AF68:
		push	3
		push	word_36C2A
		push	word_36C28
		call	sub_197E1
		add	sp, 6
		mov	ax, si
		mov	bx, 2
		cwd
		idiv	bx
		add	dx, 54h	; 'T'
		push	dx
		push	170h
		push	x_36C26
		call	sub_197E1
		add	sp, 6
		mov	ax, si
		mov	bx, 2
		cwd
		idiv	bx
		add	dx, 54h	; 'T'
		push	dx
		push	170h
		push	di
		call	sub_197E1
		add	sp, 6
		cmp	si, 6
		jge	short loc_1AFB4
		mov	ax, 1
		jmp	short loc_1AFC0
; ---------------------------------------------------------------------------

loc_1AFB4:
		mov	ax, 1Eh
		sub	ax, si
		mov	bx, 0Ah
		cwd
		idiv	bx
		inc	ax

loc_1AFC0:
		push	ax
		call	_frame_delay
		pop	cx
		inc	si

loc_1AFC8:
		cmp	si, 1Eh
		jl	loc_1AEFB
		push	200020h
		push	170h
		push	x_36C26
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		push	200020h
		push	170h
		push	di
		call	_egc_copy_rect_1_to_0
		add	sp, 8
		mov	ax, _rem_lives
		inc	ax
		push	ax
		call	sub_18E15
		pop	cx
		mov	al, _bombs
		cbw
		mov	[bp+var_6], ax
		mov	al, byte_36C14
		add	al, _bombs
		mov	_bombs, al
		cbw
		cmp	ax, 5
		jle	short loc_1B01F
		mov	_bombs, 5
		jmp	short loc_1B028
; ---------------------------------------------------------------------------

loc_1B01F:
		push	[bp+var_6]
		call	sub_18F98
		pop	cx

loc_1B028:
		call	sub_193BA

loc_1B02D:
		push	0FFFE0000h

loc_1B033:
		call	sub_CBBE
		add	sp, 4
		pop	di
		pop	si
		leave
		retf
sub_1AE0D	endp

main_27_TEXT	ends

include th01_reiiden_2.inc

	.data

_rank	db RANK_NORMAL
byte_34A31	db 1
_bombs	db 1
unk_34A33	db    2
byte_34A34	db 0
byte_34A35	db 0
		db    0
aRANKS	dd aEasy		; "EASY"
		dd aNormal		; "NORMAL"
		dd aHard		; "HARD"
		dd aLunatic		; "LUNATIC"
byte_34A47	db 0
		db    0
byte_34A49	db 1
		db    0
byte_34A4B	db 0
byte_34A4C	db 0
byte_34A4D	db 0
byte_34A4E	db 0
include th01/player_is_hit[bss].asm
byte_34A50	db 0
byte_34A51	db 0
byte_34A52	db 0
byte_34A53	db 0
byte_34A54	db 0
byte_34A55	db 0
		db    0
byte_34A57	db 0
byte_34A58	db 0
byte_34A59	db 0
_score	dd 0
dword_34A5E	dd 0
dword_34A62	dd 0
_continues_total	dd 0
		dw 0
_mode_test	dw 0
word_34A6E	dw 0
word_34A70	dw 0
word_34A72	dw 0
word_34A74	dw 0
		dw 0
word_34A78	dw 0
		dw 0
word_34A7C	dw 0
word_34A7E	dw 0
_rem_lives	dw 4
word_34A82	dw 0
word_34A84	dw 0
word_34A86	dw 0
word_34A88	dw 0
word_34A8A	dw 1
word_34A8C	dw 1
word_34A8E	dw 258h
word_34A90	dw 118h
word_34A92	dw 0
dbl_34A94	dq 0.0
dbl_34A9C	dq 0.0
byte_34AA4	db 0
unk_34AA5	db  0Fh
		db  0Fh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Fh
		db  0Fh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
		db  0Dh
		db  0Fh
		db  0Dh
word_34AD0	dw 0F0Dh
word_34AD2	dw 606h
word_34AD4	dw 0Fh
word_34AD6	dw 0
byte_34AD8	db 0
word_34AD9	dw 0
byte_34ADB	db 0
word_34ADC	dw 0
unk_34ADE	db    0
byte_34ADF	db 0
aEasy		db 'EASY',0
aNormal		db 'NORMAL',0
aHard		db 'HARD',0
aLunatic	db 'LUNATIC',0
; char format[3]
format		db 1Bh,'*',0
aMask_grf	db 'mask.grf',0
aMiko_ac_bos	db 'miko_ac.bos',0
aMiko_ac2_bos	db 'miko_ac2.bos',0
aStg_ptn	db 'stg.ptn',0
aMiko_ptn	db 'miko.ptn',0
; char a1640m[]
a1640m		db 1Bh,'[16;40m',0
; char a00h[]
a00h		db 1Bh,'[0;0H',0
; char asc_34B3F[]
asc_34B3F	db ' ',0
; char a0m[]
a0m		db 1Bh,'[0m',0
; char s2[]
s2		db 'empty.grf',0
aKuzi1_grc	db 'kuzi1.grc',0
aKuzi2_grc	db 'kuzi2.grc',0
flt_34B64	dd 16.0
dbl_34B68	dq -16.0
dbl_34B70	dq 0.78
flt_34B78	dd 2.0
dbl_34B7C	dq -10.0
aVovVtvrvd	db 'ＰＡＵＳＥ',0
aB@nKjb@b@pic	db '　再開　　終了',0
aBB@b@b@b@b@b@	db '●　　　　　　',0
aB		db '●',0
aCUcvPicVVVsvdv	db '本当に終了しちゃうの？',0
aB@vdvVVVgb@b@v	db '　うそですぅ　　はいっ',0
aVgvpvovfvivovx	db 'ｃｏｎｔｉｎｕｅ？　　　  ',0
aVxvevub@b@B@	db 'Ｙｅｓ　　  　',0
aVmvpb@b@B@	db 'Ｎｏ　　  　 ',0
aVxvevub@b@c@	db 'Ｙｅｓ　　　  ',0
aVmvpb@b@c@	db 'Ｎｏ　　　   ',0
; char path[]
path		db 'REIIDEN',0
; char aVvvtbV[]
aVvvtbV		db 'いやーん、ヒープがたんないわ',0
; char aS[3]
aS		db '%s',0
; char aFp[]
aFp		db ' : [%Fp] -> ',0
aGqbGvvkvVViv	db 'ヒープがみつかんないよぅ',0
aGqbGvvkfji	db 'ヒープが破壊されてるわぁ',0
aGmbGhvkvVViv	db 'ノードがみつかんないの',0
aVVVL		db 'ここは空きブロックですわ',0
; char s[]
s		db '現在使用中のブロックよ',0
; char aB[]
aB@b@b@vVVriCVi	db '　　　これも運命か...',0Ah,0
; char aOldCoreleft7lu[]
aOldCoreleft7lu	db 'old coreleft %7lu bytes free',0Ah,0
; char aCoreleft7luByt[]
aCoreleft7luByt	db '    coreleft %7lu bytes free',0Ah,0
; char aKabe_nD[]
aKabe_nD	db '    kabe_n = %d',0Ah,0
; char aPnl_nD[]
aPnl_nD		db '    pnl_n  = %d',0Ah,0
; char aPnl_nBuf7lu[]
aPnl_nBuf7lu	db ' pnl_n buf = %7lu',0Ah,0
; char aB[]
aB@b@ptnD7lu	db '　　ptn %d  = %7lu',0Ah,0
; char aAllPtn7lu[]
aAllPtn7lu	db 'all   ptn   = %7lu',0Ah,0
; char aKabeMem7lu[]
aKabeMem7lu	db 'kabe  mem   = %7lu',0Ah,0
; char aMaskMem7u[]
aMaskMem7u	db 'mask  mem   = %7u',0Ah,0
; char aOldPtn7lu[]
aOldPtn7lu	db 'old - ptn   = %7lu',0Ah,0
; char aEtcMem7ld[]
aEtcMem7ld	db 'etc   mem   = %7ld',0Ah
		db 0Ah,0
; char aZPtnFreeXBossF[]
aZPtnFreeXBossF	db 'Z = PTN FREE, X = BOSS FREE, UP = TAMA DEL, DOWN = REWIRTE, ret = NODE CHEAK',0
aPtn		db 'PTN ',0
aMask		db 'MASK',0
aKabe		db 'KABE',0
; char a30h[]
a30h		db 1Bh,'[3;0H',0
; char a360h[]
a360h		db 1Bh,'[3;60H',0
; char aHeapCheak[]
aHeapCheak	db 'HEAP Cheak  ',0
aEmpty		db 'EMPTY   ',0
; char aOk[]
aOk		db 'OK      ',0
; char aCorrupt[]
aCorrupt	db 'CORRUPT ',0
; char a20h[]
a20h		db 1Bh,'[2;0H',0
; char aGx3d[]
aGx3d		db 'gx = %3d',0
; char a40h[]
a40h		db 1Bh,'[4;0H',0
; char aKbhitDDirDSpDS[]
aKbhitDDirDSpDS	db ' kbhit:%d,dir:%d, sp:%d, sh:%d, exit:%d, end:%d',0Ah,0
; char a50h[]
a50h		db 1Bh,'[5;0H',0
; char aMain7luRand7lu[]
aMain7luRand7lu	db ' main:%7lu, rand:%7lu, bomb:%d, timer:%7lu',0Ah,0
; char aGogbgGtg[]
aGogbgGtg@gcglv	db 'バッチファイルから起動してよ',0
; char aCGzgmgngg[]
aCGzgmgngg	db '面セレクト',0Ah,0
; char aCRf[]
aCRf		db '面数',0
; char aD[]
aD		db '%d',0
; char aSelect_flag[]
aSelect_flag	db 'select_flag',0
; char aGegxgggvbGhbib[]
aGegxgggvbGhbib	db 'テストモード！！',0Ah,0
; char aGfgogbgogvbGhb[]
aGfgogbgogvbGhb	db 'デバッグモード！！',0Ah,0
aUmx		db '東方靈異.伝',0
; char aInit_mdt[]
aInit_mdt	db 'init.mdt',0
; char aZigoku_mde[]
aZigoku_mde	db 'zigoku.mde',0
; char a2[]
a2		db '2 :',0
; char src[]
src		db 'boss1.grp',0
; char aPositive_mdt[]
aPositive_mdt	db 'positive.mdt',0
; char aLegend_mdt[]
aLegend_mdt	db 'LEGEND.mdt',0
; char aBoss2_grp[]
aBoss2_grp	db 'boss2.grp',0
; char aBoss3_grp[]
aBoss3_grp	db 'boss3.grp',0
; char aKami_mdt[]
aKami_mdt	db 'kami.mdt',0
; char aBoss4_grp[]
aBoss4_grp	db 'boss4.grp',0
; char aKami2_mdt[]
aKami2_mdt	db 'kami2.mdt',0
; char aBoss5_grp[]
aBoss5_grp	db 'boss5.grp',0
; char aTensi_mdt[]
aTensi_mdt	db 'tensi.mdt',0
; char aAlice_mdt[]
aAlice_mdt	db 'alice.mdt',0
aStg_b_ptn	db 'stg_b.ptn',0
; char a3[]
a3		db '3 :',0
dbl_34FF5	dq -8.0
; char aFuuin[]
aFuuin		db 'fuuin',0
; char aReiiden[]
aReiiden	db 'reiiden',0
aO		db '社',0
aCv		db '魔',0
aTn		db '地',0
; char aOp[3]
aOp		db 'op',0
		db 0
include th01/hardware/vsync[data].asm
include th01/ztext[data].asm
public _game_initialized
_game_initialized	db 0
		db 0
include th01/hardware/palette[data].asm
include th01/hardware/graph_r[data].asm
include th01/hardware/respal[data].asm
word_350CE	dw 1
word_350D0	dw 1
		dd    0
		dd    0
		db    0
		db    0
		db    0
byte_350DD	db 0
byte_350DE	db 0
byte_350DF	db 0
aHgrx		db 'HGRX',0
aHgrz		db 'HGRZ',0
include libs/master.lib/version[data].asm
include libs/master.lib/tx[data].asm
include libs/master.lib/grp[data].asm
include libs/master.lib/pal[data].asm
include libs/master.lib/respal_exist[data].asm
include libs/master.lib/resdata[data].asm
include libs/master.lib/fil[data].asm
include libs/master.lib/keytable[data].asm
include libs/master.lib/keystart[data].asm
include libs/master.lib/keyback[data].asm
include libs/master.lib/dos_ropen[data].asm
include libs/master.lib/clip[data].asm
include libs/master.lib/sin8[data].asm
include libs/master.lib/atan8[data].asm
include libs/master.lib/rand[data].asm
		db    7
		db 0E0h
		db  18h
		db  18h
		db  30h	; 0
		db  0Ch
		db  50h	; P
		db    5
		db  40h
		db    2
		db  80h
		db    1
		db  80h
		db    1
		db  81h
		db  81h
		db  81h
		db  81h
		db  80h
		db    1
		db  80h
		db    1
		db  40h
		db    2
		db  50h	; P
		db    5
		db 0C0h	; ﾀ
		db  0Ch
		db  18h
		db  18h
		db    7
		db 0E0h
		db    1
		db  80h
		db    8
		db  10h
		db  10h
		db    4
		db  40h
		db    2
		db    0
		db    0
		db  84h
		db    1
		db    0
		db  10h
		db    0
		db    1
		db  80h
		db    1
		db  88h
		db    0
		db  80h
		db  20h
		db    0
		db    0
		db  40h
		db    2
		db    0
		db    0
		db  18h
		db    8
		db    3
		db  20h
public _res_id
_res_id	db 'ReiidenConfig',0
unk_355EC	db    0
		dd    0
		db    0
		db    0
		db    0
		db  55h	; U
		db 0AAh	; ｪ
		db  55h	; U
		db 0AAh	; ｪ
		db  55h	; U
		db 0AAh	; ｪ
		db  55h	; U
		db 0AAh	; ｪ
		db 0AAh	; ｪ
		db  55h	; U
		db 0AAh	; ｪ
		db  55h	; U
		db 0AAh	; ｪ
		db  55h	; U
		db 0AAh	; ｪ
		db  55h	; U
		db    0
		db 0DDh
		db    0
		db  77h	; w
		db    0
		db 0DDh
		db    0
		db  77h	; w
		db  33h	; 3
		db  33h	; 3
		db 0CCh	; ﾌ
		db 0CCh	; ﾌ
		db  33h	; 3
		db  33h	; 3
		db 0CCh	; ﾌ
		db 0CCh	; ﾌ
		db 0CCh	; ﾌ
		db 0CCh	; ﾌ
		db  33h	; 3
		db  33h	; 3
		db 0CCh	; ﾌ
		db 0CCh	; ﾌ
		db  33h	; 3
		db  33h	; 3
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		db    0
		db 0FFh
		db  80h
		db    0
		db  20h
		db    0
		db  20h
		db    0
		db  10h
		db    0
		db    8
		db    0
		db    4
		db    0
		db    2
		db    0
		db    1
		db    0
		db 0C0h	; ﾀ
		db    0
		db  60h
		db    0
		db  30h	; 0
		db    0
		db  18h
		db    0
		db  0Ch
		db    0
		db    6
		db    0
		db    3
		db    0
		db    1
		db  80h
		db 0E0h
		db    0
		db  70h	; p
		db    0
		db  38h	; 8
		db    0
		db  1Ch
		db    0
		db  0Eh
		db    0
		db    7
		db    0
		db    3
		db  80h
		db    1
		db 0C0h	; ﾀ
		db 0F0h
		db    0
		db  78h	; x
		db    0
		db  3Ch	; <
		db    0
		db  1Eh
		db    0
		db  0Fh
		db    0
		db    7
		db  80h
		db    3
		db 0C0h	; ﾀ
		db    1
		db 0E0h
		db 0F8h
		db    0
		db  7Ch	; |
		db    0
		db  3Eh	; >
		db    0
		db  1Fh
		db    0
		db  0Fh
		db  80h
		db    7
		db 0C0h	; ﾀ
		db    3
		db 0E0h
		db    1
		db 0F0h
		db 0FCh
		db    0
		db  7Eh	; ~
		db    0
		db  3Fh	; ?
		db    0
		db  1Fh
		db  80h
		db  0Fh
		db 0C0h	; ﾀ
		db    7
		db 0E0h
		db    3
		db 0F0h
		db    1
		db 0F8h
		db 0FEh
		db    0
		db  7Fh
		db    0
		db  3Fh	; ?
		db  80h
		db  1Fh
		db 0C0h	; ﾀ
		db  0Fh
		db 0E0h
		db    7
		db 0F0h
		db    3
		db 0F8h
		db    1
		db 0FCh
		db 0FFh
		db    0
		db  7Fh
		db  80h
		db  3Fh	; ?
		db 0C0h	; ﾀ
		db  1Fh
		db 0E0h
		db  0Fh
		db 0F0h
		db    7
		db 0F8h
		db    3
		db 0FCh
		db    1
		db 0FEh
include th01/mdrv2[data].asm
aVqvnvtvmvcb@vp	db 'ＲＯＵＮＤ　１　ＣＬＥＡＲ',0
aVbvpvovzvtvbvf	db 'Ｃｏｎｇｒａｔｕｌａｔｉｏｎ！！',0
aVrvevmvevgvfb@	db 'Ｓｅｌｅｃｔ　ｎｅｘｔ　Ｒｏｕｎｄ',0
aCvkev		db '魔界へ',0
aTnncv		db '地獄へ',0
		db 0
dword_3573A	dd 0FFBBFFEEh
off_3573E	dd aVo
					; "０"
		dd aVp			; "１"
		dd aVq			; "２"
		dd aVr			; "３"
		dd aVs			; "４"
		dd aVt			; "５"
		dd aVu			; "６"
		dd aVv			; "７"
		dd aVw			; "８"
		dd aVx			; "９"
		dd aB@			; "　"
aClear3_grp	db 'CLEAR3.grp',0
aNumb_ptn	db 'numb.ptn',0
aVo		db '０',0
aVp		db '１',0
aVq		db '２',0
aVr		db '３',0
aVs		db '４',0
aVt		db '５',0
aVu		db '６',0
aVv		db '７',0
aVw		db '８',0
aVx		db '９',0
aB@		db '　',0
aSTAGE_COMPLETE	db 'ＳＴＡＧＥ　　　　ＣＯＭＰＬＥＴＥ',0
aSTAGE_COMPLETE_NUM	db '　　　　０　',0
aB@b@vavnvmvtvr	db '　　ＢＯＮＵＳ',0
aB@vsvivnveb@	db '   　Ｔｉｍｅ　',0
aVbvpvovfvivovx	db 'Ｃｏｎｔｉｎｕｏｕｓ',0
aVavpvnvvbxvovm	db 'Ｂｏｍｂ＆Ｐｌａｙｅｒ',0
aB@b@vrvsvVfvd	db '　　ＳＴＡＧＥ',0
aVavnvmvtvrb@vo	db 'ＢＯＮＵＳ　Ｐｏｉｎｔ',0
aVgvivfb@vyb@vj	db 'Ｈｉｔ　Ｚ　Ｋｅｙ',0
		db 0
		db  49h	; I
		db 81h,	48h
		db 81h,	94h
		db 81h,	95h
		db 81h,	96h
		db 81h,	98h
		db 81h,	99h
		db 81h,	9Fh
		db 81h,	87h
		db 81h,	88h
		db 81h,	89h
		db 81h,	8Ah
		db 81h,	63h
		db 81h,	67h
		db 81h,	68h
		db 81h,	5Eh
		db 81h,	44h
		db 81h
		db  45h	; E
		db  81h
aBqbqbqbqbqbqbq	db '＿＿＿＿＿＿＿＿',0
byte_35889	db 0
aB@b@b@b@b@b@b@	db '　　　　　　　　',0
aHiscore_0	db 'HISCORE',0
off_358A3	dd aB@gcbGwbB@
					; "　イージー　"
		dd aB@gmbGGlb@		; "　ノーマル　"
		dd aB@gnbGhb@b@		; "　ハード　　"
		dd aGlgigegbgbgn	; "ルナティック"
aC		db '無',0
aUmx_0		db '東方★靈異伝　　',0
aHiscore	db 'HISCORE',0
aReyhies_dat	db 'REYHIES.DAT',0
aReyhino_dat	db 'REYHINO.DAT',0
aReyhiha_dat	db 'REYHIHA.DAT',0
; char aReyhilu_dat[]
aReyhilu_dat	db 'REYHILU.DAT',0
aVb		db 'ａ',0
aSp		db 'SP',0
aBi		db '←',0
aBi_0		db '→',0
aPi		db '終',0
aB@cB@iB@	db '　霊　位　',0
aB@b@cB@b@sob@b	db '　　名　　前　　',0
aB@b@uB@b@u_b@b	db '　　得　　点　　',0
aGxgebGwbeglbGg	db 'ステージ・ルート',0
aB@sB@r_b@	db '　靈　神　',0
aSMRgcId	db '太元帥明王',0
aB@uvb@rxb@	db '　天　仙　',0
aB@r_b@rxb@	db '　神　仙　',0
aB@tnb@rxb@	db '　地　仙　',0
aB@rlb@rxb@	db '　人　仙　',0
aB@rxb@pcb@	db '　仙　女　',0
aIab@czb@ot	db '陰　陽　師',0
aSB@fB@ot	db '靈　媒　師',0
aPcb@lB@o	db '修　業　者',0
aCvke		db '魔界',0
aTnnc		db '地獄',0
aB_0		db '−',0
aWB		db 'wb',0
aB@gcbGwbB@	db '　イージー　',0
aB@gmbGGlb@	db '　ノーマル　',0
aB@gnbGhb@b@	db '　ハード　　',0
aGlgigegbgbgn	db 'ルナティック',0
aGame_o_grp	db 'game_o.grp',0
aEndm_a_grp	db 'endm_a.grp',0
aUmx_2		db '東方靈異伝　強者の記録　',0
aUmx_1		db '東方靈異伝　強者の記録',0
byte_35A44	db 0
		db 0
include th01/pf[data].asm
unk_35A4A	db  18h
		db  3Ch	; <
		db  7Eh	; ~
		db 0FFh
		db 0FFh
		db  7Eh	; ~
		db  3Ch	; <
		db  18h
unk_35A52	db  18h
		db  3Ch	; <
		db 0FFh
		db 0FFh
		db  7Eh	; ~
		db  7Eh	; ~
		db  66h	; f
		db  42h	; B
unk_35A5A	db  18h
		db  3Ch	; <
		db  5Ah	; Z
		db 0FFh
		db 0FFh
		db  5Ah	; Z
		db  3Ch	; <
		db  18h
		db    0
		db    0
		db  18h
		db  2Ch	; ,
		db  2Ch	; ,
		db  18h
		db    0
		db    0
		db    0
		db  18h
		db  2Ch	; ,
		db  7Eh	; ~
		db  7Eh	; ~
		db  2Ch	; ,
		db  18h
		db    0
		db  18h
		db  18h
		db  2Ch	; ,
		db 0FFh
		db 0FFh
		db  2Ch	; ,
		db  18h
		db  18h
		db  18h
		db  2Ch	; ,
		db  5Ah	; Z
		db 0FFh
		db 0FFh
		db  5Ah	; Z
		db  2Ch	; ,
		db  18h
aBomb		db 'Bomb',0
aExtend		db 'Extend!!',0
aVpf		db '１萬',0
		db 0
byte_35A96	db 0
off_35A97	dd aVo_0
					; "０"
		dd aVp_0		; "１"
		dd aVq_0		; "２"
		dd aVr_0		; "３"
		dd aVs_0		; "４"
		dd aVt_0		; "５"
		dd aVu_0		; "６"
		dd aVv_0		; "７"
		dd aVw_0		; "８"
		dd aVx_0		; "９"
dword_35ABF	dd 0
aVo_0		db '０',0
aVp_0		db '１',0
aVq_0		db '２',0
aVr_0		db '３',0
aVs_0		db '４',0
aVt_0		db '５',0
aVu_0		db '６',0
aVv_0		db '７',0
aVw_0		db '８',0
aVx_0		db '９',0
		db    0
		db 0E8h
		db    3
		db 0E8h
		db    3
		db 0E8h
		db    3
		db 0E8h
		db    3
		db 0D0h	; ﾐ
		db    7
		db 0B0h	; ｰ
		db    4
		db 0B0h	; ｰ
		db    4
		db 0B0h	; ｰ
		db    4
		db 0B0h	; ｰ
		db    4
		db 0B8h	; ｸ
		db  0Bh
		db  78h	; x
		db    5
		db  78h	; x
		db    5
		db  78h	; x
		db    5
		db  78h	; x
		db    5
		db 0A0h
		db  0Fh
		db  40h
		db    6
		db  40h
		db    6
		db  40h
		db    6
		db  58h	; X
		db    2
		db  70h	; p
		db  17h
		db 0B0h	; ｰ
		db    4
		db 0B0h	; ｰ
		db    4
		db 0B0h	; ｰ
		db    4
		db 0B0h	; ｰ
		db    4
		db 0D0h	; ﾐ
		db    7
		db  78h	; x
		db    5
		db  78h	; x
		db    5
		db  78h	; x
		db    5
		db  78h	; x
		db    5
		db 0A0h
		db  0Fh
		db  40h
		db    6
		db    8
		db    7
		db    8
		db    7
		db  40h
		db    6
		db  40h
		db  1Fh
byte_35B28	db 0
byte_35B29	db 0
dword_35B2A	dd 0
dword_35B2E	dd 0
dword_35B32	dd 0
dword_35B36	dd 0
dword_35B3A	dd 0
dword_35B3E	dd 0
byte_35B42	db 0
byte_35B43	db 0
byte_35B44	db 0
byte_35B45	db 1
byte_35B46	db 0
byte_35B47	db 0
byte_35B48	db 0
dbl_35B49	dq -10.0
		db 0
word_35B52	dw 0B01h
word_35B54	dw 0
aBoss2_bos	db 'boss2.bos',0
aBoss3_m_ptn	db 'boss3_m.ptn',0
aBoss2_grp_0	db 'boss2.grp',0
flt_35B76	dd 2.0
byte_35B7A	db 1
byte_35B7B	db 4
byte_35B7C	db 8
		db  8Fh
		db 0FFh
		db 0FFh
		db 0E0h
		db 0CFh	; ﾏ
		db 0FFh
		db 0FFh
		db 0E0h
		db  6Fh	; o
		db 0FFh
		db 0FFh
		db 0F1h
		db  3Fh	; ?
		db 0FFh
		db 0FFh
		db 0F3h
		db  1Fh
		db 0FFh
		db 0FFh
		db 0F6h
		db  0Fh
		db 0FFh
		db 0FFh
		db 0FCh
		db    7
		db 0FFh
		db 0FFh
		db 0F8h
		db    7
		db 0FFh
		db 0FFh
		db 0F0h
		db    0
		db    2
		db  40h
		db 0E1h
		db    8
		db    6
		db  62h	; b
		db 0E0h
		db    0
		db  47h	; G
		db 0E2h
		db  20h
		db    4
		db 0F6h
		db  6Fh	; o
		db    0
		db    6
		db 0F7h
		db 0EFh
		db  20h
		db    6
		db 0FFh
		db 0FFh
		db  60h
		db    7
		db 0FFh
		db 0FFh
		db 0E0h
		db    7
		db 0FFh
		db 0FFh
		db 0E0h
word_35BBD	dw 903h
aBoss3_1_bos	db 'boss3_1.bos',0
aBoss3_2_bos	db 'boss3_2.bos',0
aBoss3_grp_0	db 'boss3.grp',0
aBoss3_m_ptn_0	db 'boss3_m.ptn',0
		db 0
byte_35BEE	db 0
		db 0
aSt_grp		db 'ST .GRP',0
		dd    0
		db    0
		db    0
		db    0
; char aSt_mdt[]
aSt_mdt		db 'ST .MDT',0
		dd    0
		db    0
		db    0
		db    0
		db  11h
		db  12h
		db  13h
		db  14h
		db  15h
		db  0Eh
		db  0Fh
		db  10h
		db  12h
		db  11h
		db  0Bh
		db  0Ch
		db  0Dh
		db  0Fh
		db  0Eh
		db    8
		db    9
		db  0Ah
		db  0Ch
		db  0Bh
		db    8
		db    9
		db  0Ah
		db    9
		db    8
aStage_dat	db 'stage .dat',0
		dd    0
unk_35C36	db    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		db    0
		db    0
		db    0
flt_35C9A	dd 1.5
flt_35C9E	dd 16.0
flt_35CA2	dd 64.0
flt_35CA6	dd 128.0
flt_35CAA	dd 192.0
flt_35CAE	dd 256.0
flt_35CB2	dd 32.0
flt_35CB6	dd 48.0
flt_35CBA	dd 80.0
flt_35CBE	dd 96.0
flt_35CC2	dd 112.0
flt_35CC6	dd 144.0
flt_35CCA	dd 160.0
flt_35CCE	dd 176.0
flt_35CD2	dd 208.0
flt_35CD6	dd 224.0
flt_35CDA	dd 240.0
byte_35CDE	db 0
byte_35CDF	db 0Dh
word_35CE0	dw 0
word_35CE2	dw 0
word_35CE4	dw 0
word_35CE6	dw 0
aBoss1_bos	db 'boss1.bos',0
aBoss1_2_bos	db 'boss1_2.bos',0
aBoss1_3_bos	db 'boss1_3.bos',0
aBoss1_grp_0	db 'boss1.grp',0
word_35D14	dw 0
word_35D16	dw 0
dword_35D18	dd 2080B06h
aTamasii_bos	db 'tamasii.bos',0
aTamasii2_bos	db 'tamasii2.bos',0
aTamayen_ptn	db 'tamayen.ptn',0
		db 0
word_35D42	dw 0
word_35D44	dw 0
word_35D46	dw 0
word_35D48	dw 0
word_35D4A	dw 0
word_35D4C	dw 0
dword_35D4E	dd 2080603h
aBoss5_bos	db 'boss5.bos',0
aBoss5_2_bos	db 'boss5_2.bos',0
aBoss5_3_bos	db 'boss5_3.bos',0
aBoss5_gr_grc	db 'boss5_gr.grc',0
aBoss3_m_ptn_1	db 'boss3_m.ptn',0
flt_35D8D	dd 400.0
flt_35D91	dd 640.0
		; Hack. Let's better use bytes for accuracy here.
dbl_35D95	db 09ah, 099h, 099h, 099h, 099h, 099h, 0a9h, 03fh
		db 0
		dd aAngel		; "ANGEL"
		dd aOf			; "OF"
		dd aDeath		; "DEATH"
byte_35DAA	db 0
off_35DAB	dd aBoss6_a1_grp
					; "BOSS6_A1.GRP"
		dd aBoss6_a2_grp	; "BOSS6_A2.GRP"
		dd aBoss6_a3_grp	; "BOSS6_A3.GRP"
		dd aBoss6_a4_grp	; "BOSS6_A4.GRP"
point_35DBB	Point <999, 999>
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		db    0
		db    0
word_35DDD	dw 0
word_35DDF	dw 0
byte_35DE1	db 0
byte_35DE2	db 0
word_35DE3	dw 0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		db    0
		db    0
word_35E03	dw 0FFFFh
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
		dd    0
unk_35E7D	db  10h
		db  18h
		db  18h
		db  7Fh
		db 0FEh
		db  18h
		db  18h
		db    8
unk_35E85	db    1
		db  0Eh
		db  3Eh	; >
		db  7Eh	; ~
		db  7Ch	; |
		db  7Ch	; |
		db 0F8h
		db 0C0h	; ﾀ
unk_35E8D	db  80h
		db  70h	; p
		db  7Ch	; |
		db  7Eh	; ~
		db  3Eh	; >
		db  3Eh	; >
		db  1Fh
		db    3
word_35E95	dw 0
word_35E97	dw 0
word_35E99	dw 0
unk_35E9B	db    3
		db    4
		db    5
aAngel		db 'ANGEL',0
aOf		db 'OF',0
aDeath		db 'DEATH',0
aBoss6_a1_grp	db 'BOSS6_A1.GRP',0
aBoss6_a2_grp	db 'BOSS6_A2.GRP',0
aBoss6_a3_grp	db 'BOSS6_A3.GRP',0
aBoss6_a4_grp	db 'BOSS6_A4.GRP',0
aBoss6_l_grp	db 'boss6_l.grp',0
aBoss6_h_grp	db 'boss6_h.grp',0
; char aTensi_mdt_0[]
aTensi_mdt_0	db 'TENSI.MDT',0
; char aZigoku_mde_0[]
aZigoku_mde_0	db 'zigoku.mde',0
aBoss6_1_bos	db 'boss6_1.bos',0
aBoss6_2_bos	db 'boss6_2.bos',0
aBoss6_3_bos	db 'boss6_3.bos',0
aBoss6gr1_grc	db 'boss6gr1.grc',0
aBoss6gr2_grc	db 'boss6gr2.grc',0
aBoss6gr3_grc	db 'boss6gr3.grc',0
aBoss6gr4_grc	db 'boss6gr4.grc',0
flt_35F66	dd 1000.0
flt_35F6A	dd 1001.0
flt_35F6E	dd 12.0
flt_35F72	dd 1002.0
flt_35F76	dd 1003.0
flt_35F7A	dd 639.0
flt_35F7E	dd 399.0
flt_35F82	dd 344.0
flt_35F86	dd 384.0
flt_35F8A	dd 8.0
flt_35F8E	dd 80.0
		; Hack. Let's better use bytes for accuracy here.
dbl_35F92	db 09ah, 099h, 099h, 099h, 099h, 099h, 0b9h, 03fh
dbl_35F9A	db 09ah, 099h, 099h, 099h, 099h, 099h, 0b9h, 0bfh
flt_35FA2	dd 640.0
flt_35FA6	dd 0.5
dbl_35FAA	dq -8.0
aBoss6_grp	db 'boss6.grp',0
aBoss6_a5_grp	db 'boss6_a5.grp',0
; char aSyugen_mdt[]
aSyugen_mdt	db 'syugen.MDT',0
aBoss6_a6_grp	db 'boss6_a6.grp',0
		db 0
		dd aAngel_0		; "ANGEL"
		dd aOf_0		; "OF"
		dd aDeath_0		; "DEATH"
word_35FEE	dw 9
word_35FF0	dw 0
word_35FF2	dw 1
point_35FF4	Point <999, 999>
word_35FF8	dw 0
word_35FFA	dw 0
unk_35FFC	db    3
		db    4
		db    5
aAngel_0	db 'ANGEL',0
aOf_0		db 'OF',0
aDeath_0	db 'DEATH',0
aBoss7_d1_grp	db 'boss7_d1.grp',0
aBoss8_a1_grp	db 'boss8_a1.grp',0
; char aAlice_mdt_0[]
aAlice_mdt_0	db 'ALICE.MDT',0
; char aZigoku_mde_1[]
aZigoku_mde_1	db 'zigoku.mde',0
aBoss8_1_bos	db 'boss8_1.bos',0
aBoss8_e1_bos	db 'boss8_e1.bos',0
aBoss8_e2_bos	db 'boss8_e2.bos',0
aBoss8_grz	db 'boss8.grz',0
aBoss8_d1_grp	db 'boss8_d1.grp',0
aBoss8_d2_grp	db 'boss8_d2.grp',0
aBoss8_d3_grp	db 'boss8_d3.grp',0
aBoss8_d4_grp	db 'boss8_d4.grp',0
; char asc_360A1[]
asc_360A1	db 1Bh,'*',0
; char a3_0[]
a3_0		db 1Bh,')3',0
; char a1640m_0[]
a1640m_0	db 1Bh,'[16;40m',0
; char a00h_0[]
a00h_0		db 1Bh,'[0;0H',0
; char asc_360B8[]
asc_360B8	db ' ',0
; char a0[]
a0		db 1Bh,')0',0
; char a0m_0[]
a0m_0		db 1Bh,'[0m',0
; char a11h[]
a11h		db 1Bh,'[1;1H',0
word_360CA	dw 0
byte_360CC	db 0
word_360CD	dw 0
		db  3Ch	; <
		db    0
		db  7Eh	; ~
		db    0
		db 0FFh
		db    0
		db 0FFh
		db    0
		db 0FFh
		db    0
		db 0FFh
		db    0
		db  7Eh	; ~
		db    0
		db  3Ch	; <
		db    0
		db  1Eh
		db    0
		db  3Fh	; ?
		db    0
		db  7Fh
		db  80h
		db  7Fh
		db  80h
		db  7Fh
		db  80h
		db  7Fh
		db  80h
		db  3Fh	; ?
		db    0
		db  1Eh
		db    0
		db  0Fh
		db    0
		db  1Fh
		db  80h
		db  3Fh	; ?
		db 0C0h	; ﾀ
		db  3Fh	; ?
		db 0C0h	; ﾀ
		db  3Fh	; ?
		db 0C0h	; ﾀ
		db  3Fh	; ?
		db 0C0h	; ﾀ
		db  1Fh
		db  80h
		db  0Fh
		db    0
		db    7
		db  80h
		db  0Fh
		db 0C0h	; ﾀ
		db  1Fh
		db 0E0h
		db  1Fh
		db 0E0h
		db  1Fh
		db 0E0h
		db  1Fh
		db 0E0h
		db  0Fh
		db 0C0h	; ﾀ
		db    7
		db  80h
		db    3
		db 0C0h	; ﾀ
		db    7
		db 0E0h
		db  0Fh
		db 0F0h
		db  0Fh
		db 0F0h
		db  0Fh
		db 0F0h
		db  0Fh
		db 0F0h
		db    7
		db 0E0h
		db    3
		db 0C0h	; ﾀ
		db    1
		db 0E0h
		db    3
		db 0F0h
		db    7
		db 0F8h
		db    7
		db 0F8h
		db    7
		db 0F8h
		db    7
		db 0F8h
		db    3
		db 0F0h
		db    1
		db 0E0h
		db    0
		db 0F0h
		db    1
		db 0F8h
		db    3
		db 0FCh
		db    3
		db 0FCh
		db    3
		db 0FCh
		db    3
		db 0FCh
		db    1
		db 0F8h
		db    0
		db 0F0h
		db    0
		db  78h	; x
		db    0
		db 0FCh
		db    1
		db 0FEh
		db    1
		db 0FEh
		db    1
		db 0FEh
		db    1
		db 0FEh
		db    0
		db 0FCh
		db    0
		db  78h	; x
		db  18h
		db    0
		db  24h	; $
		db    0
		db  42h	; B
		db    0
		db  81h
		db    0
		db  81h
		db    0
		db  42h	; B
		db    0
		db  24h	; $
		db    0
		db  18h
		db    0
		db  0Ch
		db    0
		db  12h
		db    0
		db  21h	; !
		db    0
		db  40h
		db  80h
		db  40h
		db  80h
		db  21h	; !
		db    0
		db  12h
		db    0
		db  0Ch
		db    0
		db    6
		db    0
		db    9
		db    0
		db  10h
		db  80h
		db  20h
		db  40h
		db  20h
		db  40h
		db  10h
		db  80h
		db    9
		db    0
		db    6
		db    0
		db    3
		db    0
		db    4
		db  80h
		db    8
		db  40h
		db  10h
		db  20h
		db  10h
		db  20h
		db    8
		db  40h
		db    4
		db  80h
		db    3
		db    0
		db    1
		db  80h
		db    2
		db  40h
		db    4
		db  20h
		db    8
		db  10h
		db    8
		db  10h
		db    4
		db  20h
		db    2
		db  40h
		db    1
		db  80h
		db    0
		db 0C0h	; ﾀ
		db    1
		db  20h
		db    2
		db  10h
		db    4
		db    8
		db    4
		db    8
		db    2
		db  10h
		db    1
		db  20h
		db    0
		db 0C0h	; ﾀ
		db    0
		db  60h
		db    0
		db  90h
		db    1
		db    8
		db    2
		db    4
		db    2
		db    4
		db    1
		db    8
		db    0
		db  90h
		db    0
		db  60h
		db    0
		db  30h	; 0
		db    0
		db  48h	; H
		db    0
		db  84h
		db    1
		db    2
		db    1
		db    2
		db    0
		db  84h
		db    0
		db  48h	; H
		db    0
		db  30h	; 0
		db    0
		db    0
		db  24h	; $
		db    0
		db  42h	; B
		dd    0
		db    0
		db  42h	; B
		db    0
		db  24h	; $
		dd    0
		db    0
		db  12h
		db    0
		db  21h	; !
		dd    0
		db    0
		db  21h	; !
		db    0
		db  12h
		dd    0
		db    0
		db    9
		db    0
		db  10h
		db  80h
		dd    0
		db  10h
		db  80h
		db    9
		dd    0
		db    0
		db    4
		db  80h
		db    8
		db  40h
		dd    0
		db    8
		db  40h
		db    4
		db  80h
		dd    0
		db    2
		db  40h
		db    4
		db  20h
		dd    0
		db    4
		db  20h
		db    2
		db  40h
		dd    0
		db    1
		db  20h
		db    2
		db  10h
		dd    0
		db    2
		db  10h
		db    1
		db  20h
		dd    0
		db    0
		db  90h
		db    1
		db    8
		dd    0
		db    1
		db    8
		db    0
		db  90h
		dd    0
		db    0
		db  48h	; H
		db    0
		db  84h
		dd    0
		db    0
		db  84h
		db    0
		db  48h	; H
		db    0
		db    0
flt_3624F	dd 1.5
		db 0
_INIT_	segment word public 'INITDATA' use16
		db    1
		db  20h
		dd sub_E319
		db    1
		db  20h
		dd sub_1240A
		db    1
		db  20h
		dd sub_17041
		db    1
		db  20h
		dd sub_21819
		db    1
		db  20h
		dd sub_24DFF
_INIT_	ends

	.data?

; TODO: Missing clip[bss].asm (16 bytes) somewhere in there...
byte_36C14	db ?
byte_36C15	db ?
_rand	dd ?
dword_36C1A	dd ?
byte_36C1E	db ?
_mode_debug	db ?
dword_36C20	dd ?
public _PLAYER_INVINCIBILITY_TIME
_player_invincibility_time	dw ?
x_36C26	dw ?
word_36C28	dw ?
word_36C2A	dw ?
word_36C2C	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
unk_37129	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
unk_373AF	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
unk_37635	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
word_386B3	dw ?
		db    ?	;
		db    ?	;
byte_386B7	db ?
unk_386B8	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
word_386D8	dw ?
word_386DA	dw ?
word_386DC	dw ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
byte_386E8	db ?
byte_386E9	db ?
byte_386EA	db ?
byte_386EB	db ?
byte_386EC	db ?
byte_386ED	db ?
byte_386EE	db ?
byte_386EF	db ?
		dd    ?
		dd    ?
		dd    ?
byte_386FC	db ?
byte_386FD	db ?
byte_386FE	db ?
byte_386FF	db ?
byte_38700	db ?
byte_38701	db ?
byte_38702	db ?
byte_38703	db ?
byte_38704	db ?
byte_38705	db ?
byte_38706	db ?
byte_38707	db ?
byte_38708	db ?
byte_38709	db ?
byte_3870A	db ?
byte_3870B	db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
byte_38721	db ?
byte_38722	db ?
byte_38723	db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_3873C	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
byte_3876C	db ?
word_3876D	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
word_387A3	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
byte_387D9	db ?
word_387DA	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
dword_3880A	dd ?
word_3880E	dw ?
word_38810	dw ?
include th01/hardware/vsync[bss].asm
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
; void (__interrupt far *int06_old)()
_int06_old	dd ?
include th01/hardware/graph[bss].asm
include th01/hardware/vram_planes[bss].asm
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_38988	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
; void (*off_38E28)(void)
off_38E28	dd ?
include libs/master.lib/pal[bss].asm
include libs/master.lib/fil[bss].asm
include libs/master.lib/keystart[bss].asm
		dd    ?
		dd    ?
		dd    ?
		dd    ?
public _resident
_resident	dd ?
unk_391A0	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_391E5	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_3922A	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_3926F	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_392B4	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_392F9	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_3933E	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_39383	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_393C8	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_3940D	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
; void (*off_39452)(void)
off_39452	dd ?
; void (*off_39456)(void)
off_39456	dd ?
; void (*off_3945A)(void)
off_3945A	dd ?
point_3945E	Point <?>
; void (*off_39462)(void)
off_39462	dd ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
point_3982A	Point <?>
word_3982E	dw ?
word_39830	dw ?
word_39832	dw ?
word_39834	dw ?
word_39836	dw ?
word_39838	dw ?
word_3983A	dw ?
word_3983C	dw ?
word_3983E	dw ?
word_39840	dw ?
word_39842	dw ?
word_39844	dw ?
word_39846	dw ?
word_39848	dw ?
word_3984A	dw ?
word_3984C	dw ?
word_3984E	dw ?
word_39850	dw ?
word_39852	dw ?
word_39854	dw ?
word_39856	dw ?
word_39858	dw ?
byte_3985A	db ?
byte_3985B	db ?
point_3985C	Point <?>
		dd    ?
unk_39864	db    ?	;
		db    ?	;
unk_39866	db    ?	;
		dd    ?
		dd    ?
		db    ?	;
word_39870	dw ?
word_39872	dw ?
word_39874	dw ?
word_39876	dw ?
		dd    ?
unk_3987C	db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
word_39880	dw ?
		dw ?
word_39884	dw ?
word_39886	dw ?
word_39888	dw ?
		dw ?
byte_3988C	db ?
unk_3988D	db    ?	;
point_3988E	Point <?>
		dd    ?
unk_39896	db    ?	;
		db    ?	;
unk_39898	db    ?	;
		dd    ?
		dd    ?
		db    ?	;
word_398A2	dw ?
word_398A4	dw ?
word_398A6	dw ?
word_398A8	dw ?
		dd    ?
unk_398AE	db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
word_398B2	dw ?
		db    ?	;
		db    ?	;
word_398B6	dw ?
word_398B8	dw ?
		dd    ?
byte_398BE	db ?
unk_398BF	db    ?	;
point_398C0	Point <?>
		dd ?
unk_398C8	db    ?	;
		db    ?	;
unk_398CA	db    ?	;
		dd    ?
		dd    ?
		db    ?	;
word_398D4	dw ?
word_398D6	dw ?
word_398D8	dw ?
word_398DA	dw ?
		dd ?
unk_398E0	db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
word_398E4	dw ?
		dw ?
word_398E8	dw ?
word_398EA	dw ?
		dd ?
byte_398F0	db ?
unk_398F1	db    ?	;
point_398F2	Point <?>
		dd    ?
unk_398FA	db    ?	;
		db    ?	;
unk_398FC	db    ?	;
		dd    ?
		dd    ?
		db    ?	;
word_39906	dw ?
word_39908	dw ?
word_3990A	dw ?
word_3990C	dw ?
		dd    ?
unk_39912	db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
word_39916	dw ?
		db    ?	;
		db    ?	;
word_3991A	dw ?
word_3991C	dw ?
		dd    ?
byte_39922	db ?
unk_39923	db    ?	;
unk_39924	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
word_39A1E	dw ?
word_39A20	dw ?
		dd    ?
		db    ?	;
byte_39A27	db ?
		db    ?	;
word_39A29	dw ?
word_39A2B	dw ?
		dd    ?
		db    ?	;
byte_39A32	db ?
		db ?
include th01/pf[bss].asm
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
unk_39B8C	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
byte_39B9B	db ?
		db    ?	;
byte_39B9D	db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
byte_39BB9	db ?
byte_39BBA	db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
byte_39D18	db ?
		dd    ?
		dd    ?
		db    ?	;
byte_39D22	db ?
		dd    ?
		dd    ?
		db    ?	;
byte_39D2C	db ?
		dd    ?
		dd    ?
		db    ?	;
byte_39D36	db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
; void far *node
node		dd ?
byte_39DA0	db ?
byte_39DA1	db ?
word_39DA2	dw ?
word_39DA4	dw ?
dword_39DA6	dd ?
word_39DAA	dw ?
word_39DAC	dw ?
word_39DAE	dw ?
byte_39DB0	db ?
		db ?
byte_39DB2	db ?
byte_39DB3	db ?
unk_39DB4	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
word_39DE4	dw ?
x_39DE6	dw ?
x_39DE8	dw ?
x_39DEA	dw ?
x_39DEC	dw ?
x_39DEE	dw ?
y_39DF0	dw ?
y_39DF2	dw ?
y_39DF4	dw ?
y_39DF6	dw ?
y_39DF8	dw ?
word_39DFA	dw ?
point_39DFC	Point <?>
y_39E00	dw ?
x_39E02	dw ?
word_39E04	dw ?
x_39E06	dw ?
word_39E08	dw ?
word_39E0A	dw ?
y_39E0C	dw ?
word_39E0E	dw ?
word_39E10	dw ?
word_39E12	dw ?
word_39E14	dw ?
word_39E16	dw ?
word_39E18	dw ?
word_39E1A	dw ?
		db    ?	;
word_39E1D	dw ?
		db ?
x_39E20	dw ?
word_39E22	dw ?
		db    ?	;
byte_39E25	db ?
byte_39E26	db ?
word_39E27	dw ?
word_39E29	dw ?
word_39E2B	dw ?
word_39E2D	dw ?
word_39E2F	dw ?
word_39E31	dw ?
word_39E33	dw ?
word_39E35	dw ?
word_39E37	dw ?
word_39E39	dw ?
word_39E3B	dw ?
word_39E3D	dw ?
word_39E3F	dw ?
word_39E41	dw ?
word_39E43	dw ?
word_39E45	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
word_39E57	dw ?
		db ?
word_39E5A	dw ?
word_39E5C	dw ?
word_39E5E	dw ?
word_39E60	dw ?
		dw ?
unk_39E64	db    ?	;
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
unk_39E6C	db    ?	;
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
word_39E74	dw ?
word_39E76	dw ?
word_39E78	dw ?
byte_39E7A	db ?
		db ?
; void far *off_39E7C
off_39E7C	dd ?
dword_39E80	dd ?
; void (*font)(void)
font		dd ?
; void (*off_39E88)(void)
off_39E88	dd ?
; void (*off_39E8C)(void)
off_39E8C	dd ?
word_39E90	dw ?
; void (*off_39E92)(void)
off_39E92	dd ?
; void (*off_39E96)(void)
off_39E96	dd ?
; void (*off_39E9A)(void)
off_39E9A	dd ?
; void (*off_39E9E)(void)
off_39E9E	dd ?
; void (*off_39EA2)(void)
off_39EA2	dd ?
; void (*off_39EA6)(void)
off_39EA6	dd ?
word_39EAA	dw ?
; void (*off_39EAC)(void)
off_39EAC	dd ?
word_39EB0	dw ?
byte_39EB2	db ?
; void (*off_39EB3)(void)
off_39EB3	dd ?
word_39EB7	dw ?
word_39EB9	dw ?
word_39EBB	dw ?
word_39EBD	dw ?
		dd    ?
		db    ?	;
unk_39EC4	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
byte_3A1B2	db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
word_3A1E5	dw ?
word_3A1E7	dw ?
word_3A1E9	dw ?
word_3A1EB	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
byte_3A37D	db ?
_route	db ?
word_3A37F	dw ?
word_3A381	dw ?
word_3A383	dw ?
word_3A385	dw ?
word_3A387	dw ?
point_3A389	Point <?>
		db ?
unk_3A38E	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
byte_3A3BE	db ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
word_3A3C9	dw ?
word_3A3CB	dw ?
word_3A3CD	dw ?
word_3A3CF	dw ?
word_3A3D1	dw ?
word_3A3D3	dw ?
word_3A3D5	dw ?
word_3A3D7	dw ?
word_3A3D9	dw ?
word_3A3DB	dw ?
word_3A3DD	dw ?
word_3A3DF	dw ?
word_3A3E1	dw ?
word_3A3E3	dw ?
word_3A3E5	dw ?
word_3A3E7	dw ?
word_3A3E9	dw ?
word_3A3EB	dw ?
word_3A3ED	dw ?
word_3A3EF	dw ?
word_3A3F1	dw ?
word_3A3F3	dw ?
word_3A3F5	dw ?
word_3A3F7	dw ?
byte_3A3F9	db ?
byte_3A3FA	db ?
word_3A3FB	dw ?
word_3A3FD	dw ?
		dd    ?
unk_3A403	db    ?	;
		db    ?	;
unk_3A405	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
unk_3A41B	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
unk_3A42C	db    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
word_3A4C3	dw ?
word_3A4C5	dw ?
word_3A4C7	dw ?
word_3A4C9	dw ?
word_3A4CB	dw ?
word_3A4CD	dw ?
word_3A4CF	dw ?
word_3A4D1	dw ?
word_3A4D3	dw ?
word_3A4D5	dw ?
word_3A4D7	dw ?
word_3A4D9	dw ?
word_3A4DB	dw ?
word_3A4DD	dw ?
word_3A4DF	dw ?
word_3A4E1	dw ?
word_3A4E3	dw ?
word_3A4E5	dw ?
word_3A4E7	dw ?
word_3A4E9	dw ?
word_3A4EB	dw ?
word_3A4ED	dw ?
word_3A4EF	dw ?
word_3A4F1	dw ?
byte_3A4F3	db ?
byte_3A4F4	db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
word_3A6B7	dw ?
byte_3A6B9	db ?
byte_3A6BA	db ?
word_3A6BB	dw ?
word_3A6BD	dw ?
		db ?
word_3A6C0	dw ?
word_3A6C2	dw ?
word_3A6C4	dw ?
byte_3A6C6	db ?
		db ?
word_3A6C8	dw ?
word_3A6CA	dw ?
word_3A6CC	dw ?
byte_3A6CE	db ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
word_3A6E3	dw ?
word_3A6E5	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
word_3A6FB	dw ?
		db ?
word_3A6FE	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
x_3A765	dw ?
y_3A767	dw ?
word_3A769	dw ?
word_3A76B	dw ?
word_3A76D	dw ?
word_3A76F	dw ?
word_3A771	dw ?
word_3A773	dw ?
word_3A775	dw ?
word_3A777	dw ?
word_3A779	dw ?
word_3A77B	dw ?
word_3A77D	dw ?
byte_3A77F	db ?
word_3A780	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
unk_3AB9C	db    ?	;
		db    ?	;
		db    ?	;
		db    ?	;
unk_3ABA0	db    ?	;
		dd    ?
		dd    ?
		db    ?	;
		db    ?	;
		db    ?	;
word_3ABAC	dw ?
word_3ABAE	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
word_3AC50	dw ?
word_3AC52	dw ?
word_3AC54	dw ?
word_3AC56	dw ?
word_3AC58	dw ?
word_3AC5A	dw ?
word_3AC5C	dw ?
word_3AC5E	dw ?
word_3AC60	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
word_3AF32	dw ?
word_3AF34	dw ?
word_3AF36	dw ?
word_3AF38	dw ?
y_3AF3A	dw ?
x_3AF3C	dw ?
word_3AF3E	dw ?
word_3AF40	dw ?
word_3AF42	dw ?
word_3AF44	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		db    ?	;
point_3B037	Point <?>
y_3B03B	dw ?
x_3B03D	dw ?
word_3B03F	dw ?
word_3B041	dw ?
point_3B043	Point <?>
point_3B047	Point <?>
word_3B04B	dw ?
word_3B04D	dw ?
word_3B04F	dw ?
word_3B051	dw ?
word_3B053	dw ?
word_3B055	dw ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
		dd    ?
word_3B327	dw ?
word_3B329	dw ?
word_3B32B	dw ?
word_3B32D	dw ?
		db ?
point_3B330	Point <?>
word_3B334	dw ?
word_3B336	dw ?
word_3B338	dw ?
word_3B33A	dw ?
word_3B33C	dw ?
word_3B33E	dw ?
		db    ?	;
word_3B341	dw 30 dup(?)
word_3B37D	dw 30 dup(?)
word_3B3B9	dw 30 dup(?)
word_3B3F5	dw 30 dup(?)
word_3B431	dw ?
word_3B433	dw ?
word_3B435	dw ?
byte_3B437	db ?
word_3B438	dw ?
x_3B43A	dw ?
x_3B43C	dw ?
y_3B43E	dw ?
y_3B440	dw ?
word_3B442	dw ?
word_3B444	dw ?
word_3B446	dw ?
word_3B448	dw ?
word_3B44A	dw ?
word_3B44C	dw ?
word_3B44E	dw ?
word_3B450	dw ?
word_3B452	dw ?
word_3B454	dw ?
		db    ?	;
word_3B457	dw ?
		dd    ?
		dd    ?
word_3B461	dw ?
		dd    ?
		dd    ?
word_3B46B	dw ?
		dd    ?
		dd    ?
word_3B475	dw ?
		dd    ?
		dd    ?
x_3B47F	dw    ?	;
x_3B481	dw    ?	;
y_3B483	dw    ?	;
y_3B485	dw    ?	;
word_3B487	dw ?
word_3B489	dw ?
		dd    ?
x_3B48F	dw ?
y_3B491	dw ?
word_3B493	dw ?
word_3B495	dw ?
word_3B497	dw ?
word_3B499	dw ?
byte_3B49B	db ?
word_3B49C	dw ?
		db    ?	;
word_3B49F	dw ?
word_3B4A1	dw ?
		dd    ?
		dd    ?
word_3B4AB	dw ?
		dd    ?
		dd    ?
word_3B4B5	dw ?
		dd    ?
		dd    ?
word_3B4BF	dw ?
		dd    ?
		dd    ?
word_3B4C9	dw ?
		dd    ?
		dd    ?
word_3B4D3	dw ?
		dd    ?
		dd    ?
word_3B4DD	dw ?
		dd    ?
		dd    ?
word_3B4E7	dw ?
		dd    ?
		dd    ?
x_3B4F1	dw    ?	;
x_3B4F3	dw    ?	;
x_3B4F5	dw    ?	;
x_3B4F7	dw    ?	;
y_3B4F9	dw    ?	;
y_3B4FB	dw    ?	;
y_3B4FD	dw    ?	;
y_3B4FF	dw    ?	;
		dd    ?
		dd    ?
		dd    ?
		dd    ?
point_3B511	Point <?>
word_3B515	dw ?
word_3B517	dw ?
word_3B519	dw ?
word_3B51B	dw ?
word_3B51D	dw ?
word_3B51F	dw ?
word_3B521	dw ?
word_3B523	dw ?
word_3B525	dw ?
word_3B527	dw ?
word_3B529	dw ?
word_3B52B	dw ?
word_3B52D	dw ?
byte_3B52F	db ?
word_3B530	dw ?

		end
